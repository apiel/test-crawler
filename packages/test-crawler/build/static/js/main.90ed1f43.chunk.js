(this["webpackJsonptest-crawler"]=this["webpackJsonptest-crawler"]||[]).push([[0],{284:function(e,t,a){e.exports=a(614)},291:function(e,t,a){},292:function(e,t,a){},614:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),o=a.n(l),i=a(82),c=(a(291),a(71)),s=a.n(c),u=a(9),m=a.n(u),p=a(30),d=a.n(p),f=a(14),h=a(59);a(292);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var E,v,b,y=r.a.createElement("path",{d:"M325.8166665077209,137.29999988079066 c146.97,0 251.77,73.76 322.73,155.31 V1.4999998807907104 h-647.5 v292.48 C72.47666650772089,211.8799998807907 178.03666650772095,137.29999988079066 325.8166665077209,137.29999988079066 z"}),j=r.a.createElement("rect",{x:1.0366616249084473,y:506.1999510526657,width:647.5,height:142.8000030517578}),k=r.a.createElement("circle",{cx:324.79667139053345,cy:325.2499998807907,r:125.18000030517578}),I=function(e){var t=e.svgRef,a=e.title,n=w(e,["svgRef","title"]);return r.a.createElement("svg",g({viewBox:"0 0 647.5 647.5",ref:t},n),a?r.a.createElement("title",null,a):null,y,j,k)},T=r.a.forwardRef((function(e,t){return r.a.createElement(I,g({svgRef:t},e))})),x=(a.p,a(12)),O=a.n(x),S=a(34),C=a(80),P=a(19),R=a(51),A=a.n(R),F=a(269),L=a.n(F),z=a(128),U=a.n(z),B=a(20),_=a.n(B),D=a(4),M=a.n(D),H=a(127),N=a.n(H),G=a(135),W=a.n(G),q=a(24),J=a.n(q),V=a(18),Y=a.n(V);!function(e){e.valid="valid",e.zonePin="zone-pin",e.report="report",e.diff="diff"}(E||(E={})),function(e){e.ChromePuppeteer="chrome-puppeteer",e.FirefoxSelenium="firefox-selenium",e.ChromeSelenium="chrome-selenium",e.SafariSelenium="safari-selenium",e.IeSelenium="ie-selenium"}(v||(v={})),function(e){e.Before="before",e.After="after"}(b||(b={}));function Z(e){return"/new/".concat(e)}function $(e,t){return"/pins/".concat(e,"/").concat(t)}function Q(e,t,a){return"/code/".concat(e,"/").concat(t,"/").concat(a)}function K(e,t,a){return"/results/".concat(e,"/").concat(t,"/").concat(a)}function X(e,t){return"/project/".concat(e,"/").concat(t)}var ee=a(17);function te(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getSettings",t)}function ae(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","loadProject",t)}function ne(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","saveProject",t)}function re(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getCrawlers",t)}function le(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","saveBeforeAfterCode",t)}function oe(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","setCode",t)}function ie(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getThumbnail",t)}function ce(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","removePin",t)}function se(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","pin",t)}function ue(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","setZoneStatus",t)}function me(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","setZonesStatus",t)}function pe(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","setStatus",t)}function de(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","startCrawler",t)}function fe(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","startCrawlers",t)}var he={lineHeight:1.2,borderLeft:"8px solid #EEE",paddingLeft:15,color:"#666",textAlign:"justify"},ge=function(e){var t=e.children;return r.a.createElement("div",{style:he},t)},we=[{name:"Desktop - 800x600",value:{width:800,height:600}},{name:"Desktop - 1024x768",value:{width:1024,height:768}},{name:"Desktop - 1920x1080",value:{width:1920,height:1080}},{name:"iPhone 5 - 320x568",value:{width:320,height:568,isMobile:!0,hasTouch:!0}},{name:"iPhone 6 - 375x667",value:{width:375,height:667,isMobile:!0,hasTouch:!0}},{name:"Ipad - 768x1024",value:{width:768,height:1024,isMobile:!0,hasTouch:!0}},{name:"Galaxy S5 - 360x640",value:{width:360,height:640,isMobile:!0,hasTouch:!0}}],Ee=we.map((function(e){var t=e.value,a=Object(C.a)(e,["value"]);return Object(S.a)({},a,{value:JSON.stringify(t)})})),ve=function(e){var t=JSON.stringify(e),a=Ee.findIndex((function(e){return e.value===t}));if(-1!==a)return Ee[a].name;var n=e.width,r=e.height,l=e.isMobile;return"".concat(n,"x").concat(r).concat(l&&" mobile")},be=a(37),ye=a.n(be),je=a(81),ke=a(25),Ie=function(e,t,a,n){return Object(P.a)(O.a.mark((function r(){var l;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(void 0),n(!0),r.next=5,e();case 5:l=r.sent,t(l),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),a(r.t0);case 12:n(!1);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))},Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,n=r.a.useState(a),l=Object(ke.a)(n,2),o=l[0],i=l[1],c=r.a.useState(),s=Object(ke.a)(c,2),u=s[0],m=s[1],p=r.a.useState(!1),d=Object(ke.a)(p,2),f=d[0],h=d[1],g=Ie(e,i,m,h);return r.a.useEffect((function(){g()}),t),{loading:f,result:o,call:g,error:u,setResult:i}},xe=function(e){var t=e.storageType,a=e.loadProjects,n=(e.defaultValue,Te((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","loadRepos",t)}(t)})).result),l=Te((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getRepo",t)}(t)})).result;return n?r.a.createElement(ye.a,{showSearch:!0,defaultValue:l,onChange:function(e){(new je.a).set("githubRepo",e,{path:"/"}),a&&a()},style:{width:200},placeholder:"repository"},n.map((function(e){return r.a.createElement(ye.a.Option,{key:e,value:e},e)}))):null},Oe=r.a.createContext({open:!1,toggle:function(){},setOpen:function(){},setContent:function(){}});var Se,Ce=function(){return r.a.useContext(Oe)},Pe=function(e){var t=Ce().setContent;r.a.useEffect((function(){t(e)}),[])},Re=function(){var e=Object(P.a)(O.a.mark((function e(t,a,n){var r,l,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.name,l=n.viewport,o=Object(C.a)(n,["name","viewport"]),e.prev=1,e.next=4,ne(t,Object(S.a)({},o,{viewport:JSON.parse(l)}),r,void 0);case 4:a.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),J.a.error({message:"Something went wrong!",description:e.t0.toString()});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Ae=function(e,t,a){return function(n){n.preventDefault(),a((function(a,n){a||Re(e,t,n)}))}},Fe=_.a.create({name:"start_crawler"})((function(e){var t=e.history,a=e.match.params.storageType,n=e.form,l=n.getFieldDecorator,o=n.validateFields,i=n.getFieldValue,c=Te((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getBrowsers",t)}(a)})).result;return Pe(Le),r.a.createElement(_.a,{onSubmit:Ae(a,t,o)},r.a.createElement(_.a.Item,null,l("name",{rules:[{required:!0,message:"Please give a name to the project."}]})(r.a.createElement(A.a,{addonBefore:"Name",placeholder:"Project name"}))),r.a.createElement(_.a.Item,null,l("url",{rules:[{required:!0,message:"Please input an URL to crawl."}]})(r.a.createElement(A.a,{placeholder:"https://domain.com/",addonBefore:"URL"}))),r.a.createElement("div",null,r.a.createElement(_.a.Item,{label:"Browser",className:"item-inline"},l("browser",{initialValue:v.ChromePuppeteer,rules:[{required:!0,message:"Please select a browser."}]})(r.a.createElement(ye.a,null,null===c||void 0===c?void 0:c.map((function(e){return r.a.createElement(ye.a.Option,{key:e,value:e},e)}))))),r.a.createElement(_.a.Item,{label:"Viewport",className:"item-inline"},l("viewport",{initialValue:JSON.stringify(we[0].value),rules:[{required:!0,message:"Please select viewport."}]})(r.a.createElement(ye.a,null,Ee.map((function(e){var t=e.value,a=e.name;return r.a.createElement(ye.a.Option,{key:t,value:t},a)})))))),r.a.createElement("div",null,r.a.createElement(_.a.Item,{label:"Method",className:"item-inline"},l("method",{initialValue:"spiderbot",rules:[{required:!0}]})(r.a.createElement(W.a.Group,{size:"small"},r.a.createElement(W.a.Button,{value:"spiderbot"},r.a.createElement(M.a,{type:"radar-chart"})," Spider bot"),r.a.createElement(W.a.Button,{value:"urls"},r.a.createElement(M.a,{type:"ordered-list"})," URLs list")))),"spiderbot"===i("method")&&r.a.createElement(_.a.Item,{label:"Limit",className:"item-inline"},l("limit")(r.a.createElement(L.a,{min:0,size:"small"})),"\xa0",r.a.createElement(N.a,{content:r.a.createElement("div",null,r.a.createElement("b",null,"Limit the number of sibling pages. "),"For example, with the urls:",r.a.createElement("ul",null,r.a.createElement("li",null,"/item/1"),r.a.createElement("li",null,"/item/2"),r.a.createElement("li",null,"/item/3"),r.a.createElement("li",null,"/item/4"))," using the limit ",r.a.createElement("b",null,"2")," will only crawl ",r.a.createElement("b",null,"/item/1")," and ",r.a.createElement("b",null,"/item/2"),".",r.a.createElement("br",null),r.a.createElement("br",null),"Use ",r.a.createElement("b",null,"0")," to skip the limit."),trigger:"click",overlayStyle:{width:200}},r.a.createElement(M.a,{type:"question-circle"}))),r.a.createElement(ge,null,r.a.createElement(m.a.Paragraph,{ellipsis:{rows:1,expandable:!0}},r.a.createElement("b",null,"Spider bot")," crawling method will get all the links inside the page of the given URL and crawl the children. It will then continue do the same with the children till no new link is found. Be careful if you have big website, this is most likely not the right solution for you."),r.a.createElement(m.a.Paragraph,{ellipsis:{rows:1,expandable:!0}},r.a.createElement("b",null,"URLs list")," crawling method will crawl a specific sets of URLs. In the URL input field you must provide an endpoint containing a list of URLs (a simple text format, with one URL per line). The crawler will crawl each of those URL only and will not try to find links in the page. To use a static list of URLs, you can use a tool like ",r.a.createElement("a",{href:"https://pastebin.com",target:"_blank",rel:"noopener noreferrer"},"https://pastebin.com"),"."))),r.a.createElement(_.a.Item,null,l("autopin",{valuePropName:"checked"})(r.a.createElement(U.a,null,"Automatically pin new page founds."))),r.a.createElement(_.a.Item,null,r.a.createElement(xe,{storageType:a})),r.a.createElement(_.a.Item,null,r.a.createElement(Y.a,{type:"primary",icon:"plus",htmlType:"submit"},"Create")))})),Le=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"First of all, you need to give a name to your project. Then, you need to provide the URL depending of the crawling method you will be using. If you are using the ",r.a.createElement("b",null,"Spider bot")," method, you should give the URL of the website you want to crawl. If you are using the ",r.a.createElement("b",null,"URLs list")," method, you should give the URL of the endpoint containing the list of URLs."),r.a.createElement("p",null,"There is different kind of browser: ",r.a.createElement("a",{href:"https://github.com/puppeteer/puppeteer",target:"_blank",rel:"noopener noreferrer"},"chrome-puppeteer"),", ",r.a.createElement("a",{href:"https://github.com/SeleniumHQ/selenium",target:"_blank",rel:"noopener noreferrer"},"firefox-selenium"),"... Depending of the browser you will select, different tool will be available in the code injection. Also some browser are only available depending of the OS where is test-crawler hosted."),r.a.createElement(ge,null,r.a.createElement("p",null,"IE and Safari are in experimentation, might not be stable.")),r.a.createElement("p",null,"Running your test in safari work only on macOS. Safari doesn't support multiple instance in parallel, therefor crawling might be very slow. Locally, you will need to activate safari webdriver for selenium with the following commands:"),r.a.createElement("pre",null,r.a.createElement("code",null,"sudo safaridriver --enable safaridriver -p 0 &")),r.a.createElement("p",null,"Internet explorer, is the browser giving the most problem till now. Setting viewport has no effect, fullpage screenshot doesn't work, Spider Bot crawling will most likely fail."),r.a.createElement("p",null,"There is multiple viewports (screen size) available. If you want to test multiple viewports for the same website, you will have to create one project per viewport."),r.a.createElement("p",null,"Finally, you can specify if you want to automatically pin the new pages founds. Pins are the references screenshot to make the comparison with. While crawling, the crawler is comparing page to pin. If you are not sure, the auto-pin can be activate/deactivate afterwards."),r.a.createElement(m.a.Title,{level:4},"Spider bot"),r.a.createElement("p",null,r.a.createElement("b",null,"Spider bot")," crawling method will get all the links inside the page of the given URL and crawl the children. It will then continue do the same with the children till no new link is found. Be careful if you have big website, this is most likely not the right solution for you."),r.a.createElement(m.a.Title,{level:4},"URLs list"),r.a.createElement("p",null,r.a.createElement("b",null,"URLs list")," crawling method will crawl a specific sets of URLs. In the URL input field you must provide an endpoint containing a list of URLs (a simple text format, with one URL per line). The crawler will crawl each of those URL only and will not try to find links in the page. To use a static list of URLs, you can use a tool like ",r.a.createElement("a",{href:"https://pastebin.com",target:"_blank",rel:"noopener noreferrer"},"https://pastebin.com"),"."))};!function(e){e.Local="local",e.GitHub="github"}(Se||(Se={}));var ze,Ue=a(31),Be=a.n(Ue),_e=function(e){var t=Te((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","loadProjects",t)}(e)})),a=t.result,n=t.error;return{projects:a,loading:t.loading,error:n,call:t.call}},De=a(29),Me=a.n(De);!function(e){e.missingGitHubConfig="cannot use GitHub if no config provided"}(ze||(ze={}));var He,Ne,Ge,We=function(e){return function(t){t.preventDefault(),e((function(e,t){var a,n;e||((new je.a).set("github",t,{path:"/"}),null===(a=window)||void 0===a||null===(n=a.location)||void 0===n||n.reload())}))}},qe=_.a.create({name:"github_auth"})((function(e){var t=e.form,a=t.getFieldDecorator,n=t.validateFields;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a.Title,{level:4},"GitHub"),r.a.createElement(ge,null,r.a.createElement(m.a.Paragraph,null,"To save data in your GitHub repository, we need to provide a ",r.a.createElement("a",{href:"https://developer.github.com/v3/auth/#via-oauth-and-personal-access-tokens",target:"_blank",rel:"noopener noreferrer"},"personal access tokens")," to the ",r.a.createElement("a",{href:"https://developer.github.com/v3/",target:"_blank",rel:"noopener noreferrer"},"GitHub API"),". Note, the personal access tokens is a sensible information. Use this app, only on a trustable device. To ",r.a.createElement("a",{href:"https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line",target:"_blank",rel:"noopener noreferrer"},"create a token"),", go in developer settings, personal access tokens and then generate new token. In most of the case you will only need to give permission for ",r.a.createElement(m.a.Text,{code:!0},"public_repo"),".")),r.a.createElement(_.a,{onSubmit:We(n)},r.a.createElement(_.a.Item,null,a("user",{rules:[{required:!0,message:"Please provide your GitHub username."}]})(r.a.createElement(A.a,{addonBefore:"Username",placeholder:"Github username"}))),r.a.createElement(_.a.Item,null,a("token",{rules:[{required:!0,message:"Please provide your personal access tokens."}]})(r.a.createElement(A.a.Password,{addonBefore:"Token",placeholder:"Personal access tokens"}))),r.a.createElement(_.a.Item,null,r.a.createElement(Y.a,{type:"primary",icon:"github",htmlType:"submit"},"OK"))))})),Je=a(624),Ve=function(e){var t=e.storageType,a=Te((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getInfo",t)}(t)})).result;return a?r.a.createElement(ge,null,r.a.createElement(m.a.Paragraph,null,a)):null},Ye=function(e){var t=e.title,a=e.storageType,n=_e(a),l=n.projects,o=n.loading,i=n.error,c=n.call,s=function(e){if(e){if(e===ze.missingGitHubConfig||(null===e||void 0===e?void 0:e.message)===ze.missingGitHubConfig)return qe;Je.a.warning({message:"Something went wrong.",description:e.toString()})}}(i);return s?r.a.createElement(s,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a.Title,{level:4},t," ",r.a.createElement(xe,{storageType:a,loadProjects:c})),r.a.createElement(Ve,{storageType:a}),o?r.a.createElement(Me.a,null):r.a.createElement(Be.a,{itemLayout:"horizontal",bordered:!0,dataSource:l,renderItem:function(e){var t=e.id,n=e.name,l=e.crawlerInput.url;return r.a.createElement(Be.a.Item,{actions:[r.a.createElement(f.b,{to:X(a,t)},"Open")]},r.a.createElement(Be.a.Item.Meta,{title:r.a.createElement(f.b,{to:X(a,t)},n," ",r.a.createElement(M.a,{type:a})),description:l}))}}))},Ze=function(){return Pe($e),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a.Title,{level:3},"Projects"),Object.keys(Se).map((function(e){return r.a.createElement("div",{key:e},r.a.createElement(Ye,{title:e,storageType:Se[e]}),r.a.createElement("br",null),r.a.createElement(f.b,{to:Z(Se[e])},r.a.createElement(Y.a,{icon:"plus",size:"small"},"New")),r.a.createElement("br",null),r.a.createElement("br",null))})))},$e=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Test-crawler is project based. To be able to start a crawler, you will first need to create a project by clicking on ",r.a.createElement(Y.a,{icon:"plus",size:"small"},"New")),r.a.createElement("p",null,"Depending on how test-crawler is hosted, there will be different type of storage availble: local, GitHub, and more coming soon... If you are running it, yourself, all the storage should be available."),r.a.createElement(m.a.Title,{level:4},"Local"),r.a.createElement("p",null,"The ",r.a.createElement("b",null,"local")," storage consist to save the data on the server where is hosted test-crawler. This is the best option to keep your tests private and safe."),r.a.createElement(m.a.Title,{level:4},"GitHub"),r.a.createElement("p",null,"The ",r.a.createElement("b",null,"GitHub")," storage consist to save the data on a given repository. This option is good for public project, especially for open source project that are already on GitHub. It will give you the possibility to keep history of your tests in relation to your code changes. Also this storage is using GitHub CI workflow to generate your test, you can therefor integrate it very well with your other workflow."),r.a.createElement("p",null,"To use ",r.a.createElement("b",null,"GitHub")," storage, we need to provide a user and a ",r.a.createElement("a",{href:"https://developer.github.com/v3/auth/#via-oauth-and-personal-access-tokens",target:"_blank",rel:"noopener noreferrer"},"personal access tokens")," to the ",r.a.createElement("a",{href:"https://developer.github.com/v3/",target:"_blank",rel:"noopener noreferrer"},"GitHub API"),". Note, the personal access tokens is a sensible information. Use this app, only on a trustable device. To ",r.a.createElement("a",{href:"https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line",target:"_blank",rel:"noopener noreferrer"},"create a token"),", go in developer settings, personal access tokens and then generate new token. In most of the case you will only need to give permission for ",r.a.createElement(m.a.Text,{code:!0},"public_repo"),"."),r.a.createElement(ge,null,r.a.createElement(m.a.Paragraph,null,"Note: we are not saving any of your credential on a server. Everything is save in your cookies. Also the ",r.a.createElement("a",{href:"https://apiel.github.io/test-crawler/live/"},"live version")," hosted on GitHub page is purely static. All the logic is running in your browser.")),r.a.createElement("p",null,"Once your credential provided, you will need to select the repository where you want to save your tests. In general, it would make sense to save those tests in the same repository as the website you are testing. You can switch from one repository to the other at anytime."))},Qe=a(132),Ke=a.n(Qe),Xe=a(129),et=a.n(Xe),tt={textAlign:"center"},at=300,nt={width:at+20,marginBottom:10},rt={paddingTop:10,paddingBottom:10},lt={gutter:10,fitWidth:!0},ot=a(130),it=a.n(ot),ct=function(e){var t=e.message,a=void 0===t?"Something went wrong":t,n=e.description;return r.a.createElement(it.a,{message:a,description:n,type:"warning",showIcon:!0})},st=a(271),ut=a.n(st),mt=a(177),pt=a.n(mt),dt={width:nt.width,marginRight:lt.gutter},ft=function(e,t,a){return function(n){t&&(n.length?(clearTimeout(He),He=setTimeout((function(){wt(e,ht(t,n),a)}),500)):wt(e,t,a))}},ht=function(e,t){return new ut.a(e,{keys:["url","viewport.width","viewport.height","keywords"]}).search(t)},gt=function(e,t,a){return function(n){t&&(a(n),wt(e,t,n))}},wt=function(e,t,a){if(t)if(a.length){var n=a.filter((function(e){return!Object.keys(Et).includes(e)})).join(" ");n&&(t=ht(t,n)),e(t.filter((function(e){var t=!0;if(a.includes("with-diff")){var n=pt()(e,"png.diff.pixelDiffRatio");t=t&&n>0}return a.includes("new")&&(t=t&&!!e.png&&!e.png.diff),t})))}else e(t)},Et={"with-diff":"with diff",new:"new"},vt=ye.a.Option,bt=function(e){var t=e.children,a=e.response,n=e.withFilters,l=r.a.useState(),o=Object(ke.a)(l,2),i=o[0],c=o[1],s=r.a.useState([]),u=Object(ke.a)(s,2),m=u[0],p=u[1],d=r.a.useState(),f=Object(ke.a)(d,2),h=f[0],g=f[1];return r.a.useEffect((function(){c(a),gt(g,a,p)(m)}),[a,p,m]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{mode:"tags",onChange:gt(g,i,p),tokenSeparators:[","],style:dt,placeholder:"Search",filterOption:!1,onSearch:ft(g,i,m)},!!n&&Object.keys(n).map((function(e){return r.a.createElement(vt,{key:e},n[e])}))),t(h))},yt=a(273),jt=a.n(yt),kt=a(79),It=function(e){return Object(kt.unix)(parseInt(e,10)).calendar()},Tt=a(281),xt=a(272),Ot=a(27),St=a.n(Ot),Ct={marginLeft:5,marginRight:5},Pt=function(e,t){var a=t.timestamp,n=t.id,r=t.index,l=t.projectId,o=t.setPages,i=t.storageType;return(Object(P.a)(O.a.mark((function t(){var c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ue(i,l,a,n,r,e);case 3:c=t.sent,o(c),St.a.success("Page pinned as reference for comparison.",2),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),J.a.error({message:"Something went wrong!",description:t.t0.toString()});case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))))},Rt=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{style:Ct,icon:"check",size:"small",onClick:Pt(E.valid,e)},"Valid"),r.a.createElement(Y.a,{style:Ct,icon:"pushpin",size:"small",onClick:Pt(E.zonePin,e)},"Always valid"),r.a.createElement(Y.a,{style:Ct,icon:"warning",size:"small",type:"danger",onClick:Pt(E.report,e)},"Report"))},At=function(e){return e===E.valid||e===E.zonePin?"#0F0":e===E.report?"red":"yellow"},Ft=function(e,t,a,n,r,l,o){var i=e.xMin,c=e.yMin,s=c/t-1,u=i/t-1;return{width:(e.xMax-i)/t+2,height:(e.yMax-c)/t+2,top:s,left:u+n,border:"1px solid ".concat(At(o)),position:"absolute",backgroundImage:l?'url("'.concat(r,'")'):"none",backgroundPosition:"".concat(-(u+1),"px ").concat(-(s+1),"px"),backgroundSize:a}},Lt=function(e){var t=e.storageType,a=e.thumb,l=e.setPages,o=e.projectId,i=e.timestamp,c=e.id,s=e.index,u=e.originalWidth,m=e.zone,p=e.status,d=e.width,f=e.marginLeft,h=Object(n.useState)(!1),g=Object(ke.a)(h,2),w=g[0],E=g[1],v=u/d;return r.a.createElement(N.a,{key:"".concat(c,"-").concat(s),content:r.a.createElement(Rt,{storageType:t,index:s,timestamp:i,id:c,projectId:o,setPages:l}),trigger:"click"},r.a.createElement("div",{style:Ft(m,v,d,f,a,w,p),onMouseOver:function(){return E(!0)},onMouseOut:function(){return E(!1)}}))},zt=function(e){var t=e.zones;return r.a.createElement("p",null,r.a.createElement("b",null,"Zone:"),"\xa0",[[E.diff],[E.valid,E.zonePin],[E.report]].map((function(e){var a=Object(xt.a)(e),n=a[0],l=a.slice(1);return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement("span",{style:{marginLeft:10,color:At(n)}},"\u25a0")," ",r.a.createElement("b",null,function(e,t){return e.filter((function(e){var a=e.status;return t.includes(a)})).length}(t,[n].concat(Object(Tt.a)(l))))," ",n)})))},Ut=function(e){var t=e.diff;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement(M.a,{type:"picture",theme:"outlined"}),"\xa0 Pixel diff ratio: ",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e)return e;var a=t-1-Math.floor(Math.log(e)/Math.log(10));return e.toFixed(a)}(t.pixelDiffRatio)),t.zones&&t.zones.length>0&&r.a.createElement(zt,{zones:t.zones}))},Bt=function(e){var t=e.diff;return t?r.a.createElement(Ut,{diff:t}):r.a.createElement("div",null,r.a.createElement(M.a,{type:"picture",theme:"outlined"}),"\xa0 New screenshot ",r.a.createElement(jt.a,{color:"green"},"New"))},_t=new(a(570))({fg:"#333"}),Dt={marginBottom:10},Mt=function(e){var t=e.pageError,a=e.url,n=e.png;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(it.a,{message:r.a.createElement("div",{dangerouslySetInnerHTML:{__html:_t.toHtml(t)}}),type:"warning",style:Dt}),r.a.createElement("p",null,r.a.createElement(M.a,{type:"link"})," ",r.a.createElement("a",{href:a},a)),n?r.a.createElement(Bt,{diff:n.diff}):r.a.createElement("p",null,r.a.createElement(M.a,{type:"picture",theme:"outlined"})," No screenshot available"))},Ht=function(e){var t=e.timestamp,a=e.id,n=e.status,r=e.projectId,l=e.setPages,o=e.storageType;return(Object(P.a)(O.a.mark((function e(){var i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me(o,r,t.toString(),a,n);case 3:i=e.sent,l(i),St.a.success('All zone are set to "'.concat(n,'".'),2),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),J.a.error({message:"Something went wrong!",description:e.t0.toString()});case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))))},Nt=function(e){var t=e.status,a=e.type;return r.a.createElement(M.a,{type:a,title:'Set all zone to "'.concat(t,'".'),onClick:Ht(e)})},Gt=function(e){var t=e.storageType,a=e.projectId,n=e.timestamp,r=e.id;return(Object(P.a)(O.a.mark((function e(){var l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l=St.a.loading("Pin in progress..",0),e.next=4,se(t,a,n.toString(),r);case 4:l(),St.a.success("Page pinned as reference for comparison.",2),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),J.a.error({message:"Something went wrong!",description:e.t0.toString()});case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))))},Wt=function(e){return function(e){return r.a.createElement(M.a,{type:"pushpin",title:"pin as reference for comparison",onClick:Gt(e)})}(e)},qt=a(274),Jt=a.n(qt),Vt=function(e){var t=e.storageType,a=e.projectId,l=e.timestamp,o=e.id,i=e.onImg,c=void 0===i?function(){}:i,s=e.width,u=void 0===s?at:s,m=e.children,p=Object(n.useState)(),d=Object(ke.a)(p,2),f=d[0],h=d[1],g=function(){var e=Object(P.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h,e.next=3,ie(t,a,l,o,u);case 3:e.t1=e.sent,(0,e.t0)(e.t1),c();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){g()}),[]),f?r.a.createElement("div",{style:tt},m,r.a.createElement("img",{style:{width:u},alt:"",src:f})):null},Yt=function(e){var t=e.storageType,a=e.projectId,n=e.timestamp,l=e.id,o=e.zones,c=e.originalWidth,s=void 0===c?0:c,u=e.width,m=void 0===u?at:u,p=e.setPages,d=e.marginLeft,f=Object(C.a)(e,["storageType","projectId","timestamp","id","zones","originalWidth","width","setPages","marginLeft"]),h=Object(i.b)(ie,t,a,"pin",l,m),g=h.call,w=h.response,E=h.cache;return r.a.useEffect((function(){o&&!E()&&g()}),[o]),r.a.createElement(Vt,Object.assign({storageType:t,projectId:a,timestamp:n,id:l,width:m},f),null===o||void 0===o?void 0:o.map((function(e,o){var i=e.zone,c=e.status;return r.a.createElement(Lt,{storageType:t,thumb:w,projectId:a,timestamp:n,id:l,width:m,index:o,originalWidth:s,marginLeft:d,status:c,zone:i,key:"zone-".concat(l,"-").concat(o),setPages:p})})))},Zt=function(e){return function(){e(!0)}},$t=function(e){return function(){e(!1)}},Qt=function(e){var t=e.storageType,a=e.setPages,n=e.projectId,l=e.timestamp,o=e.id,i=e.png,c=e.url,s=e.pageError,u=r.a.useState(!1),m=Object(ke.a)(u,2),p=m[0],d=m[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Jt.a,{title:"",visible:p,onCancel:$t(d),footer:null,width:i.width+40},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(Yt,{storageType:t,setPages:a,projectId:n,timestamp:l,id:o,zones:i.diff&&i.diff.zones,originalWidth:i.width,width:i.width,marginLeft:0}),r.a.createElement(Mt,{url:c,pageError:s,png:i}))),r.a.createElement(M.a,{type:"fullscreen",title:"fullscreen",onClick:Zt(d)}))},Kt=function(e){var t=e.storageType,a=e.setPages,n=e.projectId,l=e.timestamp,o=e.id,i=e.png,c=e.url,s=e.pageError;return[i&&r.a.createElement(Qt,{storageType:t,setPages:a,projectId:n,png:i,id:o,timestamp:l,url:c,pageError:s})].concat([r.a.createElement(Nt,{storageType:t,type:"check",setPages:a,projectId:n,timestamp:l,id:o,status:E.valid}),r.a.createElement(Nt,{storageType:t,type:"warning",setPages:a,projectId:n,timestamp:l,id:o,status:E.report}),r.a.createElement(Wt,{storageType:t,projectId:n,timestamp:l,id:o})])},Xt=function(e){return Ne=e},ea=function(){Ne&&Ne.layout(),clearTimeout(Ge),Ge=setTimeout((function(){Ne&&Ne.layout()}),500)},ta=function(e){var t=e.projectId,a=e.timestamp,n=e.lastUpdate,l=e.storageType,o=Te((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getPages",t)}(l,t,a)}),[n]),i=o.result,c=o.error,s=o.setResult;return c?r.a.createElement(ct,{description:c.toString()}):r.a.createElement(bt,{response:i,withFilters:Et},(function(e){return e?r.a.createElement(et.a,{style:rt,options:lt,ref:function(e){Xt(e&&e.masonry)}},e.map((function(e){var n=e.id,o=e.url,i=e.png,c=e.error;return r.a.createElement(Ke.a,{key:n,style:nt,cover:i&&r.a.createElement(Yt,{storageType:l,projectId:t,timestamp:a,id:n,zones:i.diff&&i.diff.zones,originalWidth:i.width,onImg:ea,setPages:s,marginLeft:10}),actions:Kt({storageType:l,setPages:s,projectId:t,id:n,timestamp:a,png:i,url:o,pageError:c})},r.a.createElement(Mt,{url:o,pageError:c,png:i}))}))):r.a.createElement(Me.a,null)}))},aa=a(133),na=a.n(aa),ra=(a(592),a(276)),la=a.n(ra),oa=function(e,t,a,n){return function(){var r=Object(P.a)(O.a.mark((function r(l){var o,i;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o=l?"done":"review",r.next=4,pe(e,t,a,o);case 4:i=r.sent,n(i),St.a.success('Status set to "'.concat(o,'".'),2),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),J.a.error({message:"Something went wrong!",description:r.t0.toString()});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},ia=function(e){var t=e.storageType,a=e.timestamp,n=e.status,l=e.projectId,o=e.setCrawler;return r.a.createElement(la.a,{checkedChildren:"done",unCheckedChildren:"review",checked:"done"===n,onChange:oa(t,l,a,o)})},ca=function(e,t){var a=Object(i.b)(ae,e,t),n=a.call,l=a.response,o=a.update,c=a.error,s=a.cache;return r.a.useEffect((function(){s()||n()}),[e,t,s,n]),c&&J.a.warning({message:"Something went wrong while loading project.",description:c.toString()}),{project:l,setProject:o}},sa=function(e){var t=e.projectId,a=e.storageType,n=ca(a,t).project;return n?r.a.createElement("p",null,r.a.createElement("b",null,"Project:")," ",r.a.createElement(f.b,{to:X(a,n.id)},n.name)):null},ua=m.a.Title,ma={color:"#faad29"},pa={color:"#999",fontSize:11},da=function(e){var t=e.crawler,a=t.timestamp,n=t.url,l=t.browser,o=t.diffZoneCount,i=t.errorCount,c=t.status,s=t.urlsCount,u=t.inQueue,m=t.startAt,p=t.lastUpdate,d=t.limit,f=t.viewport,h=e.projectId,g=e.storageType,w=e.setCrawler,E=s+u,b=Math.floor(s/E*100),y=ve(f);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ua,{level:3},It(a)),(o>0||i>0)&&r.a.createElement("p",null,r.a.createElement(ia,{storageType:g,setCrawler:w,projectId:h,status:c,timestamp:a})),r.a.createElement(sa,{projectId:h,storageType:g}),r.a.createElement("p",null,r.a.createElement("b",null,"URL:")," ",n),r.a.createElement("p",null,r.a.createElement("b",null,"Browser:")," ",l||v.ChromePuppeteer),r.a.createElement("p",null,r.a.createElement("b",null,"Screen:")," ",y),r.a.createElement("p",null,r.a.createElement("b",null,"URL crawled:")," ",s,void 0!==d&&d>0&&r.a.createElement("span",{style:pa}," (with limit set to ",d,")")),r.a.createElement("p",null,r.a.createElement("b",null,"Duration:")," ",Object(kt.duration)(p-m).format("h [hrs], m [min], s [sec]")),u>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(na.a,{percent:b}),r.a.createElement("p",null,r.a.createElement("b",null,"In queue:")," ",u)),i>0&&r.a.createElement("p",{style:ma},r.a.createElement(M.a,{type:"exclamation-circle"})," ",i," error(s) founds"))},fa=function(e){var t=e.match.params,a=t.timestamp,n=t.projectId,l=t.storageType;Pe();var o=Te((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getCrawler",t)}(l,n,a)})),i=o.result,c=o.error,s=o.setResult;if(r.a.useEffect((function(){var e=Object(ee.subscrib)(s);return function(){return Object(ee.unsubscrib)(e)}}),[i,s]),c)return r.a.createElement(ct,{description:c.toString()});var u=null===i||void 0===i?void 0:i.lastUpdate;return i?r.a.createElement(r.a.Fragment,null,r.a.createElement(da,{crawler:i,projectId:n,storageType:l,setCrawler:s}),r.a.createElement(ta,{storageType:l,timestamp:a,lastUpdate:u,projectId:n})):r.a.createElement(Me.a,null)},ha=a(277),ga=a.n(ha),wa=function(e,t,a,n){return Object(P.a)(O.a.mark((function r(){var l,o;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l=St.a.loading("Delete in progress..",0),r.next=3,ce(e,t,a);case 3:o=r.sent,n(o),l();case 6:case"end":return r.stop()}}),r)})))},Ea=function(e){var t=e.storageType,a=e.projectId,n=e.timestamp,l=e.id,o=e.url,i=e.viewport,c=e.onImg,s=e.png,u=e.setPins;return r.a.createElement(Ke.a,{style:nt,cover:s&&r.a.createElement(Vt,{timestamp:n,id:l,onImg:c,projectId:a,storageType:t}),actions:[r.a.createElement(ga.a,{title:"Are you sure delete this pin?",onConfirm:wa(t,a,l,u),okText:"Yes",cancelText:"No"},r.a.createElement(M.a,{type:"delete",title:"Delete pin"})),r.a.createElement(f.b,{to:{pathname:Q(t,a,l),state:{pattern:o}}},r.a.createElement(M.a,{type:"code",title:"Insert code while crawling"}))]},r.a.createElement("p",null,r.a.createElement(M.a,{type:"link"})," ",r.a.createElement("a",{href:o},o)),!s&&r.a.createElement("p",null,r.a.createElement(M.a,{type:"picture",theme:"outlined"})," No screenshot available"),i&&r.a.createElement("p",null,r.a.createElement(M.a,{type:"picture",theme:"outlined"})," ",ve(i)))},va=m.a.Title,ba=function(e){var t=e.match.params,a=t.projectId,n=t.storageType;Pe();var l=Te((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getPins",t)}(n,a)})),o=l.result,i=l.error,c=l.setResult;return i?r.a.createElement(ct,{description:i.toString()}):r.a.createElement(r.a.Fragment,null,r.a.createElement(va,{level:3},"Pins"),r.a.createElement(sa,{projectId:a,storageType:n}),r.a.createElement(bt,{response:o},(function(e){return e?r.a.createElement(et.a,{style:rt,options:lt,ref:function(e){Xt(e&&e.masonry)}},e.map((function(e){var t=e.id,l=e.url,o=e.png,i=e.viewport,s=e.timestamp;return r.a.createElement(Ea,{projectId:a,timestamp:s,id:t,key:t,url:l,setPins:c,png:o,viewport:i,onImg:ea,storageType:n})}))):r.a.createElement(Me.a,null)})))},ya=a(134),ja=a.n(ya),ka=(a(261),a(262),m.a.Paragraph),Ia=m.a.Text,Ta=function(e){var t=e.full,a=void 0===t||t;return r.a.createElement(ge,null,r.a.createElement(ka,null,"Inject some code in the crawler while parsing the page. This code will be executed just after the page finish loaded, before to make the screenshot and before extracting the links. ",a&&r.a.createElement(r.a.Fragment,null,"You need to export a function that will take as first parameter the ",r.a.createElement(Ia,{code:!0},"page")," coming from Puppeteer.")),a&&r.a.createElement(ka,null,r.a.createElement(Ia,{code:!0},"module.exports = async (page) => ...some code")))},xa={border:"1px solid #EEE",marginBottom:15,width:"auto"},Oa=(Object(S.a)({},nt,{float:"left"}),{marginBottom:15}),Sa={marginRight:10},Ca={maxWidth:500,margin:"0px 0px 10px 0px"},Pa=a(278),Ra=a.n(Pa),Aa=a(43),Fa=a.n(Aa),La=m.a.Paragraph,za=function(){St.a.warn("To be implemented.",2)},Ua=function(){var e=Object(P.a)(O.a.mark((function e(t,a,n,r,l){var o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=St.a.loading("Saving in progress...",0),e.next=4,oe(t,a,Object(S.a)({id:n,source:r},l));case 4:o(),St.a.success("Code saved.",2),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),J.a.error({message:"Something went wrong!",description:e.t0.toString()});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n,r,l){return e.apply(this,arguments)}}(),Ba=function(e,t,a,n,r){return function(l){l.preventDefault(),r((function(r,l){r||Ua(e,t,a,n,l)}))}},_a=_.a.create({name:"code"})((function(e){var t,a=e.storageType,n=e.projectId,l=e.setSource,o=e.id,i=e.code,c=e.form,s=c.getFieldDecorator,u=c.validateFields,m=e.location.state;return r.a.createElement(_.a,{onSubmit:Ba(a,n,o,i.source,u)},r.a.createElement(_.a.Item,{style:Ca},s("name",{initialValue:i.name||""})(r.a.createElement(A.a,{addonBefore:"Name"}))),r.a.createElement(_.a.Item,{style:Ca},s("pattern",{rules:[{required:!0,message:"Please input a pattern!"}],initialValue:i.pattern||m&&m.pattern||""})(r.a.createElement(A.a,{addonBefore:"Pattern"}))),r.a.createElement(ge,null,r.a.createElement(La,null,"Pattern is using ",r.a.createElement("a",{href:"https://www.npmjs.com/package/minimatch",target:"_blank",rel:"noopener noreferrer"},"minimatch")," to match the urls to inject the code. It works by converting glob expressions into JavaScript RegExp objects.")),r.a.createElement("div",{style:Oa},r.a.createElement(Y.a,{icon:"save",htmlType:"submit",style:Sa},"Save"),r.a.createElement(Y.a,{icon:"caret-right",onClick:za,style:Sa},"Preview"),r.a.createElement(Ra.a,{overlay:(t=l,r.a.createElement(Fa.a,null,r.a.createElement(Fa.a.Item,{key:"1",onClick:function(){t('module.exports = async function run(page) {\n    await page.evaluate(() => {\n        const div = document.createElement("div");\n        div.innerHTML = "Test-crawler is awesome!";\n        document.body.insertBefore(div, document.body.firstChild);\n    });\n}')}},"Test-crawler is awesome"),r.a.createElement(Fa.a.Item,{key:"2",onClick:function(){t("module.exports = async function run(page) {\n    return await page.evaluate(() => {\n        Array.from(document.body.getElementsByTagName(\"a\"))\n             .filter(a => !a.href)\n             .forEach(a => a.click());\n        return Array.from(document.links).map(\n            link => link.href.replace('/?', '/iframe.html?')\n        );\n    });\n}")}},"Storybook"),r.a.createElement(Fa.a.Item,{key:"3",onClick:function(){t("// expect library from jest is installed by default\n// but you can use any assertion tool of your choice\n// just install it and use it here :D\nconst expect = require('expect');\n\nmodule.exports = async function run(page) {\n  await expect(page.title()).resolves.toMatch('React App');\n  expect('a').toBe('b'); // fail\n}")}},"Expect assetion example")))},r.a.createElement(Y.a,{style:Sa},"Code snippet ",r.a.createElement(M.a,{type:"down"})))))})),Da=m.a.Title,Ma=function(e,t){return function(a){t(Object(S.a)({},e,{source:a}))}},Ha=function(e){var t=e.match.params,a=t.id,n=t.projectId,l=t.storageType,o=e.location;Pe();var i=Te((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getCode",t)}(l,n,a)})),c=i.error,s=i.result,u=i.setResult;return c?r.a.createElement(ct,{description:c.toString()}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Da,{level:3},"Add some code"),s?r.a.createElement(_.a,null,r.a.createElement(Ta,null),r.a.createElement(sa,{projectId:n,storageType:l}),r.a.createElement(_a,{projectId:n,id:a,code:s,setSource:Ma(s,u),location:o,storageType:l}),r.a.createElement(ja.a,{mode:"javascript",theme:"tomorrow",onChange:Ma(s,u),fontSize:14,value:s.source.length?s.source:"module.exports = async function run(page) {\n// your code\n}",style:xa})):r.a.createElement(Me.a,null))},Na=m.a.Title,Ga=function(){var e=Object(P.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,te();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wa=function(){var e=r.a.useState(),t=Object(ke.a)(e,2),a=t[0],n=t[1];return r.a.useEffect((function(){Ga(n)}),[]),Pe(),r.a.createElement(r.a.Fragment,null,r.a.createElement(Na,{level:3},"Settings"),a?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Dir:")," ",a.dir)):r.a.createElement(Me.a,null),r.a.createElement("p",null,r.a.createElement(Y.a,{icon:"caret-right",size:"small",onClick:fe},"Start crawlers")))},qa=m.a.Title,Ja=m.a.Text,Va=function(e){var t=e.projectId,a=e.storageType,n=Te((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getCodes",t)}(a,t)})),l=n.error,o=n.result;return l?r.a.createElement(ct,{description:l.toString()}):r.a.createElement(r.a.Fragment,null,r.a.createElement(qa,{level:4},"For each page"),r.a.createElement(Ta,{full:!1}),o?r.a.createElement(Be.a,{bordered:!0,dataSource:Object.values(o),renderItem:function(e){var n=e.id,l=e.name,o=e.pattern;return r.a.createElement(Be.a.Item,{actions:[r.a.createElement(f.b,{to:Q(a,t,n)},"Edit")]},r.a.createElement(Be.a.Item.Meta,{title:r.a.createElement(f.b,{to:Q(a,t,n)},l," ",r.a.createElement(Ja,{code:!0},o))}))}}):r.a.createElement(Me.a,null),r.a.createElement("br",null),r.a.createElement(f.b,{to:Q(a,t,Math.floor(Date.now()/1e3).toString())},r.a.createElement(Y.a,{icon:"plus",size:"small"},"New code")))},Ya=m.a.Title,Za=m.a.Paragraph,$a=function(e,t,a,n){return Object(P.a)(O.a.mark((function r(){var l;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,l=St.a.loading("Saving...",0),r.next=4,le(n,a,t,e);case 4:l(),St.a.success("Code saved.",2),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),J.a.error({message:"Something went wrong!",description:r.t0.toString()});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))},Qa=function(e){var t=e.type,a=e.projectId,n=e.storageType,l=e.title,o=e.info,i=e.codeParam,c=void 0===i?"":i,s=Te((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getBeforeAfterCode",t)}(n,a,t)})),u=s.error,m=s.result,p=s.setResult;return u?r.a.createElement(ct,{description:u.toString()}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ya,{level:4},l),r.a.createElement(ge,null,r.a.createElement(Za,null,o)),r.a.createElement(ja.a,{mode:"javascript",theme:"tomorrow",onChange:p,fontSize:14,value:(null===m||void 0===m?void 0:m.length)?m:"module.exports = async function run(".concat(c,") {\n// your code\n}"),style:Object(S.a)({},xa,{height:200})}),r.a.createElement(Y.a,{icon:"save",size:"small",onClick:$a(m,t,a,n)},"Save"))},Ka=m.a.Title,Xa=function(e){var t=e.projectId,a=e.storageType;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ka,{level:3},"Codes"),r.a.createElement(Va,{projectId:t,storageType:a}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Qa,{type:b.Before,projectId:t,storageType:a,title:"Before all",info:"This script will run when the test-crawler is starting, to give you the possibility to setup a working environment, for example to start a test server."}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Qa,{type:b.After,projectId:t,storageType:a,title:"After all",info:"This script will run when the test-crawler finish. You could for example use this script to send some notification.",codeParam:"totalDiffCount, totalErrorCount"}))},en=function(e){var t=e.jobs,a=e.loadJobs,n=e.loadCrawlers,l=r.a.useState(!1),o=Object(ke.a)(l,2),i=o[0],c=o[1];return r.a.useEffect((function(){var e;return(null===t||void 0===t?void 0:t.length)?(!i&&c(!0),e=setInterval(a,3e4)):i&&(c(!1),n()),function(){return clearInterval(e)}}),[t,n,c,i]),(null===t||void 0===t?void 0:t.length)?r.a.createElement(Be.a,{itemLayout:"horizontal",bordered:!0,dataSource:t,style:{marginBottom:10},renderItem:function(e){var t=e.status,a=e.startAt,n=e.stepsCount,l=e.stepsDone,o=e.currentStep,i=e.url;return r.a.createElement(Be.a.Item,{actions:[r.a.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer"},"Open")]},r.a.createElement(Be.a.Item.Meta,{title:r.a.createElement("span",null,"CI job ",It(a.toString())),description:r.a.createElement(r.a.Fragment,null,!!n&&void 0!==l&&r.a.createElement(na.a,{percent:100/n*l,size:"small",format:function(){return"".concat(l," of ").concat(n)}}),r.a.createElement("span",null,r.a.createElement(m.a.Text,{code:!0},t)," ",o))}))}}):null},tn=function(e,t,a,n,l){return Object(P.a)(O.a.mark((function o(){var i,c,s,u;return O.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,i=St.a.loading("Starting crawlers",0),o.next=4,de(a,t,l);case 4:c=o.sent,s=c.timestamp,(u=c.redirect)?(setTimeout(n,5e3),setTimeout(n,1e4),J.a.open({duration:10,message:"Test-crawler started",description:"Test-crawler is running the crawlers on a remote container. To see live progress click open:",btn:r.a.createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer"},"Open")})):e.push(K(a,t,s)),i(),o.next=14;break;case 11:o.prev=11,o.t0=o.catch(0),J.a.error({message:"Something went wrong!",description:o.t0.toString()});case 14:case"end":return o.stop()}}),o,null,[[0,11]])})))},an=function(e,t,a){var n=t.name,r=t.id,l=t.crawlerInput;return(function(){var t=Object(P.a)(O.a.mark((function t(o){var i,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=o.target.checked,t.next=3,ne(e,Object(S.a)({},l,{autopin:i}),n,r);case 3:c=t.sent,a(c);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},nn=function(e,t,a,n){return n>0?"loading":e||0!==t?"done"===a?"issues-close":"exclamation-circle":"check"},rn=function(e){var t,a=e.match.params,n=a.projectId,l=a.storageType,o=e.history;Pe(ln);var i=ca(l,n),c=i.project,s=i.setProject,u=function(e,t){var a=Te(Object(P.a)(O.a.mark((function a(){var n;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,re(e,t);case 2:return n=a.sent,a.abrupt("return",n.sort((function(e,t){var a=e.timestamp,n=t.timestamp;return parseInt(n,10)-parseInt(a,10)})));case 4:case"end":return a.stop()}}),a)})))),n=a.result,r=a.setResult,l=a.error,o=a.loading,i=a.call;return l&&J.a.warning({message:"Something went wrong while loading crawlers from project.",description:l.toString()}),{crawlers:n,setCrawlers:r,loading:o,loadCrawlers:i}}(l,n),p=u.crawlers,d=u.loading,h=u.loadCrawlers,g=Te((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(ee.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getJobs",t)}(l,n)})),w=g.result,E=g.call,b=(null===c||void 0===c?void 0:null===(t=c.crawlerInput)||void 0===t?void 0:t.browser)||v.ChromePuppeteer;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a.Title,{level:3},"Project"),c?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Name:")," ",c.name),r.a.createElement("p",null,r.a.createElement("b",null,"ID:")," ",n),r.a.createElement("p",null,r.a.createElement("b",null,"URL:")," ",c.crawlerInput.url),r.a.createElement("p",null,r.a.createElement("b",null,"Browser:")," ",b),r.a.createElement("p",null,r.a.createElement("b",null,"Screen:")," ",ve(c.crawlerInput.viewport)),r.a.createElement("p",null,r.a.createElement("b",null,"Method:"),"urls"===c.crawlerInput.method?r.a.createElement(r.a.Fragment,null," ",r.a.createElement(M.a,{type:"ordered-list"})," URLs list"):r.a.createElement(r.a.Fragment,null," ",r.a.createElement(M.a,{type:"radar-chart"})," Spider bot",!!c.crawlerInput.limit&&r.a.createElement("span",{style:{color:"#999",fontSize:12}}," (Limit: ",c.crawlerInput.limit,")"))),r.a.createElement("p",null,r.a.createElement(U.a,{checked:c.crawlerInput.autopin,onChange:an(l,c,s)},"Automatically pin new page founds.")),r.a.createElement("p",null,r.a.createElement(Y.a,{icon:"caret-right",size:"small",onClick:tn(o,n,l,E,b)},"Run")," \xa0",r.a.createElement(f.b,{to:$(l,n)},r.a.createElement(Y.a,{icon:"pushpin",size:"small"},"Pins"))),r.a.createElement(en,{jobs:w,loadJobs:E,loadCrawlers:h}),r.a.createElement(Be.a,{itemLayout:"horizontal",bordered:!0,loading:d,dataSource:p,renderItem:function(e){var t=e.timestamp,a=e.diffZoneCount,o=e.errorCount,i=e.status,c=e.inQueue;return r.a.createElement(Be.a.Item,{actions:[r.a.createElement(f.b,{to:K(l,n,t)},"Open")]},r.a.createElement(Be.a.Item.Meta,{title:r.a.createElement(f.b,{to:K(l,n,t)},It(t)),description:r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{type:nn(a,o,i,c)}),r.a.createElement("span",null," Diff: ",a," - Error: ",o," - In queue: ",c))}))}})):r.a.createElement(Me.a,null),r.a.createElement("br",null),r.a.createElement(Xa,{projectId:n,storageType:l}))},ln=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"This page give you an overview of a selected project. From there you can see all the crawlers that has been started and their results. To run a crawler click on ",r.a.createElement(Y.a,{icon:"caret-right",size:"small"},"Run")),r.a.createElement("p",null,"After clicking on the run button, you will be either redirected to the result page or a job will appear above the list of crawler, this will depends of the crawling storage you will use."),r.a.createElement(m.a.Title,{level:4},"Codes"),r.a.createElement("p",null,"Under the list of crawlers, is a codes section. This will let you write your own code to interact with the crawler when the job is running. There is different phases where you can interact with the crawler: before, during and after crawling."),r.a.createElement("p",null,r.a.createElement("b",null,"Before all")),r.a.createElement("p",null,"This script will run when the test-crawler is starting, to give you the possibility to setup a working environment. This can be useful if you need to start a server to run your test against it."),r.a.createElement("p",null,r.a.createElement("b",null,"For each page")),r.a.createElement("p",null,"This give you the possibility to inject some code in the crawler while parsing the page. This code will be executed just after the page finish loaded, before to make the screenshot and before extracting the links. This can be really useful to manipulate the page before making the screenshot. For example, if you have dynamic element in your page, you can simply remove it. You could open some hidden element from an accordion. Run some e2e assertion with Jest. There is so much possibility with this feature..."),r.a.createElement("p",null,r.a.createElement("b",null,"After all")),r.a.createElement("p",null,"This script will run when the test-crawler finish. This can be useful to send the result to an API or in an email. In the following example, we will show you how to send result in slack:"),r.a.createElement("pre",null,r.a.createElement("code",null,"\n// Need to install @slack/web-api where the crawler is running.\n// with local storage just do yarn add @slack/web-api\n// with remote storage like GitHub you will need to customize the CI job\nconst { WebClient } = require('@slack/web-api');\n\nconst token = 'api_slack_token';\n// Given some known conversation ID (representing a public channel, private channel, DM or group DM)\nconst conversationId = '...';\n\nmodule.exports = async function run(totalDiffCount, totalErrorCount) {\n    const web = new WebClient(token);\n    const result = await web.chat.postMessage({\n        text: `Hi, crawler finish his job. We found ${totalDiffCount} diff(s) and ${totalErrorCount} error(s).`,\n        channel: conversationId,\n    });\n}\n            ")),r.a.createElement(m.a.Title,{level:4},"Schedule"),r.a.createElement("p",null,"Right now, test-crawler doesn't offer scheduling out of the box but you can easily setup your own. On your server you can use build-in feature, like cronjob on Linux. For that, just use ",r.a.createElement(m.a.Text,{code:!0},"test-crawler-cli --project the_id_of_your_project"),"."),r.a.createElement("p",null,"On GitHub, you can reuse the workflow generated by test-crawler in ",r.a.createElement(m.a.Text,{code:!0},".github/workflows"),". Make a copy of the workflow under a different name and define the event to trigger the run, see ",r.a.createElement("a",{href:"https://help.github.com/en/actions/reference/events-that-trigger-workflows",target:"_blank",rel:"noopener noreferrer"},"documentation"),". You need then to specify the project you want to run."),r.a.createElement("pre",null,r.a.createElement("code",null,"\nname: Test-crawler schedule\n\non:\n  schedule:\n    # everyday at 01.00\n    - cron:  '* 1 * * *'\n\njobs:\n  test-crawler:\n    runs-on: macos-latest\n\n    steps:\n    - uses: actions/checkout@v2\n    - name: Run test-crawler\n      uses: apiel/test-crawler/actions/run@master\n      with:\n        projectId: put_here_id_of_the_project\n    - name: Push changes\n      uses: apiel/test-crawler/actions/push@master\n      with:\n        token: ${{ secrets.GITHUB_TOKEN }}\n\n            ")))},on=function(e){var t=e.match.params,a=t.projectId,n=t.storageType,l=ca(n,a).project;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Item,null,r.a.createElement(f.b,{to:"/"},"Projects")),r.a.createElement(d.a.Item,null,r.a.createElement(f.b,{to:X(n,a)},null===l||void 0===l?void 0:l.name)))},cn=function(e){var t=e.match.params,a=t.projectId,n=t.timestamp,l=t.storageType,o=ca(l,a).project;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Item,null,r.a.createElement(f.b,{to:"/"},"Projects")),r.a.createElement(d.a.Item,null,r.a.createElement(f.b,{to:X(l,a)},null===o||void 0===o?void 0:o.name)),r.a.createElement(d.a.Item,null,r.a.createElement(f.b,{to:K(l,a,n)},"Results: ",It(n))))},sn=function(e){var t=e.match.params,a=t.projectId,n=t.storageType,l=ca(n,a).project;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Item,null,r.a.createElement(f.b,{to:"/"},"Projects")),r.a.createElement(d.a.Item,null,r.a.createElement(f.b,{to:X(n,a)},null===l||void 0===l?void 0:l.name)),r.a.createElement(d.a.Item,null,r.a.createElement(f.b,{to:$(n,a)},"Pins")))},un=function(e){var t=e.match.params,a=t.projectId,n=t.id,l=t.storageType,o=ca(l,a).project;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Item,null,r.a.createElement(f.b,{to:"/"},"Projects")),r.a.createElement(d.a.Item,null,r.a.createElement(f.b,{to:X(l,a)},null===o||void 0===o?void 0:o.name)),r.a.createElement(d.a.Item,null,r.a.createElement(f.b,{to:Q(l,a,n)},"Code")))},mn=a(279),pn=a.n(mn),dn=function(e){var t=e.children,a=Ce(),n=a.open,l=a.toggle,o=a.content;return r.a.createElement(s.a,null,t,!!n&&r.a.createElement(s.a.Sider,{theme:"light",breakpoint:"md",collapsedWidth:"100%",width:"40%",style:{padding:15,textAlign:"justify"}},r.a.createElement(m.a.Title,{level:3,style:{float:"right",fontStyle:"italic",color:"#CCC"}},"Documentation"),r.a.createElement(pn.a,{offsetTop:10,style:{marginBottom:10}},r.a.createElement(Y.a,{size:"small",shape:"circle",icon:"close",onClick:l})),r.a.createElement("br",null),o||r.a.createElement("p",null,"We are sorry, there is no documentation for this section. If you have any questions, please don't hesitate to ",r.a.createElement("a",{href:"https://github.com/apiel/test-crawler/issues",target:"_blank",rel:"noopener noreferrer"},"contact us"),".")))},fn=s.a.Content,hn=s.a.Header,gn=m.a.Title,wn={minHeight:"100vh"},En={color:"#fff",marginTop:15,marginRight:15,float:"left"},vn={background:"#fff",padding:24,margin:10,minHeight:280},bn=function(){var e=Ce().toggle;return(r.a.createElement(f.a,null,r.a.createElement(dn,null,r.a.createElement(s.a,{style:wn},r.a.createElement(hn,null,r.a.createElement(f.b,{to:"/"},r.a.createElement(gn,{level:3,style:En},r.a.createElement(T,{style:{height:32,width:32,position:"absolute",fill:"#8c8c8c"}}),r.a.createElement("span",{style:{marginLeft:45}},"Test-crawler"))),r.a.createElement(Fa.a,{theme:"dark",mode:"horizontal",selectable:!1,style:{paddingTop:10}},r.a.createElement(Fa.a.Item,{key:"projects"},r.a.createElement(M.a,{type:"folder"}),r.a.createElement("span",{className:"nav-text"},"Projects"),r.a.createElement(f.b,{to:"/"})),r.a.createElement(Fa.a.Item,{key:"doc",title:"Docs",onClick:e},r.a.createElement(M.a,{type:"question-circle"}),r.a.createElement("span",{className:"nav-text"},"Documentation")),r.a.createElement(Fa.a.Item,{key:"settings",title:"settings"},r.a.createElement(M.a,{type:"setting"}),r.a.createElement("span",{className:"nav-text"},"Settings"),r.a.createElement(f.b,{to:"/settings"})))),r.a.createElement(d.a,{style:{margin:"10px 0 0 10px"}},r.a.createElement(h.a,{path:X(":storageType",":projectId"),exact:!0,component:on}),r.a.createElement(h.a,{path:K(":storageType",":projectId",":timestamp"),exact:!0,component:cn}),r.a.createElement(h.a,{path:$(":storageType",":projectId"),exact:!0,component:sn}),r.a.createElement(h.a,{path:Q(":storageType",":projectId",":id"),exact:!0,component:un})),r.a.createElement(fn,{style:vn},r.a.createElement(h.a,{path:"/",exact:!0,component:Ze}),r.a.createElement(h.a,{path:"/settings",exact:!0,component:Wa}),r.a.createElement(h.a,{path:Z(":storageType"),exact:!0,component:Fe}),r.a.createElement(h.a,{path:$(":storageType",":projectId"),exact:!0,component:ba}),r.a.createElement(h.a,{path:Q(":storageType",":projectId",":id"),exact:!0,component:Ha}),r.a.createElement(h.a,{path:K(":storageType",":projectId",":timestamp"),component:fa}),r.a.createElement(h.a,{path:X(":storageType",":projectId"),exact:!0,component:rn}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var yn=a(280);"apiel.github.io"===window.location.host&&yn.hotjar.initialize(1680523,6),o.a.render(r.a.createElement(i.a,null,r.a.createElement((function(e){var t=e.children,a=new je.a,n=r.a.useState("open"===a.get("doc")),l=Object(ke.a)(n,2),o=l[0],i=l[1],c=r.a.useState(),s=Object(ke.a)(c,2),u=s[0],m=s[1],p=function(e){a.set("doc",e?"open":"close",{path:"/"}),i(e)};return r.a.createElement(Oe.Provider,{value:{open:o,setOpen:p,content:u,setContent:m,toggle:function(){return p(!o)}}},t)}),null,r.a.createElement(bn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[284,1,2]]]);
//# sourceMappingURL=main.90ed1f43.chunk.js.map