(window["webpackJsonptest-crawler"]=window["webpackJsonptest-crawler"]||[]).push([[0],{265:function(e,t,n){e.exports=n(615)},272:function(e,t,n){},273:function(e,t,n){},615:function(e,t,n){"use strict";n.r(t);var r=n(16),a=n(1),c=n.n(a),o=n(7),i=n.n(o),l=(n(272),n(114)),s=n.n(l),u=n(17),m=n.n(u),p=n(31),f=n(53),d=(n(273),n(13)),g=n.n(d),h=n(29),v=n(71),E=n(20),b=n(72),w=n.n(b),y=n(253),O=n.n(y),j=n(254),x=n.n(j),k=n(22),S=n.n(k),P=n(8),D=n.n(P),I=n(108),R=n.n(I),C=n(113),T=n.n(C),A=n(30),z=n.n(A),F=n(21),L=n.n(F),M=function(e){return"/code/".concat(e)},N=function(e){return"/results/".concat(e)},B=n(26);function U(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getSettings",t)}function V(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getCrawlers",t)}function J(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","loadPresets",t)}function W(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","saveAndStart",t)}function H(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getCrawler",t)}function q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getPages",t)}function Z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getPins",t)}function _(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","setCode",t)}function G(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getCode",t)}function Q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getCodes",t)}function Y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getThumbnail",t)}function $(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","pin",t)}function K(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","setZoneStatus",t)}function X(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","setZonesStatus",t)}function ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","setStatus",t)}var te={lineHeight:1.2,borderLeft:"8px solid #EEE",paddingLeft:15,color:"#666",textAlign:"justify"},ne=function(e){var t=e.children;return c.a.createElement("div",{style:te},t)},re=n(25),ae=n(106),ce=n.n(ae),oe=n(27),ie=n.n(oe),le=function(e,t){return c.a.createElement(ie.a,null,e&&e.map((function(e){return c.a.createElement(ie.a.Item,{key:"preset-".concat(e.id),onClick:function(){t(e)}},e.name)})))};function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me=function(){var e=Object(E.a)(g.a.mark((function e(t,n,r){var a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J();case 3:a=e.sent,r(a),t&&-1!==(c=a.findIndex((function(e){return"Default"===e.name})))&&n(ue({},a[c],{name:""})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),z.a.warning({message:"Something went wrong while loading presets.",description:e.t0.toString()});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,r){return e.apply(this,arguments)}}(),pe=function(e){var t=e.setPreset,n=e.setDefault,r=Object(a.useState)([]),o=Object(re.a)(r,2),i=o[0],l=o[1];return Object(a.useEffect)((function(){me(n,t,l)}),[]),c.a.createElement(ce.a,{overlay:le(i,t),trigger:["click"]},c.a.createElement(L.a,{icon:"folder-open"},"Load saved preset"))},fe=n(52),de=n.n(fe);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var he=[{name:"Desktop - 800x600",value:{width:800,height:600}},{name:"Desktop - 1024x768",value:{width:1024,height:768}},{name:"Desktop - 1920x1080",value:{width:1920,height:1080}},{name:"iPhone 5 - 320x568",value:{width:320,height:568,isMobile:!0,hasTouch:!0}},{name:"iPhone 6 - 375x667",value:{width:375,height:667,isMobile:!0,hasTouch:!0}},{name:"Ipad - 768x1024",value:{width:768,height:1024,isMobile:!0,hasTouch:!0}},{name:"Galaxy S5 - 360x640",value:{width:360,height:640,isMobile:!0,hasTouch:!0}}],ve=he.map((function(e){var t=e.value;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(v.a)(e,["value"]),{value:JSON.stringify(t)})})),Ee=function(e){var t=JSON.stringify(e),n=ve.findIndex((function(e){return e.value===t}));if(-1!==n)return ve[n].name;var r=e.width,a=e.height,c=e.isMobile;return"".concat(r,"x").concat(a).concat(c&&" mobile")},be=de.a.Option,we=function(e){return(0,e.getFieldDecorator)("viewport",{initialValue:e.initialValue||ve[0].name})(c.a.createElement(de.a,null,ve.map((function(e){var t=e.value,n=e.name;return c.a.createElement(be,{key:t,value:t},n)}))))},ye=n(107);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se,Pe,De,Ie,Re=m.a.Paragraph,Ce=m.a.Text,Te={marginRight:10,display:"inline-block"},Ae={backgroundColor:"#EEE",padding:"0px 10px",borderRadius:5,marginBottom:12},ze={marginRight:30},Fe=function(){var e=Object(E.a)(g.a.mark((function e(t,n,r){var a,c,o,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.saveAs,c=n.viewport,o=Object(v.a)(n,["saveAs","viewport"]),e.prev=1,e.next=4,W(ke({},o,{viewport:JSON.parse(c)}),a);case 4:return i=e.sent,e.next=7,r(V);case 7:t.push(N(i.crawler.timestamp.toString())),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),z.a.error({message:"Something went wrong!",description:e.t0.toString()});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Le=function(e,t,n){return function(r){r.preventDefault(),t((function(t,r){t||Fe(e,r,n)}))}},Me=S.a.create({name:"start_crawler"})((function(e){var t=e.history,n=e.location.search,o=e.form,i=o.getFieldDecorator,l=o.validateFields,s=o.getFieldValue,u=function(e){var t={name:"",id:"",crawlerInput:{method:"spiderbot",limit:0,url:"http://localhost:3003/",viewport:he[0].value,autopin:!0}},n=Object(a.useState)(t),r=Object(re.a)(n,2),c=r[0],o=r[1];return Object(a.useEffect)((function(){if(e){var n=Object(ye.parse)(e),r=n.viewport,a=je({},Object(v.a)(n,["viewport"]),{viewport:JSON.parse(r)});o(je({},t,{crawlerInput:a}))}}),[e]),{preset:c,setPreset:o}}(n),m=u.preset,p=u.setPreset,f=Object(r.b)().call;return c.a.createElement(S.a,{onSubmit:Le(t,l,f)},c.a.createElement(S.a.Item,{style:Ae},c.a.createElement(pe,{setPreset:p,setDefault:!n})),c.a.createElement(S.a.Item,null,i("url",{rules:[{required:!0,message:"Please input an URL to crawl!"}],initialValue:m.crawlerInput.url})(c.a.createElement(w.a,{addonBefore:"URL",addonAfter:c.a.createElement(we,{getFieldDecorator:i,initialValue:JSON.stringify(m.crawlerInput.viewport)})}))),c.a.createElement(S.a.Item,null,c.a.createElement(S.a.Item,{style:Te},i("method",{initialValue:m.crawlerInput.method})(c.a.createElement(T.a.Group,{size:"small",style:ze},c.a.createElement(T.a.Button,{value:"spiderbot"},c.a.createElement(D.a,{type:"radar-chart"})," Spider bot"),c.a.createElement(T.a.Button,{value:"urls"},c.a.createElement(D.a,{type:"ordered-list"})," URLs list")))),"spiderbot"===s("method")&&c.a.createElement(S.a.Item,{style:Te},"Limit ",i("limit",{initialValue:m.crawlerInput.limit})(c.a.createElement(O.a,{min:0,size:"small"})),"\xa0",c.a.createElement(R.a,{content:c.a.createElement("div",null,c.a.createElement("b",null,"Limit the number of sibling pages. "),"For example, with the urls:",c.a.createElement("ul",null,c.a.createElement("li",null,"/item/1"),c.a.createElement("li",null,"/item/2"),c.a.createElement("li",null,"/item/3"),c.a.createElement("li",null,"/item/4"))," using the limit ",c.a.createElement("b",null,"2")," will only crawl ",c.a.createElement("b",null,"/item/1")," and ",c.a.createElement("b",null,"/item/2"),".",c.a.createElement("br",null),c.a.createElement("br",null),"Use ",c.a.createElement("b",null,"0")," to skip the limit."),trigger:"click",overlayStyle:{width:200}},c.a.createElement(D.a,{type:"question-circle"}))),c.a.createElement(ne,null,c.a.createElement(Re,{ellipsis:{rows:1,expandable:!0}},c.a.createElement("b",null,"Spider bot")," crawling method will get all the links inside the page of the given URL and crawl the children. It will then continue do the same with the children till no new link is found. Be careful if you have big website, this is most likely not the right solution for you."),c.a.createElement(Re,{ellipsis:{rows:1,expandable:!0}},c.a.createElement("b",null,"URLs list")," crawling method will crawl a specific sets of URLs. In the URL input field you must provide an endpoint containing a list of URLs (a simple text format, with one URL per line). The crawler will crawl each of those URL only and will not try to find links in the page."))),c.a.createElement(S.a.Item,null,i("autopin",{valuePropName:"checked",initialValue:m.crawlerInput.autopin})(c.a.createElement(x.a,null,"Automatically pin new page founds."))),c.a.createElement(S.a.Item,null,c.a.createElement(S.a.Item,{style:Te},c.a.createElement(L.a,{type:"primary",icon:"caret-right",htmlType:"submit"},"Start")),c.a.createElement(S.a.Item,{style:Te},i("saveAs",{initialValue:m.name})(c.a.createElement(w.a,{addonBefore:"Save as",placeholder:"Leave empty to don't save"}))),c.a.createElement(ne,null,c.a.createElement(Re,null,"If you save as ",c.a.createElement(Ce,{code:!0},"Default"),", this preset will always be load per default."))))})),Ne=n(33),Be=n.n(Ne),Ue=n(81),Ve=n.n(Ue),Je=n(255),We=n.n(Je),He=n(112),qe=n.n(He),Ze=n(109),_e=n.n(Ze),Ge={textAlign:"center"},Qe=300,Ye={width:Qe+20,marginBottom:10},$e={paddingTop:10,paddingBottom:10},Ke={gutter:10,fitWidth:!0},Xe=n(40),et=n.n(Xe),tt={marginLeft:5,marginRight:5},nt=function(e,t,n){var r=n.timestamp,a=n.id,c=n.index;return Object(E.a)(g.a.mark((function n(){var o;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,K(r.toString(),a,c,t);case 3:o=n.sent,e(o,q,r),et.a.success("Page pinned as reference for comparison.",2),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),z.a.error({message:"Something went wrong!",description:n.t0.toString()});case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))},rt=function(e){var t=Object(r.b)().update;return c.a.createElement(c.a.Fragment,null,c.a.createElement(L.a,{style:tt,icon:"check",size:"small",onClick:nt(t,"valid",e)},"Valid"),c.a.createElement(L.a,{style:tt,icon:"pushpin",size:"small",onClick:nt(t,"pin",e)},"Always valid"),c.a.createElement(L.a,{style:tt,icon:"warning",size:"small",type:"danger",onClick:nt(t,"report",e)},"Report"))},at=function(e){return"valid"===e||"pin"===e?"#0F0":"report"===e?"red":"yellow"},ct=function(e,t,n,r,a){var c=e.xMin,o=e.yMin,i=o/t,l=c/t;return{width:(e.xMax-c)/t+1,height:(e.yMax-o)/t+1,top:i,left:l+10,border:"1px solid ".concat(at(a)),position:"absolute",backgroundImage:r?'url("'.concat(n,'")'):"none",backgroundPosition:"".concat(-l,"px ").concat(-i,"px")}},ot=function(e){var t=e.folder,n=e.id,r=e.index,o=e.originalWidth,i=e.zone,l=e.status,s=e.width,u=Object(a.useState)(),m=Object(re.a)(u,2),p=m[0],f=m[1],d=function(){var e=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,Y("base",n,s);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){d()}),[]);var h=Object(a.useState)(!1),v=Object(re.a)(h,2),b=v[0],w=v[1],y=o/s;return c.a.createElement(R.a,{key:"".concat(n,"-").concat(r),content:c.a.createElement(rt,{index:r,timestamp:t,id:n}),trigger:"click"},c.a.createElement("div",{style:ct(i,y,p,b,l),onMouseOver:function(){return w(!0)},onMouseOut:function(){return w(!1)}}))},it=function(e){var t=e.folder,n=e.id,r=e.zones,o=e.originalWidth,i=void 0===o?0:o,l=e.onImg,s=void 0===l?function(){}:l,u=e.width,m=void 0===u?Qe:u,p=Object(a.useState)(),f=Object(re.a)(p,2),d=f[0],h=f[1],v=function(){var e=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h,e.next=3,Y(t,n,m);case 3:e.t1=e.sent,(0,e.t0)(e.t1),s();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){v()}),[]),d?c.a.createElement("div",{style:Ge},r&&r.map((function(e,r){var a=e.zone,o=e.status;return c.a.createElement(ot,Object.assign({folder:t,id:n,index:r,originalWidth:i,zone:a,status:o,width:m},{key:"zone-".concat(n,"-").concat(r)}))})),c.a.createElement("img",{style:{width:m},alt:"",src:d})):null},lt=n(110),st=n.n(lt),ut=function(e){var t=e.message,n=void 0===t?"Something went wrong":t,r=e.description;return c.a.createElement(st.a,{message:n,description:r,type:"warning",showIcon:!0})},mt=n(256),pt=n.n(mt),ft={width:Ye.width,marginRight:Ke.gutter},dt=function(e,t,n){return function(r){t&&(r.length?(clearTimeout(Se),Se=setTimeout((function(){vt(e,gt(t,r),n)}),500)):vt(e,t,n))}},gt=function(e,t){return new pt.a(e,{keys:["url","viewport.width","viewport.height","keywords"]}).search(t)},ht=function(e,t,n){return function(r){t&&(n(r),vt(e,t,r))}},vt=function(e,t,n){if(t)if(n.length){var r=n.filter((function(e){return!Object.keys(Et).includes(e)})).join(" ");r&&(t=gt(t,r)),e(t.filter((function(e){var t=!0;if(n.includes("with-diff")){var r=Ve()(e,"png.diff.pixelDiffRatio");t=t&&r>0}return n.includes("new")&&(t=t&&!!e.png&&!e.png.diff),t})))}else e(t)},Et={"with-diff":"with diff",new:"new"},bt=de.a.Option,wt=function(e){var t=e.children,n=e.response,r=e.withFilters,a=c.a.useState(),o=Object(re.a)(a,2),i=o[0],l=o[1],s=c.a.useState([]),u=Object(re.a)(s,2),m=u[0],p=u[1],f=c.a.useState(),d=Object(re.a)(f,2),g=d[0],h=d[1];return c.a.useEffect((function(){l(n),ht(h,n,p)(m)}),[n]),c.a.createElement(c.a.Fragment,null,c.a.createElement(de.a,{mode:"tags",onChange:ht(h,i,p),tokenSeparators:[","],style:ft,placeholder:"Search",filterOption:!1,onSearch:dt(h,i,m)},!!r&&Object.keys(r).map((function(e){return c.a.createElement(bt,{key:e},r[e])}))),t(g))},yt=n(258),Ot=n.n(yt),jt=n(70),xt=function(e){return Object(jt.unix)(e).calendar()},kt=n(264),St=n(257),Pt=function(e){var t=e.zones;return c.a.createElement("p",null,c.a.createElement("b",null,"Zone:"),"\xa0",[["diff"],["valid","pin"],["report"]].map((function(e){var n=Object(St.a)(e),r=n[0],a=n.slice(1);return c.a.createElement(c.a.Fragment,{key:r},c.a.createElement("span",{style:{marginLeft:10,color:at(r)}},"\u25a0")," ",c.a.createElement("b",null,function(e,t){return e.filter((function(e){var n=e.status;return t.includes(n)})).length}(t,[r].concat(Object(kt.a)(a))))," ",r)})))},Dt=function(e){var t=e.diff;return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,c.a.createElement(D.a,{type:"picture",theme:"outlined"}),"\xa0 Pixel diff ratio: ",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e)return e;var n=t-1-Math.floor(Math.log(e)/Math.log(10));return e.toFixed(n)}(t.pixelDiffRatio)),t.zones&&t.zones.length>0&&c.a.createElement(Pt,{zones:t.zones}))},It=function(e){var t=e.diff;return t?c.a.createElement(Dt,{diff:t}):c.a.createElement("div",null,c.a.createElement(D.a,{type:"picture",theme:"outlined"}),"\xa0 New screenshot ",c.a.createElement(Ot.a,{color:"green"},"New"))},Rt=new(n(562))({fg:"#333"}),Ct={marginBottom:10},Tt=function(e){var t=e.pageError,n=e.url,r=e.png;return c.a.createElement(c.a.Fragment,null,t&&c.a.createElement(st.a,{message:c.a.createElement("div",{dangerouslySetInnerHTML:{__html:Rt.toHtml(t)}}),type:"warning",style:Ct}),c.a.createElement("p",null,c.a.createElement(D.a,{type:"link"})," ",c.a.createElement("a",{href:n},n)),r?c.a.createElement(It,{diff:r.diff}):c.a.createElement("p",null,c.a.createElement(D.a,{type:"picture",theme:"outlined"})," No screenshot available"))},At=function(e,t){var n=t.timestamp,r=t.id,a=t.status;return Object(E.a)(g.a.mark((function t(){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X(n.toString(),r,a);case 3:c=t.sent,e(c,q,n),et.a.success('All zone are set to "'.concat(a,'".'),2),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),z.a.error({message:"Something went wrong!",description:t.t0.toString()});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))},zt=function(e){var t=Object(r.b)().update,n=e.status,a=e.type;return c.a.createElement(D.a,{type:a,title:'Set all zone to "'.concat(n,'".'),onClick:At(t,e)})},Ft=function(e){var t=e.timestamp,n=e.id;return Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$(t.toString(),n);case 3:et.a.success("Page pinned as reference for comparison.",2),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),z.a.error({message:"Something went wrong!",description:e.t0.toString()});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))},Lt=function(e){return function(e){return c.a.createElement(D.a,{type:"pushpin",title:"pin as reference for comparison",onClick:Ft(e)})}(e)},Mt=n(259),Nt=n.n(Mt),Bt=function(e){return function(){e(!0)}},Ut=function(e){return function(){e(!1)}},Vt=function(e){var t=e.timestamp,n=e.id,r=e.png,a=e.url,o=e.pageError,i=c.a.useState(!1),l=Object(re.a)(i,2),s=l[0],u=l[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(Nt.a,{title:"",visible:s,onCancel:Ut(u),footer:null,width:r.width+40},c.a.createElement("div",{style:{position:"relative"}},c.a.createElement(it,{folder:t,id:n,zones:r.diff&&r.diff.zones,originalWidth:r.width,width:r.width}),c.a.createElement(Tt,{url:a,pageError:o,png:r}))),c.a.createElement(D.a,{type:"fullscreen",title:"fullscreen",onClick:Bt(u)}))},Jt=function(e){var t=e.timestamp,n=e.id,r=e.png,a=e.url,o=e.pageError;return[r&&c.a.createElement(Vt,{png:r,id:n,timestamp:t,url:a,pageError:o})].concat([c.a.createElement(zt,{type:"check",timestamp:t,id:n,status:"valid",zones:r&&r.diff?r.diff.zones:[]}),c.a.createElement(zt,{type:"warning",timestamp:t,id:n,status:"report",zones:r&&r.diff?r.diff.zones:[]}),c.a.createElement(Lt,{timestamp:t,id:n})])},Wt=function(e){return Pe=e},Ht=function(){Pe&&Pe.layout(),clearTimeout(De),De=setTimeout((function(){Pe&&Pe.layout()}),500)},qt=function(e){var t=e.timestamp,n=e.lastUpdate,a=Object(r.c)([n],q,t),o=a.response,i=a.error;return i?c.a.createElement(ut,{description:i.toString()}):c.a.createElement(wt,{response:o,withFilters:Et},(function(e){return e?c.a.createElement(_e.a,{style:$e,options:Ke,ref:function(e){Wt(e&&e.masonry)}},e.map((function(e){var n=e.id,r=e.url,a=e.png,o=e.error;return c.a.createElement(qe.a,{key:n,style:Ye,cover:a&&c.a.createElement(it,{folder:t,id:n,zones:a.diff&&a.diff.zones,originalWidth:a.width,onImg:Ht}),actions:Jt({id:n,timestamp:t,png:a,url:r,pageError:o})},c.a.createElement(Tt,{url:r,pageError:o,png:a}))}))):c.a.createElement(Be.a,null)}))},Zt=n(261),_t=n.n(Zt),Gt=(n(593),n(260)),Qt=n.n(Gt),Yt=function(e,t){return function(){var n=Object(E.a)(g.a.mark((function n(r){var a,c;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=r?"done":"review",n.next=4,ee(t,a);case 4:c=n.sent,e(c),et.a.success('Status set to "'.concat(a,'".'),2),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),z.a.error({message:"Something went wrong!",description:n.t0.toString()});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},$t=function(e){var t=e.timestamp,n=e.status,a=Object(r.b)(H,t.toString()).update;return c.a.createElement(Qt.a,{checkedChildren:"done",unCheckedChildren:"review",checked:"done"===n,onChange:Yt(a,t.toString())})},Kt=m.a.Title,Xt={color:"#faad29"},en={marginRight:10},tn={color:"#999",fontSize:11},nn=function(e){var t=e.crawler,n=t.timestamp,r=t.url,a=t.diffZoneCount,o=t.errorCount,i=t.status,l=t.urlsCount,s=t.inQueue,u=t.startAt,m=t.lastUpdate,p=t.method,f=t.limit,d=t.autopin,g=t.viewport,h=e.history,v=l+s,E=Math.floor(l/v*100),b=Ee(g);return c.a.createElement(c.a.Fragment,null,c.a.createElement(Kt,{level:3},xt(n)),c.a.createElement("p",null,c.a.createElement(L.a,{icon:"retweet",size:"small",onClick:function(){h.push({pathname:"/",search:Object(ye.stringify)({url:r,method:p,limit:f,autopin:d,viewport:JSON.stringify(g)})})},style:en},"Re-run"),(a>0||o>0)&&c.a.createElement($t,{status:i,timestamp:n})),c.a.createElement("p",null,c.a.createElement("b",null,"URL:")," ",r),c.a.createElement("p",null,c.a.createElement("b",null,"Screen:")," ",b),c.a.createElement("p",null,c.a.createElement("b",null,"URL crawled:")," ",l,void 0!==f&&f>0&&c.a.createElement("span",{style:tn}," (with limit set to ",f,")")),c.a.createElement("p",null,c.a.createElement("b",null,"Duration:")," ",Object(jt.duration)(m-u).format("h [hrs], m [min], s [sec]")),s>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement(_t.a,{percent:E}),c.a.createElement("p",null,c.a.createElement("b",null,"In queue:")," ",s)),o>0&&c.a.createElement("p",{style:Xt},c.a.createElement(D.a,{type:"exclamation-circle"})," ",o," error(s) founds"))},rn=function(e){var t=e.match.params.timestamp,n=e.history,a=Object(r.b)(),o=a.cache,i=a.update,l=Object(r.c)(H,t),s=l.error,u=l.call,m=l.response;if(c.a.useEffect((function(){!function(e,t,n){if(e){var r=t(V);if(r){var a=r.findIndex((function(t){return t.id===e.id}));-1!==a&&(We()(r[a],e)||(r[a]=e,n(r,V)))}}}(m,o,i)}),[m]),s)return c.a.createElement(ut,{description:s.toString()});var p=Ve()(m,"lastUpdate");return function(e){clearTimeout(Ie),Ie=setTimeout((function(){e()}),1e3)}(u),m?c.a.createElement(c.a.Fragment,null,c.a.createElement(nn,{crawler:m,history:n}),c.a.createElement(qt,{timestamp:t,lastUpdate:p})):c.a.createElement(Be.a,null)},an=n(262),cn=n.n(an),on=function(e){return 0===e?{borderTop:"1px solid #7e8791"}:{}},ln=function(e,t,n,r){return r>0?"loading":e||0!==t?"done"===n?"issues-close":"exclamation-circle":"check"},sn=function(){var e=Object(r.c)(V),t=e.response,n=e.error;return n?c.a.createElement(ut,{description:n.toString()}):c.a.createElement(c.a.Fragment,null,c.a.createElement(ie.a,{theme:"dark",mode:"inline"},c.a.createElement(ie.a.Item,{key:"new"},c.a.createElement(D.a,{type:"plus"}),c.a.createElement("span",{className:"nav-text"},"New"),c.a.createElement(p.b,{to:"/"})),c.a.createElement(ie.a.Item,{key:"pins"},c.a.createElement(D.a,{type:"pushpin"}),c.a.createElement("span",{className:"nav-text"},"Pins"),c.a.createElement(p.b,{to:"/pins"})),c.a.createElement(ie.a.Item,{key:"codes"},c.a.createElement(D.a,{type:"code"}),c.a.createElement("span",{className:"nav-text"},"Codes"),c.a.createElement(p.b,{to:"/code"})),t&&function(e){return e.sort((function(e,t){var n=e.timestamp;return t.timestamp-n})).map((function(e,t){var n=e.timestamp,r=e.url,a=e.id,o=e.diffZoneCount,i=e.errorCount,l=e.status,s=e.inQueue;return c.a.createElement(ie.a.Item,{key:"crawler-".concat(a),title:r,style:on(t)},c.a.createElement(D.a,{type:ln(o,i,l,s)}),c.a.createElement("span",{className:"nav-text"},xt(n)),c.a.createElement(p.b,{to:N(n)}))}))}(t)),c.a.createElement(cn.a,{style:{position:"absolute",bottom:15,left:15}},c.a.createElement(p.b,{to:"/settings"},c.a.createElement(D.a,{type:"setting"}))))},un=function(e){var t=e.id,n=e.url,r=e.viewport,a=e.onImg,o=e.png;return c.a.createElement(qe.a,{style:Ye,cover:o&&c.a.createElement(it,{folder:"base",id:t,onImg:a}),actions:[c.a.createElement(D.a,{type:"delete",title:"Delete pin"}),c.a.createElement(p.b,{to:{pathname:M(t),state:{pattern:n}}},c.a.createElement(D.a,{type:"code",title:"Insert code while crawling"}))]},c.a.createElement("p",null,c.a.createElement(D.a,{type:"link"})," ",c.a.createElement("a",{href:n},n)),!o&&c.a.createElement("p",null,c.a.createElement(D.a,{type:"picture",theme:"outlined"})," No screenshot available"),r&&c.a.createElement("p",null,c.a.createElement(D.a,{type:"picture",theme:"outlined"})," ",Ee(r)))},mn=m.a.Title,pn=function(){var e=Object(r.c)(Z),t=e.response,n=e.error;return n?c.a.createElement(ut,{description:n.toString()}):c.a.createElement(c.a.Fragment,null,c.a.createElement(mn,{level:3},"Pins"),c.a.createElement(wt,{response:t},(function(e){return e?c.a.createElement(_e.a,{style:$e,options:Ke,ref:function(e){Wt(e&&e.masonry)}},e.map((function(e){var t=e.id,n=e.url,r=e.png,a=e.viewport;return c.a.createElement(un,{id:t,key:t,url:n,png:r,viewport:a,onImg:Ht})}))):c.a.createElement(Be.a,null)})))},fn=n(263),dn=n.n(fn),gn=(n(607),n(609),m.a.Paragraph),hn=m.a.Text,vn=function(e){var t=e.full,n=void 0===t||t;return c.a.createElement(ne,null,c.a.createElement(gn,null,"Inject some code in the crawler while parsing the page. This code will be executed just after the page finish loaded, before to make the screenshot and before extracting the links. ",n&&c.a.createElement(c.a.Fragment,null,"You need to export a function that will take as first parameter the ",c.a.createElement(hn,{code:!0},"page")," coming from Puppeteer.")),n&&c.a.createElement(gn,null,c.a.createElement(hn,{code:!0},"module.exports = async (page) => ...some code")))};function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var bn={border:"1px solid #EEE",marginBottom:15,marginRight:15,float:"left"},wn=(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}}({},Ye,{float:"left"}),{marginBottom:15}),yn={marginRight:10},On={maxWidth:500,margin:"0px 0px 10px 0px"};function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kn=m.a.Paragraph,Sn=function(){et.a.warn("To be implemented.",2)},Pn=function(){var e=Object(E.a)(g.a.mark((function e(t,n,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_(xn({id:t,source:n},r));case 3:et.a.success("Code saved.",2),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),z.a.error({message:"Something went wrong!",description:e.t0.toString()});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Dn=function(e,t,n){return function(r){r.preventDefault(),n((function(n,r){n||Pn(e,t,r)}))}},In=S.a.create({name:"code"})((function(e){var t,n=e.setSource,r=e.id,a=e.code,o=e.form,i=o.getFieldDecorator,l=o.validateFields,s=e.location.state;return c.a.createElement(S.a,{onSubmit:Dn(r,a.source,l)},c.a.createElement(S.a.Item,{style:On},i("name",{initialValue:a.name||""})(c.a.createElement(w.a,{addonBefore:"Name"}))),c.a.createElement(S.a.Item,{style:On},i("pattern",{rules:[{required:!0,message:"Please input a pattern!"}],initialValue:a.pattern||s&&s.pattern||""})(c.a.createElement(w.a,{addonBefore:"Pattern"}))),c.a.createElement(ne,null,c.a.createElement(kn,null,"Pattern is using ",c.a.createElement("a",{href:"https://www.npmjs.com/package/minimatch",target:"_blank"},"minimatch")," to match the urls to inject the code. It works by converting glob expressions into JavaScript RegExp objects.")),c.a.createElement("div",{style:wn},c.a.createElement(L.a,{icon:"save",htmlType:"submit",style:yn},"Save"),c.a.createElement(L.a,{icon:"caret-right",onClick:Sn,style:yn},"Preview"),c.a.createElement(ce.a,{overlay:(t=n,c.a.createElement(ie.a,null,c.a.createElement(ie.a.Item,{key:"1",onClick:function(){t('module.exports = async function run(page) {\n    await page.evaluate(() => {\n        const div = document.createElement("div");\n        div.innerHTML = "Test-crawler is awesome!";\n        document.body.insertBefore(div, document.body.firstChild);\n    });\n}')}},"Test-crawler is awesome"),c.a.createElement(ie.a.Item,{key:"2",onClick:function(){t("module.exports = async function run(page) {\n    return await page.evaluate(() => {\n        Array.from(document.body.getElementsByTagName(\"a\"))\n             .filter(a => !a.href)\n             .forEach(a => a.click());\n        return Array.from(document.links).map(\n            link => link.href.replace('/?', '/iframe.html?')\n        );\n    });\n}")}},"Storybook"),c.a.createElement(ie.a.Item,{key:"3",onClick:function(){t("// expect library from jest is installed by default\n// but you can use any assertion tool of your choice\n// just install it and use it here :D\nconst expect = require('expect');\n\nmodule.exports = async function run(page) {\n  await expect(page.title()).resolves.toMatch('React App');\n  expect('a').toBe('b'); // fail\n}")}},"Expect assetion example")))},c.a.createElement(L.a,{style:yn},"Code snippet ",c.a.createElement(D.a,{type:"down"})))))}));function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Cn=m.a.Title,Tn=function(e,t){return function(n){t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{source:n}))}},An=function(e){var t=e.match.params.id,n=e.location,a=Object(r.c)(G,t),o=a.error,i=a.response,l=a.update;return o?c.a.createElement(ut,{description:o.toString()}):c.a.createElement(c.a.Fragment,null,c.a.createElement(Cn,{level:3},"Add some code"),i?c.a.createElement(S.a,null,c.a.createElement(vn,null),c.a.createElement(In,{id:t,code:i,setSource:Tn(i,l),location:n}),c.a.createElement(dn.a,{mode:"javascript",theme:"tomorrow",onChange:Tn(i,l),fontSize:14,value:i.source.length?i.source:"module.exports = async function run(page) {\n// your code\n}",style:bn})):c.a.createElement(Be.a,null))},zn=n(160),Fn=n.n(zn),Ln=m.a.Title,Mn=m.a.Text,Nn=function(){var e=Object(r.c)(Q),t=e.error,n=e.response;return t?c.a.createElement(ut,{description:t.toString()}):c.a.createElement(c.a.Fragment,null,c.a.createElement(Ln,{level:3},"Codes"),c.a.createElement(vn,{full:!1}),n?c.a.createElement(Fn.a,{dataSource:Object.values(n),renderItem:function(e){var t=e.id,n=e.name,r=e.pattern;return c.a.createElement(Fn.a.Item,null,c.a.createElement(p.b,{to:M(t)},n," ",c.a.createElement(Mn,{code:!0},r)))}}):c.a.createElement(Be.a,null),c.a.createElement(p.b,{to:M(Math.floor(Date.now()/1e3).toString())},c.a.createElement(L.a,{icon:"plus",size:"small"},"New")))},Bn=m.a.Title,Un=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,U();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vn=function(){var e=c.a.useState(),t=Object(re.a)(e,2),n=t[0],r=t[1];return c.a.useEffect((function(){Un(r)}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Bn,{level:3},"Settings"),n?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,c.a.createElement("b",null,"Dir:")," ",n.dir)):c.a.createElement(Be.a,null))},Jn=s.a.Sider,Wn=s.a.Content,Hn=m.a.Title,qn={minHeight:"100vh"},Zn={color:"#fff",margin:10},_n={background:"#fff",padding:24,margin:10,minHeight:280},Gn=function(){return c.a.createElement(p.a,null,c.a.createElement(s.a,{style:qn},c.a.createElement(Jn,null,c.a.createElement(Hn,{level:3,style:Zn},"Test-crawler"),c.a.createElement(sn,null)),c.a.createElement(Wn,{style:_n},c.a.createElement(f.a,{path:"/",exact:!0,component:Me}),c.a.createElement(f.a,{path:"/pins",exact:!0,component:pn}),c.a.createElement(f.a,{path:"/settings",exact:!0,component:Vn}),c.a.createElement(f.a,{path:M(":id"),exact:!0,component:An}),c.a.createElement(f.a,{path:"/code",exact:!0,component:Nn}),c.a.createElement(f.a,{path:N(":timestamp"),component:rn}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(r.a,null,c.a.createElement(Gn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[265,1,2]]]);
//# sourceMappingURL=main.be6dd61b.chunk.js.map