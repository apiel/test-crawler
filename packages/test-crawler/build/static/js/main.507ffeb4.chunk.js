(this["webpackJsonptest-crawler"]=this["webpackJsonptest-crawler"]||[]).push([[0],{258:function(e,t,a){e.exports=a(602)},265:function(e,t,a){},266:function(e,t,a){},602:function(e,t,a){"use strict";a.r(t);var n=a(257),r=a(0),l=a.n(r),c=a(7),o=a.n(c),i=(a(265),a(112)),s=a.n(i),u=a(17),m=a.n(u),p=a(27),d=a.n(p),f=a(13),E=a(51),g=(a(266),a(12)),h=a.n(g),v=a(36),w=a(71),b=a(72),y=a.n(b),j=a(247),x=a.n(j),I=a(104),S=a.n(I),k=a(26),O=a.n(k),P=a(8),R=a.n(P),C=a(103),F=a.n(C),T=a(111),z=a.n(T),A=a(23),L=a.n(A),M=a(18),U=a.n(M),B=function(e){return"/pins/".concat(e)},D=function(e,t){return"/code/".concat(e,"/").concat(t)},N=function(e,t){return"/results/".concat(e,"/").concat(t)},W=function(e){return"/project/".concat(e)},H=a(24);function V(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","getSettings",t)}function q(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","getCrawlers",t)}function J(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","loadProjects",t)}function Z(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","saveProject",t)}function _(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","getPins",t)}function Q(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","setCode",t)}function G(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","getThumbnail",t)}function Y(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","pin",t)}function $(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","setZoneStatus",t)}function K(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","setZonesStatus",t)}function X(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","setStatus",t)}function ee(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","startCrawlerFromProject",t)}function te(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","startCrawlers",t)}var ae,ne,re,le,ce={lineHeight:1.2,borderLeft:"8px solid #EEE",paddingLeft:15,color:"#666",textAlign:"justify"},oe=function(e){var t=e.children;return l.a.createElement("div",{style:ce},t)},ie=a(50),se=a.n(ie),ue=[{name:"Desktop - 800x600",value:{width:800,height:600}},{name:"Desktop - 1024x768",value:{width:1024,height:768}},{name:"Desktop - 1920x1080",value:{width:1920,height:1080}},{name:"iPhone 5 - 320x568",value:{width:320,height:568,isMobile:!0,hasTouch:!0}},{name:"iPhone 6 - 375x667",value:{width:375,height:667,isMobile:!0,hasTouch:!0}},{name:"Ipad - 768x1024",value:{width:768,height:1024,isMobile:!0,hasTouch:!0}},{name:"Galaxy S5 - 360x640",value:{width:360,height:640,isMobile:!0,hasTouch:!0}}],me=ue.map((function(e){var t=e.value,a=Object(w.a)(e,["value"]);return Object(v.a)({},a,{value:JSON.stringify(t)})})),pe=function(e){var t=JSON.stringify(e),a=me.findIndex((function(e){return e.value===t}));if(-1!==a)return me[a].name;var n=e.width,r=e.height,l=e.isMobile;return"".concat(n,"x").concat(r).concat(l&&" mobile")},de=se.a.Option,fe=function(e){return(0,e.getFieldDecorator)("viewport",{initialValue:e.initialValue||me[0].name})(l.a.createElement(se.a,null,me.map((function(e){var t=e.value,a=e.name;return l.a.createElement(de,{key:t,value:t},a)}))))},Ee={marginRight:10,display:"inline-block"},ge={marginRight:30},he=function(e,t){return function(a){a.preventDefault(),t((function(t,a){t||function(e,t){var a,n,r;h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a=t.name,n=t.viewport,r=Object(w.a)(t,["name","viewport"]),l.prev=1,l.next=4,h.a.awrap(Z(Object(v.a)({},r,{viewport:JSON.parse(n)}),a,void 0));case 4:e.push("/"),l.next=10;break;case 7:l.prev=7,l.t0=l.catch(1),L.a.error({message:"Something went wrong!",description:l.t0.toString()});case 10:case"end":return l.stop()}}),null,null,[[1,7]])}(e,a)}))}},ve=O.a.create({name:"start_crawler"})((function(e){var t=e.history,a=e.form,n=a.getFieldDecorator,r=a.validateFields,c=a.getFieldValue;return l.a.createElement(O.a,{onSubmit:he(t,r)},l.a.createElement(O.a.Item,null,n("name",{rules:[{required:!0,message:"Please give a name to the project."}]})(l.a.createElement(y.a,{addonBefore:"Name",placeholder:"Project name"}))),l.a.createElement(O.a.Item,null,n("url",{rules:[{required:!0,message:"Please input an URL to crawl."}]})(l.a.createElement(y.a,{placeholder:"https://domain.com/",addonBefore:"URL",addonAfter:l.a.createElement(fe,{getFieldDecorator:n,initialValue:JSON.stringify(ue[0].value)})}))),l.a.createElement(O.a.Item,null,l.a.createElement(O.a.Item,{style:Ee},n("method",{initialValue:"spiderbot"})(l.a.createElement(z.a.Group,{size:"small",style:ge},l.a.createElement(z.a.Button,{value:"spiderbot"},l.a.createElement(R.a,{type:"radar-chart"})," Spider bot"),l.a.createElement(z.a.Button,{value:"urls"},l.a.createElement(R.a,{type:"ordered-list"})," URLs list")))),"spiderbot"===c("method")&&l.a.createElement(O.a.Item,{style:Ee},"Limit ",n("limit")(l.a.createElement(x.a,{min:0,size:"small"})),"\xa0",l.a.createElement(F.a,{content:l.a.createElement("div",null,l.a.createElement("b",null,"Limit the number of sibling pages. "),"For example, with the urls:",l.a.createElement("ul",null,l.a.createElement("li",null,"/item/1"),l.a.createElement("li",null,"/item/2"),l.a.createElement("li",null,"/item/3"),l.a.createElement("li",null,"/item/4"))," using the limit ",l.a.createElement("b",null,"2")," will only crawl ",l.a.createElement("b",null,"/item/1")," and ",l.a.createElement("b",null,"/item/2"),".",l.a.createElement("br",null),l.a.createElement("br",null),"Use ",l.a.createElement("b",null,"0")," to skip the limit."),trigger:"click",overlayStyle:{width:200}},l.a.createElement(R.a,{type:"question-circle"}))),l.a.createElement(oe,null,l.a.createElement(m.a.Paragraph,{ellipsis:{rows:1,expandable:!0}},l.a.createElement("b",null,"Spider bot")," crawling method will get all the links inside the page of the given URL and crawl the children. It will then continue do the same with the children till no new link is found. Be careful if you have big website, this is most likely not the right solution for you."),l.a.createElement(m.a.Paragraph,{ellipsis:{rows:1,expandable:!0}},l.a.createElement("b",null,"URLs list")," crawling method will crawl a specific sets of URLs. In the URL input field you must provide an endpoint containing a list of URLs (a simple text format, with one URL per line). The crawler will crawl each of those URL only and will not try to find links in the page."))),l.a.createElement(O.a.Item,null,n("autopin",{valuePropName:"checked"})(l.a.createElement(S.a,null,"Automatically pin new page founds."))),l.a.createElement(O.a.Item,null,l.a.createElement(O.a.Item,{style:Ee},l.a.createElement(U.a,{type:"primary",icon:"plus",htmlType:"submit"},"Create"))))})),we=a(20),be=a(37),ye=a.n(be),je=function(){var e=l.a.useState([]),t=Object(we.a)(e,2),a=t[0],n=t[1];return l.a.useEffect((function(){!function(e){var t;h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.awrap(J());case 3:t=a.sent,e(t),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),L.a.warning({message:"Something went wrong while loading projects.",description:a.t0.toString()});case 10:case"end":return a.stop()}}),null,null,[[0,7]])}(n)}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a.Title,{level:3},"Projects"),l.a.createElement(ye.a,{itemLayout:"horizontal",bordered:!0,dataSource:a,renderItem:function(e){var t=e.id,a=e.name,n=e.crawlerInput.url;return l.a.createElement(ye.a.Item,{actions:[l.a.createElement(f.b,{to:W(t)},"Open")]},l.a.createElement(ye.a.Item.Meta,{title:l.a.createElement(f.b,{to:W(t)},a),description:n}))}}),l.a.createElement("br",null),l.a.createElement(f.b,{to:"/new"},l.a.createElement(U.a,{icon:"plus",size:"small"},"New")))},xe=a(28),Ie=a.n(xe),Se=a(110),ke=a.n(Se),Oe=a(107),Pe=a.n(Oe),Re={textAlign:"center"},Ce=300,Fe={width:Ce+20,marginBottom:10},Te={paddingTop:10,paddingBottom:10},ze={gutter:10,fitWidth:!0},Ae=a(108),Le=a.n(Ae),Me=function(e){var t=e.message,a=void 0===t?"Something went wrong":t,n=e.description;return l.a.createElement(Le.a,{message:a,description:n,type:"warning",showIcon:!0})},Ue=a(248),Be=a.n(Ue),De=a(154),Ne=a.n(De),We={width:Fe.width,marginRight:ze.gutter},He=function(e,t,a){return function(n){t&&(n.length?(clearTimeout(ae),ae=setTimeout((function(){Je(e,Ve(t,n),a)}),500)):Je(e,t,a))}},Ve=function(e,t){return new Be.a(e,{keys:["url","viewport.width","viewport.height","keywords"]}).search(t)},qe=function(e,t,a){return function(n){t&&(a(n),Je(e,t,n))}},Je=function(e,t,a){if(t)if(a.length){var n=a.filter((function(e){return!Object.keys(Ze).includes(e)})).join(" ");n&&(t=Ve(t,n)),e(t.filter((function(e){var t=!0;if(a.includes("with-diff")){var n=Ne()(e,"png.diff.pixelDiffRatio");t=t&&n>0}return a.includes("new")&&(t=t&&!!e.png&&!e.png.diff),t})))}else e(t)},Ze={"with-diff":"with diff",new:"new"},_e=se.a.Option,Qe=function(e){var t=e.children,a=e.response,n=e.withFilters,r=l.a.useState(),c=Object(we.a)(r,2),o=c[0],i=c[1],s=l.a.useState([]),u=Object(we.a)(s,2),m=u[0],p=u[1],d=l.a.useState(),f=Object(we.a)(d,2),E=f[0],g=f[1];return l.a.useEffect((function(){i(a),qe(g,a,p)(m)}),[a]),l.a.createElement(l.a.Fragment,null,l.a.createElement(se.a,{mode:"tags",onChange:qe(g,o,p),tokenSeparators:[","],style:We,placeholder:"Search",filterOption:!1,onSearch:He(g,o,m)},!!n&&Object.keys(n).map((function(e){return l.a.createElement(_e,{key:e},n[e])}))),t(E))},Ge=a(250),Ye=a.n(Ge),$e=a(70),Ke=function(e){return Object($e.unix)(e).calendar()},Xe=a(256),et=a(249),tt=a(32),at=a.n(tt),nt={marginLeft:5,marginRight:5},rt=function(e,t){var a=t.timestamp,n=t.id,r=t.index,l=t.projectId,c=t.setPages;return function(){var t;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,h.a.awrap($(l,a.toString(),n,r,e));case 3:t=o.sent,c(t),at.a.success("Page pinned as reference for comparison.",2),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),L.a.error({message:"Something went wrong!",description:o.t0.toString()});case 11:case"end":return o.stop()}}),null,null,[[0,8]])}},lt=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{style:nt,icon:"check",size:"small",onClick:rt("valid",e)},"Valid"),l.a.createElement(U.a,{style:nt,icon:"pushpin",size:"small",onClick:rt("pin",e)},"Always valid"),l.a.createElement(U.a,{style:nt,icon:"warning",size:"small",type:"danger",onClick:rt("report",e)},"Report"))},ct=function(e){return"valid"===e||"pin"===e?"#0F0":"report"===e?"red":"yellow"},ot=function(e,t,a,n,r){var l=e.xMin,c=e.yMin,o=c/t,i=l/t;return{width:(e.xMax-l)/t+1,height:(e.yMax-c)/t+1,top:o,left:i+10,border:"1px solid ".concat(ct(r)),position:"absolute",backgroundImage:n?'url("'.concat(a,'")'):"none",backgroundPosition:"".concat(-i,"px ").concat(-o,"px")}},it=function(e){var t=e.setPages,a=e.projectId,n=e.folder,c=e.id,o=e.index,i=e.originalWidth,s=e.zone,u=e.status,m=e.width,p=Object(r.useState)(),d=Object(we.a)(p,2),f=d[0],E=d[1];Object(r.useEffect)((function(){h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=E,e.next=3,h.a.awrap(G(a,"base",c,m));case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}))}),[]);var g=Object(r.useState)(!1),v=Object(we.a)(g,2),w=v[0],b=v[1],y=i/m;return l.a.createElement(F.a,{key:"".concat(c,"-").concat(o),content:l.a.createElement(lt,{index:o,timestamp:n,id:c,projectId:a,setPages:t}),trigger:"click"},l.a.createElement("div",{style:ot(s,y,f,w,u),onMouseOver:function(){return b(!0)},onMouseOut:function(){return b(!1)}}))},st=function(e){var t=e.zones;return l.a.createElement("p",null,l.a.createElement("b",null,"Zone:"),"\xa0",[["diff"],["valid","pin"],["report"]].map((function(e){var a=Object(et.a)(e),n=a[0],r=a.slice(1);return l.a.createElement(l.a.Fragment,{key:n},l.a.createElement("span",{style:{marginLeft:10,color:ct(n)}},"\u25a0")," ",l.a.createElement("b",null,function(e,t){return e.filter((function(e){var a=e.status;return t.includes(a)})).length}(t,[n].concat(Object(Xe.a)(r))))," ",n)})))},ut=function(e){var t=e.diff;return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement(R.a,{type:"picture",theme:"outlined"}),"\xa0 Pixel diff ratio: ",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e)return e;var a=t-1-Math.floor(Math.log(e)/Math.log(10));return e.toFixed(a)}(t.pixelDiffRatio)),t.zones&&t.zones.length>0&&l.a.createElement(st,{zones:t.zones}))},mt=function(e){var t=e.diff;return t?l.a.createElement(ut,{diff:t}):l.a.createElement("div",null,l.a.createElement(R.a,{type:"picture",theme:"outlined"}),"\xa0 New screenshot ",l.a.createElement(Ye.a,{color:"green"},"New"))},pt=new(a(558))({fg:"#333"}),dt={marginBottom:10},ft=function(e){var t=e.pageError,a=e.url,n=e.png;return l.a.createElement(l.a.Fragment,null,t&&l.a.createElement(Le.a,{message:l.a.createElement("div",{dangerouslySetInnerHTML:{__html:pt.toHtml(t)}}),type:"warning",style:dt}),l.a.createElement("p",null,l.a.createElement(R.a,{type:"link"})," ",l.a.createElement("a",{href:a},a)),n?l.a.createElement(mt,{diff:n.diff}):l.a.createElement("p",null,l.a.createElement(R.a,{type:"picture",theme:"outlined"})," No screenshot available"))},Et=function(e){var t=e.timestamp,a=e.id,n=e.status,r=e.projectId,l=e.setPages;return function(){var e;return h.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,h.a.awrap(K(r,t.toString(),a,n));case 3:e=c.sent,l(e),at.a.success('All zone are set to "'.concat(n,'".'),2),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(0),L.a.error({message:"Something went wrong!",description:c.t0.toString()});case 11:case"end":return c.stop()}}),null,null,[[0,8]])}},gt=function(e){var t=e.status,a=e.type;return l.a.createElement(R.a,{type:a,title:'Set all zone to "'.concat(t,'".'),onClick:Et(e)})},ht=function(e){var t=e.projectId,a=e.timestamp,n=e.id;return function(){return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.awrap(Y(t,a.toString(),n));case 3:at.a.success("Page pinned as reference for comparison.",2),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),L.a.error({message:"Something went wrong!",description:e.t0.toString()});case 9:case"end":return e.stop()}}),null,null,[[0,6]])}},vt=function(e){return function(e){return l.a.createElement(R.a,{type:"pushpin",title:"pin as reference for comparison",onClick:ht(e)})}(e)},wt=a(251),bt=a.n(wt),yt=function(e){var t=e.projectId,a=e.folder,n=e.id,c=e.onImg,o=void 0===c?function(){}:c,i=e.width,s=void 0===i?Ce:i,u=e.children,m=Object(r.useState)(),p=Object(we.a)(m,2),d=p[0],f=p[1];return Object(r.useEffect)((function(){h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,h.a.awrap(G(t,a,n,s));case 3:e.t1=e.sent,(0,e.t0)(e.t1),o();case 6:case"end":return e.stop()}}))}),[]),d?l.a.createElement("div",{style:Re},u,l.a.createElement("img",{style:{width:s},alt:"",src:d})):null},jt=function(e){var t=e.projectId,a=e.folder,n=e.id,r=e.zones,c=e.originalWidth,o=void 0===c?0:c,i=e.width,s=void 0===i?Ce:i,u=e.setPages,m=Object(w.a)(e,["projectId","folder","id","zones","originalWidth","width","setPages"]);return l.a.createElement(yt,Object.assign({projectId:t,folder:a,id:n,width:s},m),r&&r.map((function(e,r){var c=e.zone,i=e.status;return l.a.createElement(it,{projectId:t,folder:a,id:n,width:s,index:r,originalWidth:o,status:i,zone:c,key:"zone-".concat(n,"-").concat(r),setPages:u})})))},xt=function(e){return function(){e(!0)}},It=function(e){return function(){e(!1)}},St=function(e){var t=e.setPages,a=e.projectId,n=e.timestamp,r=e.id,c=e.png,o=e.url,i=e.pageError,s=l.a.useState(!1),u=Object(we.a)(s,2),m=u[0],p=u[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(bt.a,{title:"",visible:m,onCancel:It(p),footer:null,width:c.width+40},l.a.createElement("div",{style:{position:"relative"}},l.a.createElement(jt,{setPages:t,projectId:a,folder:n,id:r,zones:c.diff&&c.diff.zones,originalWidth:c.width,width:c.width}),l.a.createElement(ft,{url:o,pageError:i,png:c}))),l.a.createElement(R.a,{type:"fullscreen",title:"fullscreen",onClick:xt(p)}))},kt=function(e){var t=e.setPages,a=e.projectId,n=e.timestamp,r=e.id,c=e.png,o=e.url,i=e.pageError;return[c&&l.a.createElement(St,{setPages:t,projectId:a,png:c,id:r,timestamp:n,url:o,pageError:i})].concat([l.a.createElement(gt,{type:"check",setPages:t,projectId:a,timestamp:n,id:r,status:"valid"}),l.a.createElement(gt,{type:"warning",setPages:t,projectId:a,timestamp:n,id:r,status:"report"}),l.a.createElement(vt,{projectId:a,timestamp:n,id:r})])},Ot=function(e){return ne=e},Pt=function(){ne&&ne.layout(),clearTimeout(re),re=setTimeout((function(){ne&&ne.layout()}),500)},Rt=function(e,t,a,n){return function(){var r;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,n(!0),l.next=4,h.a.awrap(e());case 4:r=l.sent,t(r),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(0),a(l.t0);case 11:n(!1);case 12:case"end":return l.stop()}}),null,null,[[0,8]])}},Ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,n=l.a.useState(a),r=Object(we.a)(n,2),c=r[0],o=r[1],i=l.a.useState(),s=Object(we.a)(i,2),u=s[0],m=s[1],p=l.a.useState(!1),d=Object(we.a)(p,2),f=d[0],E=d[1],g=Rt(e,o,m,E);return l.a.useEffect((function(){g()}),t),{loading:f,result:c,call:g,error:u,setResult:o}},Ft=function(e){var t=e.projectId,a=e.timestamp,n=e.lastUpdate,r=Ct((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","getPages",t)}(t,a)}),[n]),c=r.result,o=r.error,i=r.setResult;return o?l.a.createElement(Me,{description:o.toString()}):l.a.createElement(Qe,{response:c,withFilters:Ze},(function(e){return e?l.a.createElement(Pe.a,{style:Te,options:ze,ref:function(e){Ot(e&&e.masonry)}},e.map((function(e){var n=e.id,r=e.url,c=e.png,o=e.error;return l.a.createElement(ke.a,{key:n,style:Fe,cover:c&&l.a.createElement(jt,{projectId:t,folder:a,id:n,zones:c.diff&&c.diff.zones,originalWidth:c.width,onImg:Pt,setPages:i}),actions:kt({setPages:i,projectId:t,id:n,timestamp:a,png:c,url:r,pageError:o})},l.a.createElement(ft,{url:r,pageError:o,png:c}))}))):l.a.createElement(Ie.a,null)}))},Tt=a(253),zt=a.n(Tt),At=(a(581),a(252)),Lt=a.n(At),Mt=function(e,t,a){return function(n){var r,l;return h.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,r=n?"done":"review",c.next=4,h.a.awrap(X(e,t,r));case 4:l=c.sent,a(l),at.a.success('Status set to "'.concat(r,'".'),2),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(0),L.a.error({message:"Something went wrong!",description:c.t0.toString()});case 12:case"end":return c.stop()}}),null,null,[[0,9]])}},Ut=function(e){var t=e.timestamp,a=e.status,n=e.projectId,r=e.setCrawler;return l.a.createElement(Lt.a,{checkedChildren:"done",unCheckedChildren:"review",checked:"done"===a,onChange:Mt(n,t.toString(),r)})},Bt=function(e){var t=Ct((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","loadProject",t)}(e)})),a=t.result,n=t.setResult,r=t.error;return r&&L.a.warning({message:"Something went wrong while loading project.",description:r.toString()}),{project:a,setProject:n}},Dt=function(e){var t=e.projectId,a=Bt(t).project;return a?l.a.createElement("p",null,l.a.createElement("b",null,"Project:")," ",l.a.createElement(f.b,{to:W(a.id)},a.name)):null},Nt=m.a.Title,Wt={color:"#faad29"},Ht={color:"#999",fontSize:11},Vt=function(e){var t=e.crawler,a=t.timestamp,n=t.url,r=t.diffZoneCount,c=t.errorCount,o=t.status,i=t.urlsCount,s=t.inQueue,u=t.startAt,m=t.lastUpdate,p=t.limit,d=t.viewport,f=e.projectId,E=e.setCrawler,g=i+s,h=Math.floor(i/g*100),v=pe(d);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Nt,{level:3},Ke(a)),(r>0||c>0)&&l.a.createElement("p",null,l.a.createElement(Ut,{setCrawler:E,projectId:f,status:o,timestamp:a})),l.a.createElement(Dt,{projectId:f}),l.a.createElement("p",null,l.a.createElement("b",null,"URL:")," ",n),l.a.createElement("p",null,l.a.createElement("b",null,"Screen:")," ",v),l.a.createElement("p",null,l.a.createElement("b",null,"URL crawled:")," ",i,void 0!==p&&p>0&&l.a.createElement("span",{style:Ht}," (with limit set to ",p,")")),l.a.createElement("p",null,l.a.createElement("b",null,"Duration:")," ",Object($e.duration)(m-u).format("h [hrs], m [min], s [sec]")),s>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(zt.a,{percent:h}),l.a.createElement("p",null,l.a.createElement("b",null,"In queue:")," ",s)),c>0&&l.a.createElement("p",{style:Wt},l.a.createElement(R.a,{type:"exclamation-circle"})," ",c," error(s) founds"))},qt=function(e,t){var a=Ct((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","getCrawler",t)}(e,t)}));return{crawler:a.result,call:a.call,error:a.error,setCrawler:a.setResult}},Jt=function(e){var t=e.match.params,a=t.timestamp,n=t.projectId,r=qt(n,a),c=r.error,o=r.call,i=r.crawler,s=r.setCrawler;if(function(e,t){l.a.useEffect((function(){clearTimeout(le),(null===e||void 0===e?void 0:e.inQueue)&&(le=setTimeout((function(){t()}),1e3))}),[e])}(i,o),c)return l.a.createElement(Me,{description:c.toString()});var u=null===i||void 0===i?void 0:i.lastUpdate;return i?l.a.createElement(l.a.Fragment,null,l.a.createElement(Vt,{crawler:i,projectId:n,setCrawler:s}),l.a.createElement(Ft,{timestamp:a,lastUpdate:u,projectId:n})):l.a.createElement(Ie.a,null)},Zt=function(e){var t=e.projectId,a=e.id,n=e.url,r=e.viewport,c=e.onImg,o=e.png;return l.a.createElement(ke.a,{style:Fe,cover:o&&l.a.createElement(yt,{folder:"base",id:a,onImg:c,projectId:t}),actions:[l.a.createElement(R.a,{type:"delete",title:"Delete pin",onClick:function(){return at.a.warn("To be implemented.",2)}}),l.a.createElement(f.b,{to:{pathname:D(t,a),state:{pattern:n}}},l.a.createElement(R.a,{type:"code",title:"Insert code while crawling"}))]},l.a.createElement("p",null,l.a.createElement(R.a,{type:"link"})," ",l.a.createElement("a",{href:n},n)),!o&&l.a.createElement("p",null,l.a.createElement(R.a,{type:"picture",theme:"outlined"})," No screenshot available"),r&&l.a.createElement("p",null,l.a.createElement(R.a,{type:"picture",theme:"outlined"})," ",pe(r)))},_t=function(e){var t=l.a.useState([]),a=Object(we.a)(t,2),n=a[0],r=a[1],c=l.a.useState(),o=Object(we.a)(c,2),i=o[0],s=o[1];return l.a.useEffect((function(){!function(e,t,a){var n;h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.a.awrap(_(e));case 3:n=r.sent,t(n),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),a(r.t0);case 10:case"end":return r.stop()}}),null,null,[[0,7]])}(e,r,s)}),[]),{pins:n,error:i}},Qt=m.a.Title,Gt=function(e){var t=e.match.params.projectId,a=_t(t),n=a.pins,r=a.error;return r?l.a.createElement(Me,{description:r.toString()}):l.a.createElement(l.a.Fragment,null,l.a.createElement(Qt,{level:3},"Pins"),l.a.createElement(Dt,{projectId:t}),l.a.createElement(Qe,{response:n},(function(e){return e?l.a.createElement(Pe.a,{style:Te,options:ze,ref:function(e){Ot(e&&e.masonry)}},e.map((function(e){var a=e.id,n=e.url,r=e.png,c=e.viewport;return l.a.createElement(Zt,{projectId:t,id:a,key:a,url:n,png:r,viewport:c,onImg:Pt})}))):l.a.createElement(Ie.a,null)})))},Yt=a(254),$t=a.n(Yt),Kt=(a(592),a(594),m.a.Paragraph),Xt=m.a.Text,ea=function(e){var t=e.full,a=void 0===t||t;return l.a.createElement(oe,null,l.a.createElement(Kt,null,"Inject some code in the crawler while parsing the page. This code will be executed just after the page finish loaded, before to make the screenshot and before extracting the links. ",a&&l.a.createElement(l.a.Fragment,null,"You need to export a function that will take as first parameter the ",l.a.createElement(Xt,{code:!0},"page")," coming from Puppeteer.")),a&&l.a.createElement(Kt,null,l.a.createElement(Xt,{code:!0},"module.exports = async (page) => ...some code")))},ta={border:"1px solid #EEE",marginBottom:15,marginRight:15,float:"left"},aa=(Object(v.a)({},Fe,{float:"left"}),{marginBottom:15}),na={marginRight:10},ra={maxWidth:500,margin:"0px 0px 10px 0px"},la=a(255),ca=a.n(la),oa=a(43),ia=a.n(oa),sa=m.a.Paragraph,ua=function(){at.a.warn("To be implemented.",2)},ma=function(e,t,a,n){return function(r){r.preventDefault(),n((function(n,r){n||function(e,t,a,n){h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,h.a.awrap(Q(e,Object(v.a)({id:t,source:a},n)));case 3:at.a.success("Code saved.",2),r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),L.a.error({message:"Something went wrong!",description:r.t0.toString()});case 9:case"end":return r.stop()}}),null,null,[[0,6]])}(e,t,a,r)}))}},pa=O.a.create({name:"code"})((function(e){var t,a=e.projectId,n=e.setSource,r=e.id,c=e.code,o=e.form,i=o.getFieldDecorator,s=o.validateFields,u=e.location.state;return l.a.createElement(O.a,{onSubmit:ma(a,r,c.source,s)},l.a.createElement(O.a.Item,{style:ra},i("name",{initialValue:c.name||""})(l.a.createElement(y.a,{addonBefore:"Name"}))),l.a.createElement(O.a.Item,{style:ra},i("pattern",{rules:[{required:!0,message:"Please input a pattern!"}],initialValue:c.pattern||u&&u.pattern||""})(l.a.createElement(y.a,{addonBefore:"Pattern"}))),l.a.createElement(oe,null,l.a.createElement(sa,null,"Pattern is using ",l.a.createElement("a",{href:"https://www.npmjs.com/package/minimatch",target:"_blank"},"minimatch")," to match the urls to inject the code. It works by converting glob expressions into JavaScript RegExp objects.")),l.a.createElement("div",{style:aa},l.a.createElement(U.a,{icon:"save",htmlType:"submit",style:na},"Save"),l.a.createElement(U.a,{icon:"caret-right",onClick:ua,style:na},"Preview"),l.a.createElement(ca.a,{overlay:(t=n,l.a.createElement(ia.a,null,l.a.createElement(ia.a.Item,{key:"1",onClick:function(){t('module.exports = async function run(page) {\n    await page.evaluate(() => {\n        const div = document.createElement("div");\n        div.innerHTML = "Test-crawler is awesome!";\n        document.body.insertBefore(div, document.body.firstChild);\n    });\n}')}},"Test-crawler is awesome"),l.a.createElement(ia.a.Item,{key:"2",onClick:function(){t("module.exports = async function run(page) {\n    return await page.evaluate(() => {\n        Array.from(document.body.getElementsByTagName(\"a\"))\n             .filter(a => !a.href)\n             .forEach(a => a.click());\n        return Array.from(document.links).map(\n            link => link.href.replace('/?', '/iframe.html?')\n        );\n    });\n}")}},"Storybook"),l.a.createElement(ia.a.Item,{key:"3",onClick:function(){t("// expect library from jest is installed by default\n// but you can use any assertion tool of your choice\n// just install it and use it here :D\nconst expect = require('expect');\n\nmodule.exports = async function run(page) {\n  await expect(page.title()).resolves.toMatch('React App');\n  expect('a').toBe('b'); // fail\n}")}},"Expect assetion example")))},l.a.createElement(U.a,{style:na},"Code snippet ",l.a.createElement(R.a,{type:"down"})))))})),da=m.a.Title,fa=function(e,t){return function(a){t(Object(v.a)({},e,{source:a}))}},Ea=function(e){var t=e.match.params,a=t.id,n=t.projectId,r=e.location,c=Ct((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","getCode",t)}(n,a)})),o=c.error,i=c.result,s=c.setResult;return o?l.a.createElement(Me,{description:o.toString()}):l.a.createElement(l.a.Fragment,null,l.a.createElement(da,{level:3},"Add some code"),i?l.a.createElement(O.a,null,l.a.createElement(ea,null),l.a.createElement(Dt,{projectId:n}),l.a.createElement(pa,{projectId:n,id:a,code:i,setSource:fa(i,s),location:r}),l.a.createElement($t.a,{mode:"javascript",theme:"tomorrow",onChange:fa(i,s),fontSize:14,value:i.source.length?i.source:"module.exports = async function run(page) {\n// your code\n}",style:ta})):l.a.createElement(Ie.a,null))},ga=m.a.Title,ha=function(){var e=l.a.useState(),t=Object(we.a)(e,2),a=t[0],n=t[1];return l.a.useEffect((function(){!function(e){h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,h.a.awrap(V());case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}))}(n)}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(ga,{level:3},"Settings"),a?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement("b",null,"Dir:")," ",a.dir)):l.a.createElement(Ie.a,null),l.a.createElement("p",null,l.a.createElement(U.a,{icon:"caret-right",size:"small",onClick:te},"Start crawlers")))},va=m.a.Title,wa=m.a.Text,ba=function(e){var t=e.projectId,a=Ct((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(H.isomorRemote)("server-service","test-crawler","getCodes",t)}(t)})),n=a.error,r=a.result;return n?l.a.createElement(Me,{description:n.toString()}):l.a.createElement(l.a.Fragment,null,l.a.createElement(va,{level:3},"Codes"),l.a.createElement(ea,{full:!1}),r?l.a.createElement(ye.a,{bordered:!0,dataSource:Object.values(r),renderItem:function(e){var a=e.id,n=e.name,r=e.pattern;return l.a.createElement(ye.a.Item,{actions:[l.a.createElement(f.b,{to:D(t,a)},"Edit")]},l.a.createElement(ye.a.Item.Meta,{title:l.a.createElement(f.b,{to:D(t,a)},n," ",l.a.createElement(wa,{code:!0},r))}))}}):l.a.createElement(Ie.a,null),l.a.createElement("br",null),l.a.createElement(f.b,{to:D(t,Math.floor(Date.now()/1e3).toString())},l.a.createElement(U.a,{icon:"plus",size:"small"},"New code")))},ya=function(e,t){return function(){var a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.awrap(ee(t));case 3:a=n.sent,e.push(N(t,a.crawler.timestamp.toString())),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),L.a.error({message:"Something went wrong!",description:n.t0.toString()});case 10:case"end":return n.stop()}}),null,null,[[0,7]])}},ja=function(e,t){var a=e.name,n=e.id,r=e.crawlerInput;return function(e){var l,c;return h.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return l=e.target.checked,o.next=3,h.a.awrap(Z(Object(v.a)({},r,{autopin:l}),a,n));case 3:c=o.sent,t(c);case 5:case"end":return o.stop()}}))}},xa=function(e,t,a,n){return n>0?"loading":e||0!==t?"done"===a?"issues-close":"exclamation-circle":"check"},Ia=function(e){var t=e.match.params.projectId,a=e.history,n=Bt(t),r=n.project,c=n.setProject,o=function(e){var t=Ct((function(){var t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(q(e));case 2:return t=a.sent,a.abrupt("return",t.sort((function(e,t){var a=e.timestamp;return t.timestamp-a})));case 4:case"end":return a.stop()}}))})),a=t.result,n=t.setResult,r=t.error;return r&&L.a.warning({message:"Something went wrong while loading crawlers from project.",description:r.toString()}),{crawlers:a,setCrawlers:n}}(t).crawlers;return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a.Title,{level:3},"Project"),r?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement("b",null,"Name:")," ",r.name),l.a.createElement("p",null,l.a.createElement("b",null,"URL:")," ",r.crawlerInput.url),l.a.createElement("p",null,l.a.createElement("b",null,"Screen:")," ",pe(r.crawlerInput.viewport)),l.a.createElement("p",null,l.a.createElement("b",null,"Method:"),"urls"===r.crawlerInput.method?l.a.createElement(l.a.Fragment,null," ",l.a.createElement(R.a,{type:"ordered-list"})," URLs list"):l.a.createElement(l.a.Fragment,null," ",l.a.createElement(R.a,{type:"radar-chart"})," Spider bot",!!r.crawlerInput.limit&&l.a.createElement("span",{style:{color:"#999",fontSize:12}}," (Limit: ",r.crawlerInput.limit,")"))),l.a.createElement("p",null,l.a.createElement(S.a,{checked:r.crawlerInput.autopin,onChange:ja(r,c)},"Automatically pin new page founds.")),l.a.createElement("p",null,l.a.createElement(U.a,{icon:"caret-right",size:"small",onClick:ya(a,t)},"Run")," \xa0",l.a.createElement(f.b,{to:B(t)},l.a.createElement(U.a,{icon:"pushpin",size:"small"},"Pins"))),l.a.createElement(ye.a,{itemLayout:"horizontal",bordered:!0,dataSource:o,renderItem:function(e){var a=e.timestamp,n=e.diffZoneCount,r=e.errorCount,c=e.status,o=e.inQueue;return l.a.createElement(ye.a.Item,{actions:[l.a.createElement(f.b,{to:N(t,a.toString())},"Open")]},l.a.createElement(ye.a.Item.Meta,{title:l.a.createElement(f.b,{to:N(t,a.toString())},Ke(a)),description:l.a.createElement(l.a.Fragment,null,l.a.createElement(R.a,{type:xa(n,r,c,o)}),l.a.createElement("span",null," Diff: ",n," - Error: ",r," - In queue: ",o))}))}})):l.a.createElement(Ie.a,null),l.a.createElement("br",null),l.a.createElement(ba,{projectId:t}))},Sa=function(e){var t=e.match.params.projectId,a=Bt(t).project;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a.Item,null,l.a.createElement(f.b,{to:"/"},"Projects")),l.a.createElement(d.a.Item,null,l.a.createElement(f.b,{to:W(t)},null===a||void 0===a?void 0:a.name)))},ka=function(e){var t=e.match.params,a=t.projectId,n=t.timestamp,r=Bt(a).project;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a.Item,null,l.a.createElement(f.b,{to:"/"},"Projects")),l.a.createElement(d.a.Item,null,l.a.createElement(f.b,{to:W(a)},null===r||void 0===r?void 0:r.name)),l.a.createElement(d.a.Item,null,l.a.createElement(f.b,{to:N(a,n)},"Results: ",Ke(parseInt(n,10)))))},Oa=function(e){var t=e.match.params.projectId,a=Bt(t).project;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a.Item,null,l.a.createElement(f.b,{to:"/"},"Projects")),l.a.createElement(d.a.Item,null,l.a.createElement(f.b,{to:W(t)},null===a||void 0===a?void 0:a.name)),l.a.createElement(d.a.Item,null,l.a.createElement(f.b,{to:B(t)},"Pins")))},Pa=function(e){var t=e.match.params,a=t.projectId,n=t.id,r=Bt(a).project;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a.Item,null,l.a.createElement(f.b,{to:"/"},"Projects")),l.a.createElement(d.a.Item,null,l.a.createElement(f.b,{to:W(a)},null===r||void 0===r?void 0:r.name)),l.a.createElement(d.a.Item,null,l.a.createElement(f.b,{to:D(a,n)},"Code")))},Ra=s.a.Content,Ca=s.a.Header,Fa=m.a.Title,Ta={minHeight:"100vh"},za={color:"#fff",marginTop:15,marginRight:15,float:"left"},Aa={background:"#fff",padding:24,margin:10,minHeight:280},La=function(){return l.a.createElement(f.a,null,l.a.createElement(s.a,{style:Ta},l.a.createElement(Ca,null,l.a.createElement(f.b,{to:"/"},l.a.createElement(Fa,{level:3,style:za},"Test-crawler")),l.a.createElement(ia.a,{theme:"dark",mode:"horizontal",style:{lineHeight:"64px"}},l.a.createElement(ia.a.Item,{key:"projects"},l.a.createElement(R.a,{type:"folder"}),l.a.createElement("span",{className:"nav-text"},"Projects"),l.a.createElement(f.b,{to:"/"})),l.a.createElement(ia.a.Item,{key:"settings",style:{float:"right"}},l.a.createElement(f.b,{to:"/settings"},l.a.createElement(R.a,{type:"setting"}))))),l.a.createElement(d.a,{style:{margin:"10px 0 0 10px"}},l.a.createElement(E.a,{path:W(":projectId"),exact:!0,component:Sa}),l.a.createElement(E.a,{path:N(":projectId",":timestamp"),exact:!0,component:ka}),l.a.createElement(E.a,{path:B(":projectId"),exact:!0,component:Oa}),l.a.createElement(E.a,{path:D(":projectId",":id"),exact:!0,component:Pa})),l.a.createElement(Ra,{style:Aa},l.a.createElement(E.a,{path:"/",exact:!0,component:je}),l.a.createElement(E.a,{path:"/new",exact:!0,component:ve}),l.a.createElement(E.a,{path:B(":projectId"),exact:!0,component:Gt}),l.a.createElement(E.a,{path:"/settings",exact:!0,component:ha}),l.a.createElement(E.a,{path:D(":projectId",":id"),exact:!0,component:Ea}),l.a.createElement(E.a,{path:N(":projectId",":timestamp"),component:Jt}),l.a.createElement(E.a,{path:W(":projectId"),exact:!0,component:Ia}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(n.a,null,l.a.createElement(La,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[258,1,2]]]);
//# sourceMappingURL=main.507ffeb4.chunk.js.map