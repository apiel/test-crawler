(this["webpackJsonptest-crawler"]=this["webpackJsonptest-crawler"]||[]).push([[0],{265:function(e,t,n){e.exports=n(626)},272:function(e,t,n){},273:function(e,t,n){},626:function(e,t,n){"use strict";n.r(t);var a=n(18),r=n(0),l=n.n(r),c=n(7),i=n.n(c),o=(n(272),n(113)),s=n.n(o),u=n(16),m=n.n(u),p=n(25),d=n(51),f=(n(273),n(13)),h=n.n(f),E=n(42),g=n(111),v=n(72),w=n.n(v),y=n(251),b=n.n(y),x=n(252),k=n.n(x),j=n(23),S=n.n(j),O=n(8),I=n.n(O),R=n(104),C=n.n(R),T=n(112),z=n.n(T),F=n(29),P=n.n(F),A=n(20),L=n.n(A),M=function(e){return"/code/".concat(e)},N=function(e){return"/results/".concat(e)},B=n(24);function U(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getSettings",t)}function D(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getCrawlers",t)}function W(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","loadProjects",t)}function J(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","saveProject",t)}function V(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getCrawler",t)}function q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getPages",t)}function H(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getPins",t)}function Z(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","setCode",t)}function _(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getCode",t)}function G(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getCodes",t)}function Q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","getThumbnail",t)}function Y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","pin",t)}function $(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","setZoneStatus",t)}function K(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","setZonesStatus",t)}function X(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(B.isomorRemote)("server-service","test-crawler","setStatus",t)}var ee,te,ne,ae,re={lineHeight:1.2,borderLeft:"8px solid #EEE",paddingLeft:15,color:"#666",textAlign:"justify"},le=function(e){var t=e.children;return l.a.createElement("div",{style:re},t)},ce=n(50),ie=n.n(ce),oe=[{name:"Desktop - 800x600",value:{width:800,height:600}},{name:"Desktop - 1024x768",value:{width:1024,height:768}},{name:"Desktop - 1920x1080",value:{width:1920,height:1080}},{name:"iPhone 5 - 320x568",value:{width:320,height:568,isMobile:!0,hasTouch:!0}},{name:"iPhone 6 - 375x667",value:{width:375,height:667,isMobile:!0,hasTouch:!0}},{name:"Ipad - 768x1024",value:{width:768,height:1024,isMobile:!0,hasTouch:!0}},{name:"Galaxy S5 - 360x640",value:{width:360,height:640,isMobile:!0,hasTouch:!0}}],se=oe.map((function(e){var t=e.value,n=Object(g.a)(e,["value"]);return Object(E.a)({},n,{value:JSON.stringify(t)})})),ue=function(e){var t=JSON.stringify(e),n=se.findIndex((function(e){return e.value===t}));if(-1!==n)return se[n].name;var a=e.width,r=e.height,l=e.isMobile;return"".concat(a,"x").concat(r).concat(l&&" mobile")},me=ie.a.Option,pe=function(e){return(0,e.getFieldDecorator)("viewport",{initialValue:e.initialValue||se[0].name})(l.a.createElement(ie.a,null,se.map((function(e){var t=e.value,n=e.name;return l.a.createElement(me,{key:t,value:t},n)}))))},de={marginRight:10,display:"inline-block"},fe={marginRight:30},he=function(e,t){return function(n){n.preventDefault(),t((function(t,n){t||function(e,t){var n,a,r;h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n=t.name,a=t.viewport,r=Object(g.a)(t,["name","viewport"]),l.prev=1,l.next=4,h.a.awrap(J(Object(E.a)({},r,{viewport:JSON.parse(a)}),n));case 4:e.push("/"),l.next=10;break;case 7:l.prev=7,l.t0=l.catch(1),P.a.error({message:"Something went wrong!",description:l.t0.toString()});case 10:case"end":return l.stop()}}),null,null,[[1,7]])}(e,n)}))}},Ee=S.a.create({name:"start_crawler"})((function(e){var t=e.history,n=e.form,a=n.getFieldDecorator,r=n.validateFields,c=n.getFieldValue;return l.a.createElement(S.a,{onSubmit:he(t,r)},l.a.createElement(S.a.Item,null,a("name",{rules:[{required:!0,message:"Please give a name to the project."}]})(l.a.createElement(w.a,{addonBefore:"Name",placeholder:"Project name"}))),l.a.createElement(S.a.Item,null,a("url",{rules:[{required:!0,message:"Please input an URL to crawl."}]})(l.a.createElement(w.a,{placeholder:"https://domain.com/",addonBefore:"URL",addonAfter:l.a.createElement(pe,{getFieldDecorator:a,initialValue:JSON.stringify(oe[0].value)})}))),l.a.createElement(S.a.Item,null,l.a.createElement(S.a.Item,{style:de},a("method",{initialValue:"spiderbot"})(l.a.createElement(z.a.Group,{size:"small",style:fe},l.a.createElement(z.a.Button,{value:"spiderbot"},l.a.createElement(I.a,{type:"radar-chart"})," Spider bot"),l.a.createElement(z.a.Button,{value:"urls"},l.a.createElement(I.a,{type:"ordered-list"})," URLs list")))),"spiderbot"===c("method")&&l.a.createElement(S.a.Item,{style:de},"Limit ",a("limit")(l.a.createElement(b.a,{min:0,size:"small"})),"\xa0",l.a.createElement(C.a,{content:l.a.createElement("div",null,l.a.createElement("b",null,"Limit the number of sibling pages. "),"For example, with the urls:",l.a.createElement("ul",null,l.a.createElement("li",null,"/item/1"),l.a.createElement("li",null,"/item/2"),l.a.createElement("li",null,"/item/3"),l.a.createElement("li",null,"/item/4"))," using the limit ",l.a.createElement("b",null,"2")," will only crawl ",l.a.createElement("b",null,"/item/1")," and ",l.a.createElement("b",null,"/item/2"),".",l.a.createElement("br",null),l.a.createElement("br",null),"Use ",l.a.createElement("b",null,"0")," to skip the limit."),trigger:"click",overlayStyle:{width:200}},l.a.createElement(I.a,{type:"question-circle"}))),l.a.createElement(le,null,l.a.createElement(m.a.Paragraph,{ellipsis:{rows:1,expandable:!0}},l.a.createElement("b",null,"Spider bot")," crawling method will get all the links inside the page of the given URL and crawl the children. It will then continue do the same with the children till no new link is found. Be careful if you have big website, this is most likely not the right solution for you."),l.a.createElement(m.a.Paragraph,{ellipsis:{rows:1,expandable:!0}},l.a.createElement("b",null,"URLs list")," crawling method will crawl a specific sets of URLs. In the URL input field you must provide an endpoint containing a list of URLs (a simple text format, with one URL per line). The crawler will crawl each of those URL only and will not try to find links in the page."))),l.a.createElement(S.a.Item,null,a("autopin",{valuePropName:"checked"})(l.a.createElement(k.a,null,"Automatically pin new page founds."))),l.a.createElement(S.a.Item,null,l.a.createElement(S.a.Item,{style:de},l.a.createElement(L.a,{type:"primary",icon:"plus",htmlType:"submit"},"Create"))))})),ge=n(27),ve=n(61),we=n.n(ve),ye=function(){var e=l.a.useState([]),t=Object(ge.a)(e,2),n=t[0],a=t[1];return l.a.useEffect((function(){!function(e){var t;h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h.a.awrap(W());case 3:t=n.sent,e(t),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),P.a.warning({message:"Something went wrong while loading presets.",description:n.t0.toString()});case 10:case"end":return n.stop()}}),null,null,[[0,7]])}(a)}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(m.a.Title,{level:3},"Projects"),l.a.createElement(we.a,{itemLayout:"horizontal",dataSource:n,renderItem:function(e){var t=e.name,n=e.crawlerInput.url;return l.a.createElement(we.a.Item,{actions:[l.a.createElement("a",{key:"list-loadmore-edit"},"edit"),l.a.createElement("a",{key:"list-loadmore-more"},"more")]},l.a.createElement(we.a.Item.Meta,{title:l.a.createElement("a",{href:"https://ant.design"},t),description:n}))}}),l.a.createElement(p.b,{to:"/new"},l.a.createElement(L.a,{icon:"plus",size:"small"},"New")))},be=n(31),xe=n.n(be),ke=n(81),je=n.n(ke),Se=n(253),Oe=n.n(Se),Ie=n(110),Re=n.n(Ie),Ce=n(107),Te=n.n(Ce),ze={textAlign:"center"},Fe=300,Pe={width:Fe+20,marginBottom:10},Ae={paddingTop:10,paddingBottom:10},Le={gutter:10,fitWidth:!0},Me=n(38),Ne=n.n(Me),Be={marginLeft:5,marginRight:5},Ue=function(e,t,n){var a=n.timestamp,r=n.id,l=n.index;return function(){var n;return h.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,h.a.awrap($(a.toString(),r,l,t));case 3:n=c.sent,e(n,q,a),Ne.a.success("Page pinned as reference for comparison.",2),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(0),P.a.error({message:"Something went wrong!",description:c.t0.toString()});case 11:case"end":return c.stop()}}),null,null,[[0,8]])}},De=function(e){var t=Object(a.b)().update;return l.a.createElement(l.a.Fragment,null,l.a.createElement(L.a,{style:Be,icon:"check",size:"small",onClick:Ue(t,"valid",e)},"Valid"),l.a.createElement(L.a,{style:Be,icon:"pushpin",size:"small",onClick:Ue(t,"pin",e)},"Always valid"),l.a.createElement(L.a,{style:Be,icon:"warning",size:"small",type:"danger",onClick:Ue(t,"report",e)},"Report"))},We=function(e){return"valid"===e||"pin"===e?"#0F0":"report"===e?"red":"yellow"},Je=function(e,t,n,a,r){var l=e.xMin,c=e.yMin,i=c/t,o=l/t;return{width:(e.xMax-l)/t+1,height:(e.yMax-c)/t+1,top:i,left:o+10,border:"1px solid ".concat(We(r)),position:"absolute",backgroundImage:a?'url("'.concat(n,'")'):"none",backgroundPosition:"".concat(-o,"px ").concat(-i,"px")}},Ve=function(e){var t=e.folder,n=e.id,a=e.index,c=e.originalWidth,i=e.zone,o=e.status,s=e.width,u=Object(r.useState)(),m=Object(ge.a)(u,2),p=m[0],d=m[1];Object(r.useEffect)((function(){h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d,e.next=3,h.a.awrap(Q("base",n,s));case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}))}),[]);var f=Object(r.useState)(!1),E=Object(ge.a)(f,2),g=E[0],v=E[1],w=c/s;return l.a.createElement(C.a,{key:"".concat(n,"-").concat(a),content:l.a.createElement(De,{index:a,timestamp:t,id:n}),trigger:"click"},l.a.createElement("div",{style:Je(i,w,p,g,o),onMouseOver:function(){return v(!0)},onMouseOut:function(){return v(!1)}}))},qe=function(e){var t=e.folder,n=e.id,a=e.zones,c=e.originalWidth,i=void 0===c?0:c,o=e.onImg,s=void 0===o?function(){}:o,u=e.width,m=void 0===u?Fe:u,p=Object(r.useState)(),d=Object(ge.a)(p,2),f=d[0],E=d[1];return Object(r.useEffect)((function(){h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=E,e.next=3,h.a.awrap(Q(t,n,m));case 3:e.t1=e.sent,(0,e.t0)(e.t1),s();case 6:case"end":return e.stop()}}))}),[]),f?l.a.createElement("div",{style:ze},a&&a.map((function(e,a){var r=e.zone,c=e.status;return l.a.createElement(Ve,Object.assign({folder:t,id:n,index:a,originalWidth:i,zone:r,status:c,width:m},{key:"zone-".concat(n,"-").concat(a)}))})),l.a.createElement("img",{style:{width:m},alt:"",src:f})):null},He=n(108),Ze=n.n(He),_e=function(e){var t=e.message,n=void 0===t?"Something went wrong":t,a=e.description;return l.a.createElement(Ze.a,{message:n,description:a,type:"warning",showIcon:!0})},Ge=n(254),Qe=n.n(Ge),Ye={width:Pe.width,marginRight:Le.gutter},$e=function(e,t,n){return function(a){t&&(a.length?(clearTimeout(ee),ee=setTimeout((function(){et(e,Ke(t,a),n)}),500)):et(e,t,n))}},Ke=function(e,t){return new Qe.a(e,{keys:["url","viewport.width","viewport.height","keywords"]}).search(t)},Xe=function(e,t,n){return function(a){t&&(n(a),et(e,t,a))}},et=function(e,t,n){if(t)if(n.length){var a=n.filter((function(e){return!Object.keys(tt).includes(e)})).join(" ");a&&(t=Ke(t,a)),e(t.filter((function(e){var t=!0;if(n.includes("with-diff")){var a=je()(e,"png.diff.pixelDiffRatio");t=t&&a>0}return n.includes("new")&&(t=t&&!!e.png&&!e.png.diff),t})))}else e(t)},tt={"with-diff":"with diff",new:"new"},nt=ie.a.Option,at=function(e){var t=e.children,n=e.response,a=e.withFilters,r=l.a.useState(),c=Object(ge.a)(r,2),i=c[0],o=c[1],s=l.a.useState([]),u=Object(ge.a)(s,2),m=u[0],p=u[1],d=l.a.useState(),f=Object(ge.a)(d,2),h=f[0],E=f[1];return l.a.useEffect((function(){o(n),Xe(E,n,p)(m)}),[n]),l.a.createElement(l.a.Fragment,null,l.a.createElement(ie.a,{mode:"tags",onChange:Xe(E,i,p),tokenSeparators:[","],style:Ye,placeholder:"Search",filterOption:!1,onSearch:$e(E,i,m)},!!a&&Object.keys(a).map((function(e){return l.a.createElement(nt,{key:e},a[e])}))),t(h))},rt=n(256),lt=n.n(rt),ct=n(71),it=function(e){return Object(ct.unix)(e).calendar()},ot=n(264),st=n(255),ut=function(e){var t=e.zones;return l.a.createElement("p",null,l.a.createElement("b",null,"Zone:"),"\xa0",[["diff"],["valid","pin"],["report"]].map((function(e){var n=Object(st.a)(e),a=n[0],r=n.slice(1);return l.a.createElement(l.a.Fragment,{key:a},l.a.createElement("span",{style:{marginLeft:10,color:We(a)}},"\u25a0")," ",l.a.createElement("b",null,function(e,t){return e.filter((function(e){var n=e.status;return t.includes(n)})).length}(t,[a].concat(Object(ot.a)(r))))," ",a)})))},mt=function(e){var t=e.diff;return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement(I.a,{type:"picture",theme:"outlined"}),"\xa0 Pixel diff ratio: ",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e)return e;var n=t-1-Math.floor(Math.log(e)/Math.log(10));return e.toFixed(n)}(t.pixelDiffRatio)),t.zones&&t.zones.length>0&&l.a.createElement(ut,{zones:t.zones}))},pt=function(e){var t=e.diff;return t?l.a.createElement(mt,{diff:t}):l.a.createElement("div",null,l.a.createElement(I.a,{type:"picture",theme:"outlined"}),"\xa0 New screenshot ",l.a.createElement(lt.a,{color:"green"},"New"))},dt=new(n(572))({fg:"#333"}),ft={marginBottom:10},ht=function(e){var t=e.pageError,n=e.url,a=e.png;return l.a.createElement(l.a.Fragment,null,t&&l.a.createElement(Ze.a,{message:l.a.createElement("div",{dangerouslySetInnerHTML:{__html:dt.toHtml(t)}}),type:"warning",style:ft}),l.a.createElement("p",null,l.a.createElement(I.a,{type:"link"})," ",l.a.createElement("a",{href:n},n)),a?l.a.createElement(pt,{diff:a.diff}):l.a.createElement("p",null,l.a.createElement(I.a,{type:"picture",theme:"outlined"})," No screenshot available"))},Et=function(e,t){var n=t.timestamp,a=t.id,r=t.status;return function(){var t;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,h.a.awrap(K(n.toString(),a,r));case 3:t=l.sent,e(t,q,n),Ne.a.success('All zone are set to "'.concat(r,'".'),2),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(0),P.a.error({message:"Something went wrong!",description:l.t0.toString()});case 11:case"end":return l.stop()}}),null,null,[[0,8]])}},gt=function(e){var t=Object(a.b)().update,n=e.status,r=e.type;return l.a.createElement(I.a,{type:r,title:'Set all zone to "'.concat(n,'".'),onClick:Et(t,e)})},vt=function(e){var t=e.timestamp,n=e.id;return function(){return h.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.awrap(Y(t.toString(),n));case 3:Ne.a.success("Page pinned as reference for comparison.",2),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),P.a.error({message:"Something went wrong!",description:e.t0.toString()});case 9:case"end":return e.stop()}}),null,null,[[0,6]])}},wt=function(e){return function(e){return l.a.createElement(I.a,{type:"pushpin",title:"pin as reference for comparison",onClick:vt(e)})}(e)},yt=n(257),bt=n.n(yt),xt=function(e){return function(){e(!0)}},kt=function(e){return function(){e(!1)}},jt=function(e){var t=e.timestamp,n=e.id,a=e.png,r=e.url,c=e.pageError,i=l.a.useState(!1),o=Object(ge.a)(i,2),s=o[0],u=o[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(bt.a,{title:"",visible:s,onCancel:kt(u),footer:null,width:a.width+40},l.a.createElement("div",{style:{position:"relative"}},l.a.createElement(qe,{folder:t,id:n,zones:a.diff&&a.diff.zones,originalWidth:a.width,width:a.width}),l.a.createElement(ht,{url:r,pageError:c,png:a}))),l.a.createElement(I.a,{type:"fullscreen",title:"fullscreen",onClick:xt(u)}))},St=function(e){var t=e.timestamp,n=e.id,a=e.png,r=e.url,c=e.pageError;return[a&&l.a.createElement(jt,{png:a,id:n,timestamp:t,url:r,pageError:c})].concat([l.a.createElement(gt,{type:"check",timestamp:t,id:n,status:"valid",zones:a&&a.diff?a.diff.zones:[]}),l.a.createElement(gt,{type:"warning",timestamp:t,id:n,status:"report",zones:a&&a.diff?a.diff.zones:[]}),l.a.createElement(wt,{timestamp:t,id:n})])},Ot=function(e){return te=e},It=function(){te&&te.layout(),clearTimeout(ne),ne=setTimeout((function(){te&&te.layout()}),500)},Rt=function(e){var t=e.timestamp,n=e.lastUpdate,r=Object(a.c)([n],q,t),c=r.response,i=r.error;return i?l.a.createElement(_e,{description:i.toString()}):l.a.createElement(at,{response:c,withFilters:tt},(function(e){return e?l.a.createElement(Te.a,{style:Ae,options:Le,ref:function(e){Ot(e&&e.masonry)}},e.map((function(e){var n=e.id,a=e.url,r=e.png,c=e.error;return l.a.createElement(Re.a,{key:n,style:Pe,cover:r&&l.a.createElement(qe,{folder:t,id:n,zones:r.diff&&r.diff.zones,originalWidth:r.width,onImg:It}),actions:St({id:n,timestamp:t,png:r,url:a,pageError:c})},l.a.createElement(ht,{url:a,pageError:c,png:r}))}))):l.a.createElement(xe.a,null)}))},Ct=n(260),Tt=n.n(Ct),zt=n(258),Ft=(n(605),n(259)),Pt=n.n(Ft),At=function(e,t){return function(n){var a,r;return h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,a=n?"done":"review",l.next=4,h.a.awrap(X(t,a));case 4:r=l.sent,e(r),Ne.a.success('Status set to "'.concat(a,'".'),2),l.next=12;break;case 9:l.prev=9,l.t0=l.catch(0),P.a.error({message:"Something went wrong!",description:l.t0.toString()});case 12:case"end":return l.stop()}}),null,null,[[0,9]])}},Lt=function(e){var t=e.timestamp,n=e.status,r=Object(a.b)(V,t.toString()).update;return l.a.createElement(Pt.a,{checkedChildren:"done",unCheckedChildren:"review",checked:"done"===n,onChange:At(r,t.toString())})},Mt=m.a.Title,Nt={color:"#faad29"},Bt={marginRight:10},Ut={color:"#999",fontSize:11},Dt=function(e){var t=e.crawler,n=t.timestamp,a=t.url,r=t.diffZoneCount,c=t.errorCount,i=t.status,o=t.urlsCount,s=t.inQueue,u=t.startAt,m=t.lastUpdate,p=t.method,d=t.limit,f=t.autopin,h=t.viewport,E=e.history,g=o+s,v=Math.floor(o/g*100),w=ue(h);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt,{level:3},it(n)),l.a.createElement("p",null,l.a.createElement(L.a,{icon:"retweet",size:"small",onClick:function(){E.push({pathname:"/",search:Object(zt.stringify)({url:a,method:p,limit:d,autopin:f,viewport:JSON.stringify(h)})})},style:Bt},"Re-run"),(r>0||c>0)&&l.a.createElement(Lt,{status:i,timestamp:n})),l.a.createElement("p",null,l.a.createElement("b",null,"URL:")," ",a),l.a.createElement("p",null,l.a.createElement("b",null,"Screen:")," ",w),l.a.createElement("p",null,l.a.createElement("b",null,"URL crawled:")," ",o,void 0!==d&&d>0&&l.a.createElement("span",{style:Ut}," (with limit set to ",d,")")),l.a.createElement("p",null,l.a.createElement("b",null,"Duration:")," ",Object(ct.duration)(m-u).format("h [hrs], m [min], s [sec]")),s>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Tt.a,{percent:v}),l.a.createElement("p",null,l.a.createElement("b",null,"In queue:")," ",s)),c>0&&l.a.createElement("p",{style:Nt},l.a.createElement(I.a,{type:"exclamation-circle"})," ",c," error(s) founds"))},Wt=function(e){var t=e.match.params.timestamp,n=e.history,r=Object(a.b)(),c=r.cache,i=r.update,o=Object(a.c)(V,t),s=o.error,u=o.call,m=o.response;if(l.a.useEffect((function(){!function(e,t,n){if(e){var a=t(D);if(a){var r=a.findIndex((function(t){return t.id===e.id}));-1!==r&&(Oe()(a[r],e)||(a[r]=e,n(a,D)))}}}(m,c,i)}),[m]),s)return l.a.createElement(_e,{description:s.toString()});var p=je()(m,"lastUpdate");return function(e){clearTimeout(ae),ae=setTimeout((function(){e()}),1e3)}(u),m?l.a.createElement(l.a.Fragment,null,l.a.createElement(Dt,{crawler:m,history:n}),l.a.createElement(Rt,{timestamp:t,lastUpdate:p})):l.a.createElement(xe.a,null)},Jt=n(35),Vt=n.n(Jt),qt=n(261),Ht=n.n(qt),Zt=function(e){return 0===e?{borderTop:"1px solid #7e8791"}:{}},_t=function(e,t,n,a){return a>0?"loading":e||0!==t?"done"===n?"issues-close":"exclamation-circle":"check"},Gt=function(){var e=Object(a.c)(D),t=e.response,n=e.error;return n?l.a.createElement(_e,{description:n.toString()}):l.a.createElement(l.a.Fragment,null,l.a.createElement(Vt.a,{theme:"dark",mode:"inline"},l.a.createElement(Vt.a.Item,{key:"new"},l.a.createElement(I.a,{type:"plus"}),l.a.createElement("span",{className:"nav-text"},"Projects"),l.a.createElement(p.b,{to:"/"})),l.a.createElement(Vt.a.Item,{key:"pins"},l.a.createElement(I.a,{type:"pushpin"}),l.a.createElement("span",{className:"nav-text"},"Pins"),l.a.createElement(p.b,{to:"/pins"})),l.a.createElement(Vt.a.Item,{key:"codes"},l.a.createElement(I.a,{type:"code"}),l.a.createElement("span",{className:"nav-text"},"Codes"),l.a.createElement(p.b,{to:"/code"})),t&&function(e){return e.sort((function(e,t){var n=e.timestamp;return t.timestamp-n})).map((function(e,t){var n=e.timestamp,a=e.url,r=e.id,c=e.diffZoneCount,i=e.errorCount,o=e.status,s=e.inQueue;return l.a.createElement(Vt.a.Item,{key:"crawler-".concat(r),title:a,style:Zt(t)},l.a.createElement(I.a,{type:_t(c,i,o,s)}),l.a.createElement("span",{className:"nav-text"},it(n)),l.a.createElement(p.b,{to:N(n)}))}))}(t)),l.a.createElement(Ht.a,{style:{position:"absolute",bottom:15,left:15}},l.a.createElement(p.b,{to:"/settings"},l.a.createElement(I.a,{type:"setting"}))))},Qt=function(e){var t=e.id,n=e.url,a=e.viewport,r=e.onImg,c=e.png;return l.a.createElement(Re.a,{style:Pe,cover:c&&l.a.createElement(qe,{folder:"base",id:t,onImg:r}),actions:[l.a.createElement(I.a,{type:"delete",title:"Delete pin",onClick:function(){return alert("Not yet implemented")}}),l.a.createElement(p.b,{to:{pathname:M(t),state:{pattern:n}}},l.a.createElement(I.a,{type:"code",title:"Insert code while crawling"}))]},l.a.createElement("p",null,l.a.createElement(I.a,{type:"link"})," ",l.a.createElement("a",{href:n},n)),!c&&l.a.createElement("p",null,l.a.createElement(I.a,{type:"picture",theme:"outlined"})," No screenshot available"),a&&l.a.createElement("p",null,l.a.createElement(I.a,{type:"picture",theme:"outlined"})," ",ue(a)))},Yt=m.a.Title,$t=function(){var e=Object(a.c)(H),t=e.response,n=e.error;return n?l.a.createElement(_e,{description:n.toString()}):l.a.createElement(l.a.Fragment,null,l.a.createElement(Yt,{level:3},"Pins"),l.a.createElement(at,{response:t},(function(e){return e?l.a.createElement(Te.a,{style:Ae,options:Le,ref:function(e){Ot(e&&e.masonry)}},e.map((function(e){var t=e.id,n=e.url,a=e.png,r=e.viewport;return l.a.createElement(Qt,{id:t,key:t,url:n,png:a,viewport:r,onImg:It})}))):l.a.createElement(xe.a,null)})))},Kt=n(262),Xt=n.n(Kt),en=(n(622),n(624),m.a.Paragraph),tn=m.a.Text,nn=function(e){var t=e.full,n=void 0===t||t;return l.a.createElement(le,null,l.a.createElement(en,null,"Inject some code in the crawler while parsing the page. This code will be executed just after the page finish loaded, before to make the screenshot and before extracting the links. ",n&&l.a.createElement(l.a.Fragment,null,"You need to export a function that will take as first parameter the ",l.a.createElement(tn,{code:!0},"page")," coming from Puppeteer.")),n&&l.a.createElement(en,null,l.a.createElement(tn,{code:!0},"module.exports = async (page) => ...some code")))},an={border:"1px solid #EEE",marginBottom:15,marginRight:15,float:"left"},rn=(Object(E.a)({},Pe,{float:"left"}),{marginBottom:15}),ln={marginRight:10},cn={maxWidth:500,margin:"0px 0px 10px 0px"},on=n(263),sn=n.n(on),un=m.a.Paragraph,mn=function(){Ne.a.warn("To be implemented.",2)},pn=function(e,t,n){return function(a){a.preventDefault(),n((function(n,a){n||function(e,t,n){h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,h.a.awrap(Z(Object(E.a)({id:e,source:t},n)));case 3:Ne.a.success("Code saved.",2),a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),P.a.error({message:"Something went wrong!",description:a.t0.toString()});case 9:case"end":return a.stop()}}),null,null,[[0,6]])}(e,t,a)}))}},dn=S.a.create({name:"code"})((function(e){var t,n=e.setSource,a=e.id,r=e.code,c=e.form,i=c.getFieldDecorator,o=c.validateFields,s=e.location.state;return l.a.createElement(S.a,{onSubmit:pn(a,r.source,o)},l.a.createElement(S.a.Item,{style:cn},i("name",{initialValue:r.name||""})(l.a.createElement(w.a,{addonBefore:"Name"}))),l.a.createElement(S.a.Item,{style:cn},i("pattern",{rules:[{required:!0,message:"Please input a pattern!"}],initialValue:r.pattern||s&&s.pattern||""})(l.a.createElement(w.a,{addonBefore:"Pattern"}))),l.a.createElement(le,null,l.a.createElement(un,null,"Pattern is using ",l.a.createElement("a",{href:"https://www.npmjs.com/package/minimatch",target:"_blank"},"minimatch")," to match the urls to inject the code. It works by converting glob expressions into JavaScript RegExp objects.")),l.a.createElement("div",{style:rn},l.a.createElement(L.a,{icon:"save",htmlType:"submit",style:ln},"Save"),l.a.createElement(L.a,{icon:"caret-right",onClick:mn,style:ln},"Preview"),l.a.createElement(sn.a,{overlay:(t=n,l.a.createElement(Vt.a,null,l.a.createElement(Vt.a.Item,{key:"1",onClick:function(){t('module.exports = async function run(page) {\n    await page.evaluate(() => {\n        const div = document.createElement("div");\n        div.innerHTML = "Test-crawler is awesome!";\n        document.body.insertBefore(div, document.body.firstChild);\n    });\n}')}},"Test-crawler is awesome"),l.a.createElement(Vt.a.Item,{key:"2",onClick:function(){t("module.exports = async function run(page) {\n    return await page.evaluate(() => {\n        Array.from(document.body.getElementsByTagName(\"a\"))\n             .filter(a => !a.href)\n             .forEach(a => a.click());\n        return Array.from(document.links).map(\n            link => link.href.replace('/?', '/iframe.html?')\n        );\n    });\n}")}},"Storybook"),l.a.createElement(Vt.a.Item,{key:"3",onClick:function(){t("// expect library from jest is installed by default\n// but you can use any assertion tool of your choice\n// just install it and use it here :D\nconst expect = require('expect');\n\nmodule.exports = async function run(page) {\n  await expect(page.title()).resolves.toMatch('React App');\n  expect('a').toBe('b'); // fail\n}")}},"Expect assetion example")))},l.a.createElement(L.a,{style:ln},"Code snippet ",l.a.createElement(I.a,{type:"down"})))))})),fn=m.a.Title,hn=function(e,t){return function(n){t(Object(E.a)({},e,{source:n}))}},En=function(e){var t=e.match.params.id,n=e.location,r=Object(a.c)(_,t),c=r.error,i=r.response,o=r.update;return c?l.a.createElement(_e,{description:c.toString()}):l.a.createElement(l.a.Fragment,null,l.a.createElement(fn,{level:3},"Add some code"),i?l.a.createElement(S.a,null,l.a.createElement(nn,null),l.a.createElement(dn,{id:t,code:i,setSource:hn(i,o),location:n}),l.a.createElement(Xt.a,{mode:"javascript",theme:"tomorrow",onChange:hn(i,o),fontSize:14,value:i.source.length?i.source:"module.exports = async function run(page) {\n// your code\n}",style:an})):l.a.createElement(xe.a,null))},gn=m.a.Title,vn=m.a.Text,wn=function(){var e=Object(a.c)(G),t=e.error,n=e.response;return t?l.a.createElement(_e,{description:t.toString()}):l.a.createElement(l.a.Fragment,null,l.a.createElement(gn,{level:3},"Codes"),l.a.createElement(nn,{full:!1}),n?l.a.createElement(we.a,{dataSource:Object.values(n),renderItem:function(e){var t=e.id,n=e.name,a=e.pattern;return l.a.createElement(we.a.Item,null,l.a.createElement(p.b,{to:M(t)},n," ",l.a.createElement(vn,{code:!0},a)))}}):l.a.createElement(xe.a,null),l.a.createElement(p.b,{to:M(Math.floor(Date.now()/1e3).toString())},l.a.createElement(L.a,{icon:"plus",size:"small"},"New")))},yn=m.a.Title,bn=function(){var e=l.a.useState(),t=Object(ge.a)(e,2),n=t[0],a=t[1];return l.a.useEffect((function(){!function(e){h.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,h.a.awrap(U());case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}))}(a)}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(yn,{level:3},"Settings"),n?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement("b",null,"Dir:")," ",n.dir)):l.a.createElement(xe.a,null))},xn=s.a.Sider,kn=s.a.Content,jn=m.a.Title,Sn={minHeight:"100vh"},On={color:"#fff",margin:10},In={background:"#fff",padding:24,margin:10,minHeight:280},Rn=function(){return l.a.createElement(p.a,null,l.a.createElement(s.a,{style:Sn},l.a.createElement(xn,null,l.a.createElement(jn,{level:3,style:On},"Test-crawler"),l.a.createElement(Gt,null)),l.a.createElement(kn,{style:In},l.a.createElement(d.a,{path:"/",exact:!0,component:ye}),l.a.createElement(d.a,{path:"/new",exact:!0,component:Ee}),l.a.createElement(d.a,{path:"/pins",exact:!0,component:$t}),l.a.createElement(d.a,{path:"/settings",exact:!0,component:bn}),l.a.createElement(d.a,{path:M(":id"),exact:!0,component:En}),l.a.createElement(d.a,{path:"/code",exact:!0,component:wn}),l.a.createElement(d.a,{path:N(":timestamp"),component:Wt}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(a.a,null,l.a.createElement(Rn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[265,1,2]]]);
//# sourceMappingURL=main.10031846.chunk.js.map