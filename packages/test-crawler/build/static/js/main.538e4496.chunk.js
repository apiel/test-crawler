(this["webpackJsonptest-crawler"]=this["webpackJsonptest-crawler"]||[]).push([[0],{284:function(e,t,a){e.exports=a(719)},291:function(e,t,a){},292:function(e,t,a){},719:function(e,t,a){"use strict";a.r(t);var n=a(283),r=a(0),c=a.n(r),l=a(7),o=a.n(l),i=(a(291),a(119)),s=a.n(i),u=a(19),m=a.n(u),p=a(28),d=a.n(p),f=a(13),E=a(52),g=(a(292),a(12)),h=a.n(g),v=a(37),w=a(72),b=a(17),y=a(73),j=a.n(y),I=a(271),x=a.n(I),k=a(111),O=a.n(k),S=a(27),P=a.n(S),R=a(8),C=a.n(R),F=a(110),z=a.n(F),T=a(118),A=a.n(T),L=a(24),M=a.n(L),D=a(20),U=a.n(D),B=function(e){return"/pins/".concat(e)},N=function(e,t){return"/code/".concat(e,"/").concat(t)},W=function(e,t){return"/results/".concat(e,"/").concat(t)},H=function(e){return"/project/".concat(e)},V=a(18);function q(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getSettings",t)}function J(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","loadProjects",t)}function Z(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","saveProject",t)}function _(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getCrawlers",t)}function G(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","setCode",t)}function Q(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getThumbnail",t)}function Y(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","removePin",t)}function $(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","pin",t)}function K(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","setZoneStatus",t)}function X(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","setZonesStatus",t)}function ee(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","setStatus",t)}function te(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","startCrawler",t)}function ae(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","startCrawlers",t)}var ne,re,ce,le={lineHeight:1.2,borderLeft:"8px solid #EEE",paddingLeft:15,color:"#666",textAlign:"justify"},oe=function(e){var t=e.children;return c.a.createElement("div",{style:le},t)},ie=a(51),se=a.n(ie),ue=[{name:"Desktop - 800x600",value:{width:800,height:600}},{name:"Desktop - 1024x768",value:{width:1024,height:768}},{name:"Desktop - 1920x1080",value:{width:1920,height:1080}},{name:"iPhone 5 - 320x568",value:{width:320,height:568,isMobile:!0,hasTouch:!0}},{name:"iPhone 6 - 375x667",value:{width:375,height:667,isMobile:!0,hasTouch:!0}},{name:"Ipad - 768x1024",value:{width:768,height:1024,isMobile:!0,hasTouch:!0}},{name:"Galaxy S5 - 360x640",value:{width:360,height:640,isMobile:!0,hasTouch:!0}}],me=ue.map((function(e){var t=e.value,a=Object(w.a)(e,["value"]);return Object(v.a)({},a,{value:JSON.stringify(t)})})),pe=function(e){var t=JSON.stringify(e),a=me.findIndex((function(e){return e.value===t}));if(-1!==a)return me[a].name;var n=e.width,r=e.height,c=e.isMobile;return"".concat(n,"x").concat(r).concat(c&&" mobile")},de=se.a.Option,fe=function(e){return(0,e.getFieldDecorator)("viewport",{initialValue:e.initialValue||me[0].name})(c.a.createElement(se.a,null,me.map((function(e){var t=e.value,a=e.name;return c.a.createElement(de,{key:t,value:t},a)}))))},Ee={marginRight:10,display:"inline-block"},ge={marginRight:30},he=function(){var e=Object(b.a)(h.a.mark((function e(t,a){var n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.name,r=a.viewport,c=Object(w.a)(a,["name","viewport"]),e.prev=1,e.next=4,Z(Object(v.a)({},c,{viewport:JSON.parse(r)}),n,void 0);case 4:t.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),M.a.error({message:"Something went wrong!",description:e.t0.toString()});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}(),ve=function(e,t){return function(a){a.preventDefault(),t((function(t,a){t||he(e,a)}))}},we=P.a.create({name:"start_crawler"})((function(e){var t=e.history,a=e.form,n=a.getFieldDecorator,r=a.validateFields,l=a.getFieldValue;return c.a.createElement(P.a,{onSubmit:ve(t,r)},c.a.createElement(P.a.Item,null,n("name",{rules:[{required:!0,message:"Please give a name to the project."}]})(c.a.createElement(j.a,{addonBefore:"Name",placeholder:"Project name"}))),c.a.createElement(P.a.Item,null,n("url",{rules:[{required:!0,message:"Please input an URL to crawl."}]})(c.a.createElement(j.a,{placeholder:"https://domain.com/",addonBefore:"URL",addonAfter:c.a.createElement(fe,{getFieldDecorator:n,initialValue:JSON.stringify(ue[0].value)})}))),c.a.createElement(P.a.Item,null,c.a.createElement(P.a.Item,{style:Ee},n("method",{initialValue:"spiderbot"})(c.a.createElement(A.a.Group,{size:"small",style:ge},c.a.createElement(A.a.Button,{value:"spiderbot"},c.a.createElement(C.a,{type:"radar-chart"})," Spider bot"),c.a.createElement(A.a.Button,{value:"urls"},c.a.createElement(C.a,{type:"ordered-list"})," URLs list")))),"spiderbot"===l("method")&&c.a.createElement(P.a.Item,{style:Ee},"Limit ",n("limit")(c.a.createElement(x.a,{min:0,size:"small"})),"\xa0",c.a.createElement(z.a,{content:c.a.createElement("div",null,c.a.createElement("b",null,"Limit the number of sibling pages. "),"For example, with the urls:",c.a.createElement("ul",null,c.a.createElement("li",null,"/item/1"),c.a.createElement("li",null,"/item/2"),c.a.createElement("li",null,"/item/3"),c.a.createElement("li",null,"/item/4"))," using the limit ",c.a.createElement("b",null,"2")," will only crawl ",c.a.createElement("b",null,"/item/1")," and ",c.a.createElement("b",null,"/item/2"),".",c.a.createElement("br",null),c.a.createElement("br",null),"Use ",c.a.createElement("b",null,"0")," to skip the limit."),trigger:"click",overlayStyle:{width:200}},c.a.createElement(C.a,{type:"question-circle"}))),c.a.createElement(oe,null,c.a.createElement(m.a.Paragraph,{ellipsis:{rows:1,expandable:!0}},c.a.createElement("b",null,"Spider bot")," crawling method will get all the links inside the page of the given URL and crawl the children. It will then continue do the same with the children till no new link is found. Be careful if you have big website, this is most likely not the right solution for you."),c.a.createElement(m.a.Paragraph,{ellipsis:{rows:1,expandable:!0}},c.a.createElement("b",null,"URLs list")," crawling method will crawl a specific sets of URLs. In the URL input field you must provide an endpoint containing a list of URLs (a simple text format, with one URL per line). The crawler will crawl each of those URL only and will not try to find links in the page."))),c.a.createElement(P.a.Item,null,n("autopin",{valuePropName:"checked"})(c.a.createElement(O.a,null,"Automatically pin new page founds."))),c.a.createElement(P.a.Item,null,c.a.createElement(P.a.Item,{style:Ee},c.a.createElement(U.a,{type:"primary",icon:"plus",htmlType:"submit"},"Create"))))})),be=a(25),ye=a(38),je=a.n(ye),Ie=function(){var e=Object(b.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J();case 3:a=e.sent,t(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),M.a.warning({message:"Something went wrong while loading projects.",description:e.t0.toString()});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=c.a.useState([]),t=Object(be.a)(e,2),a=t[0],n=t[1];return c.a.useEffect((function(){Ie(n)}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a.Title,{level:3},"Projects"),c.a.createElement(je.a,{itemLayout:"horizontal",bordered:!0,dataSource:a,renderItem:function(e){var t=e.id,a=e.name,n=e.crawlerInput.url;return c.a.createElement(je.a.Item,{actions:[c.a.createElement(f.b,{to:H(t)},"Open")]},c.a.createElement(je.a.Item.Meta,{title:c.a.createElement(f.b,{to:H(t)},a),description:n}))}}),c.a.createElement("br",null),c.a.createElement(f.b,{to:"/new"},c.a.createElement(U.a,{icon:"plus",size:"small"},"New")))},ke=a(29),Oe=a.n(ke),Se=a(117),Pe=a.n(Se),Re=a(114),Ce=a.n(Re),Fe={textAlign:"center"},ze=300,Te={width:ze+20,marginBottom:10},Ae={paddingTop:10,paddingBottom:10},Le={gutter:10,fitWidth:!0},Me=a(115),De=a.n(Me),Ue=function(e){var t=e.message,a=void 0===t?"Something went wrong":t,n=e.description;return c.a.createElement(De.a,{message:a,description:n,type:"warning",showIcon:!0})},Be=a(272),Ne=a.n(Be),We=a(273),He=a.n(We),Ve={width:Te.width,marginRight:Le.gutter},qe=function(e,t,a){return function(n){t&&(n.length?(clearTimeout(ne),ne=setTimeout((function(){_e(e,Je(t,n),a)}),500)):_e(e,t,a))}},Je=function(e,t){return new Ne.a(e,{keys:["url","viewport.width","viewport.height","keywords"]}).search(t)},Ze=function(e,t,a){return function(n){t&&(a(n),_e(e,t,n))}},_e=function(e,t,a){if(t)if(a.length){var n=a.filter((function(e){return!Object.keys(Ge).includes(e)})).join(" ");n&&(t=Je(t,n)),e(t.filter((function(e){var t=!0;if(a.includes("with-diff")){var n=He()(e,"png.diff.pixelDiffRatio");t=t&&n>0}return a.includes("new")&&(t=t&&!!e.png&&!e.png.diff),t})))}else e(t)},Ge={"with-diff":"with diff",new:"new"},Qe=se.a.Option,Ye=function(e){var t=e.children,a=e.response,n=e.withFilters,r=c.a.useState(),l=Object(be.a)(r,2),o=l[0],i=l[1],s=c.a.useState([]),u=Object(be.a)(s,2),m=u[0],p=u[1],d=c.a.useState(),f=Object(be.a)(d,2),E=f[0],g=f[1];return c.a.useEffect((function(){i(a),Ze(g,a,p)(m)}),[a]),c.a.createElement(c.a.Fragment,null,c.a.createElement(se.a,{mode:"tags",onChange:Ze(g,o,p),tokenSeparators:[","],style:Ve,placeholder:"Search",filterOption:!1,onSearch:qe(g,o,m)},!!n&&Object.keys(n).map((function(e){return c.a.createElement(Qe,{key:e},n[e])}))),t(E))},$e=a(275),Ke=a.n($e),Xe=a(71),et=function(e){return Object(Xe.unix)(parseInt(e,10)).calendar()},tt=a(282),at=a(274),nt=a(30),rt=a.n(nt),ct={marginLeft:5,marginRight:5},lt=function(e,t){var a=t.timestamp,n=t.id,r=t.index,c=t.projectId,l=t.setPages;return(Object(b.a)(h.a.mark((function t(){var o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K(c,a,n,r,e);case 3:o=t.sent,l(o),rt.a.success("Page pinned as reference for comparison.",2),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),M.a.error({message:"Something went wrong!",description:t.t0.toString()});case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))))},ot=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(U.a,{style:ct,icon:"check",size:"small",onClick:lt("valid",e)},"Valid"),c.a.createElement(U.a,{style:ct,icon:"pushpin",size:"small",onClick:lt("pin",e)},"Always valid"),c.a.createElement(U.a,{style:ct,icon:"warning",size:"small",type:"danger",onClick:lt("report",e)},"Report"))},it=function(e){return"valid"===e||"pin"===e?"#0F0":"report"===e?"red":"yellow"},st=function(e,t,a,n,r,c,l){var o=e.xMin,i=e.yMin,s=i/t-1,u=o/t-1;return{width:(e.xMax-o)/t+2,height:(e.yMax-i)/t+2,top:s,left:u+n,border:"1px solid ".concat(it(l)),position:"absolute",backgroundImage:c?'url("'.concat(r,'")'):"none",backgroundPosition:"".concat(-(u+1),"px ").concat(-(s+1),"px"),backgroundSize:a}},ut=function(e){var t=e.setPages,a=e.projectId,n=e.folder,l=e.id,o=e.index,i=e.originalWidth,s=e.zone,u=e.status,m=e.width,p=e.marginLeft,d=Object(r.useState)(),f=Object(be.a)(d,2),E=f[0],g=f[1],v=function(){var e=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=g,e.next=3,Q(a,"base",l,m);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){v()}),[]);var w=Object(r.useState)(!1),y=Object(be.a)(w,2),j=y[0],I=y[1],x=i/m;return c.a.createElement(z.a,{key:"".concat(l,"-").concat(o),content:c.a.createElement(ot,{index:o,timestamp:n,id:l,projectId:a,setPages:t}),trigger:"click"},c.a.createElement("div",{style:st(s,x,m,p,E,j,u),onMouseOver:function(){return I(!0)},onMouseOut:function(){return I(!1)}}))},mt=function(e){var t=e.zones;return c.a.createElement("p",null,c.a.createElement("b",null,"Zone:"),"\xa0",[["diff"],["valid","pin"],["report"]].map((function(e){var a=Object(at.a)(e),n=a[0],r=a.slice(1);return c.a.createElement(c.a.Fragment,{key:n},c.a.createElement("span",{style:{marginLeft:10,color:it(n)}},"\u25a0")," ",c.a.createElement("b",null,function(e,t){return e.filter((function(e){var a=e.status;return t.includes(a)})).length}(t,[n].concat(Object(tt.a)(r))))," ",n)})))},pt=function(e){var t=e.diff;return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,c.a.createElement(C.a,{type:"picture",theme:"outlined"}),"\xa0 Pixel diff ratio: ",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e)return e;var a=t-1-Math.floor(Math.log(e)/Math.log(10));return e.toFixed(a)}(t.pixelDiffRatio)),t.zones&&t.zones.length>0&&c.a.createElement(mt,{zones:t.zones}))},dt=function(e){var t=e.diff;return t?c.a.createElement(pt,{diff:t}):c.a.createElement("div",null,c.a.createElement(C.a,{type:"picture",theme:"outlined"}),"\xa0 New screenshot ",c.a.createElement(Ke.a,{color:"green"},"New"))},ft=new(a(666))({fg:"#333"}),Et={marginBottom:10},gt=function(e){var t=e.pageError,a=e.url,n=e.png;return c.a.createElement(c.a.Fragment,null,t&&c.a.createElement(De.a,{message:c.a.createElement("div",{dangerouslySetInnerHTML:{__html:ft.toHtml(t)}}),type:"warning",style:Et}),c.a.createElement("p",null,c.a.createElement(C.a,{type:"link"})," ",c.a.createElement("a",{href:a},a)),n?c.a.createElement(dt,{diff:n.diff}):c.a.createElement("p",null,c.a.createElement(C.a,{type:"picture",theme:"outlined"})," No screenshot available"))},ht=function(e){var t=e.timestamp,a=e.id,n=e.status,r=e.projectId,c=e.setPages;return(Object(b.a)(h.a.mark((function e(){var l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X(r,t.toString(),a,n);case 3:l=e.sent,c(l),rt.a.success('All zone are set to "'.concat(n,'".'),2),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),M.a.error({message:"Something went wrong!",description:e.t0.toString()});case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))))},vt=function(e){var t=e.status,a=e.type;return c.a.createElement(C.a,{type:a,title:'Set all zone to "'.concat(t,'".'),onClick:ht(e)})},wt=function(e){var t=e.projectId,a=e.timestamp,n=e.id;return(Object(b.a)(h.a.mark((function e(){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=rt.a.loading("Pin in progress..",0),e.next=4,$(t,a.toString(),n);case 4:r(),rt.a.success("Page pinned as reference for comparison.",2),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),M.a.error({message:"Something went wrong!",description:e.t0.toString()});case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))))},bt=function(e){return function(e){return c.a.createElement(C.a,{type:"pushpin",title:"pin as reference for comparison",onClick:wt(e)})}(e)},yt=a(276),jt=a.n(yt),It=function(e){var t=e.projectId,a=e.folder,n=e.id,l=e.onImg,o=void 0===l?function(){}:l,i=e.width,s=void 0===i?ze:i,u=e.children,m=Object(r.useState)(),p=Object(be.a)(m,2),d=p[0],f=p[1],E=function(){var e=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f,e.next=3,Q(t,a,n,s);case 3:e.t1=e.sent,(0,e.t0)(e.t1),o();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){E()}),[]),d?c.a.createElement("div",{style:Fe},u,c.a.createElement("img",{style:{width:s},alt:"",src:d})):null},xt=function(e){var t=e.projectId,a=e.folder,n=e.id,r=e.zones,l=e.originalWidth,o=void 0===l?0:l,i=e.width,s=void 0===i?ze:i,u=e.setPages,m=e.marginLeft,p=Object(w.a)(e,["projectId","folder","id","zones","originalWidth","width","setPages","marginLeft"]);return c.a.createElement(It,Object.assign({projectId:t,folder:a,id:n,width:s},p),r&&r.map((function(e,r){var l=e.zone,i=e.status;return c.a.createElement(ut,{projectId:t,folder:a,id:n,width:s,index:r,originalWidth:o,marginLeft:m,status:i,zone:l,key:"zone-".concat(n,"-").concat(r),setPages:u})})))},kt=function(e){return function(){e(!0)}},Ot=function(e){return function(){e(!1)}},St=function(e){var t=e.setPages,a=e.projectId,n=e.timestamp,r=e.id,l=e.png,o=e.url,i=e.pageError,s=c.a.useState(!1),u=Object(be.a)(s,2),m=u[0],p=u[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(jt.a,{title:"",visible:m,onCancel:Ot(p),footer:null,width:l.width+40},c.a.createElement("div",{style:{position:"relative"}},c.a.createElement(xt,{setPages:t,projectId:a,folder:n,id:r,zones:l.diff&&l.diff.zones,originalWidth:l.width,width:l.width,marginLeft:0}),c.a.createElement(gt,{url:o,pageError:i,png:l}))),c.a.createElement(C.a,{type:"fullscreen",title:"fullscreen",onClick:kt(p)}))},Pt=function(e){var t=e.setPages,a=e.projectId,n=e.timestamp,r=e.id,l=e.png,o=e.url,i=e.pageError;return[l&&c.a.createElement(St,{setPages:t,projectId:a,png:l,id:r,timestamp:n,url:o,pageError:i})].concat([c.a.createElement(vt,{type:"check",setPages:t,projectId:a,timestamp:n,id:r,status:"valid"}),c.a.createElement(vt,{type:"warning",setPages:t,projectId:a,timestamp:n,id:r,status:"report"}),c.a.createElement(bt,{projectId:a,timestamp:n,id:r})])},Rt=function(e){return re=e},Ct=function(){re&&re.layout(),clearTimeout(ce),ce=setTimeout((function(){re&&re.layout()}),500)},Ft=function(e,t,a,n){return Object(b.a)(h.a.mark((function r(){var c;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(void 0),n(!0),r.next=5,e();case 5:c=r.sent,t(c),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),a(r.t0);case 12:n(!1);case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))},zt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,n=c.a.useState(a),r=Object(be.a)(n,2),l=r[0],o=r[1],i=c.a.useState(),s=Object(be.a)(i,2),u=s[0],m=s[1],p=c.a.useState(!1),d=Object(be.a)(p,2),f=d[0],E=d[1],g=Ft(e,o,m,E);return c.a.useEffect((function(){g()}),t),{loading:f,result:l,call:g,error:u,setResult:o}},Tt=function(e){var t=e.projectId,a=e.timestamp,n=e.lastUpdate,r=zt((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getPages",t)}(t,a)}),[n]),l=r.result,o=r.error,i=r.setResult;return o?c.a.createElement(Ue,{description:o.toString()}):c.a.createElement(Ye,{response:l,withFilters:Ge},(function(e){return e?c.a.createElement(Ce.a,{style:Ae,options:Le,ref:function(e){Rt(e&&e.masonry)}},e.map((function(e){var n=e.id,r=e.url,l=e.png,o=e.error;return c.a.createElement(Pe.a,{key:n,style:Te,cover:l&&c.a.createElement(xt,{projectId:t,folder:a,id:n,zones:l.diff&&l.diff.zones,originalWidth:l.width,onImg:Ct,setPages:i,marginLeft:10}),actions:Pt({setPages:i,projectId:t,id:n,timestamp:a,png:l,url:r,pageError:o})},c.a.createElement(gt,{url:r,pageError:o,png:l}))}))):c.a.createElement(Oe.a,null)}))},At=a(278),Lt=a.n(At),Mt=(a(698),a(277)),Dt=a.n(Mt),Ut=function(e,t,a){return function(){var n=Object(b.a)(h.a.mark((function n(r){var c,l;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=r?"done":"review",n.next=4,ee(e,t,c);case 4:l=n.sent,a(l),rt.a.success('Status set to "'.concat(c,'".'),2),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),M.a.error({message:"Something went wrong!",description:n.t0.toString()});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},Bt=function(e){var t=e.timestamp,a=e.status,n=e.projectId,r=e.setCrawler;return c.a.createElement(Dt.a,{checkedChildren:"done",unCheckedChildren:"review",checked:"done"===a,onChange:Ut(n,t,r)})},Nt=function(e){var t=zt((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","loadProject",t)}(e)})),a=t.result,n=t.setResult,r=t.error;return r&&M.a.warning({message:"Something went wrong while loading project.",description:r.toString()}),{project:a,setProject:n}},Wt=function(e){var t=e.projectId,a=Nt(t).project;return a?c.a.createElement("p",null,c.a.createElement("b",null,"Project:")," ",c.a.createElement(f.b,{to:H(a.id)},a.name)):null},Ht=m.a.Title,Vt={color:"#faad29"},qt={color:"#999",fontSize:11},Jt=function(e){var t=e.crawler,a=t.timestamp,n=t.url,r=t.diffZoneCount,l=t.errorCount,o=t.status,i=t.urlsCount,s=t.inQueue,u=t.startAt,m=t.lastUpdate,p=t.limit,d=t.viewport,f=e.projectId,E=e.setCrawler,g=i+s,h=Math.floor(i/g*100),v=pe(d);return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ht,{level:3},et(a)),(r>0||l>0)&&c.a.createElement("p",null,c.a.createElement(Bt,{setCrawler:E,projectId:f,status:o,timestamp:a})),c.a.createElement(Wt,{projectId:f}),c.a.createElement("p",null,c.a.createElement("b",null,"URL:")," ",n),c.a.createElement("p",null,c.a.createElement("b",null,"Screen:")," ",v),c.a.createElement("p",null,c.a.createElement("b",null,"URL crawled:")," ",i,void 0!==p&&p>0&&c.a.createElement("span",{style:qt}," (with limit set to ",p,")")),c.a.createElement("p",null,c.a.createElement("b",null,"Duration:")," ",Object(Xe.duration)(m-u).format("h [hrs], m [min], s [sec]")),s>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement(Lt.a,{percent:h}),c.a.createElement("p",null,c.a.createElement("b",null,"In queue:")," ",s)),l>0&&c.a.createElement("p",{style:Vt},c.a.createElement(C.a,{type:"exclamation-circle"})," ",l," error(s) founds"))},Zt=function(e){var t=e.match.params,a=t.timestamp,n=t.projectId,r=zt((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getCrawler",t)}(n,a)})),l=r.result,o=r.error,i=r.setResult;if(c.a.useEffect((function(){var e=Object(V.subscrib)(i);return function(){return Object(V.unsubscrib)(e)}}),[l]),o)return c.a.createElement(Ue,{description:o.toString()});var s=null===l||void 0===l?void 0:l.lastUpdate;return l?c.a.createElement(c.a.Fragment,null,c.a.createElement(Jt,{crawler:l,projectId:n,setCrawler:i}),c.a.createElement(Tt,{timestamp:a,lastUpdate:s,projectId:n})):c.a.createElement(Oe.a,null)},_t=a(279),Gt=a.n(_t),Qt=function(e,t,a){return Object(b.a)(h.a.mark((function n(){var r,c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=rt.a.loading("Delete in progress..",0),n.next=3,Y(e,t);case 3:c=n.sent,a(c),r();case 6:case"end":return n.stop()}}),n)})))},Yt=function(e){var t=e.projectId,a=e.id,n=e.url,r=e.viewport,l=e.onImg,o=e.png,i=e.setPins;return c.a.createElement(Pe.a,{style:Te,cover:o&&c.a.createElement(It,{folder:"base",id:a,onImg:l,projectId:t}),actions:[c.a.createElement(Gt.a,{title:"Are you sure delete this pin?",onConfirm:Qt(t,a,i),okText:"Yes",cancelText:"No"},c.a.createElement(C.a,{type:"delete",title:"Delete pin"})),c.a.createElement(f.b,{to:{pathname:N(t,a),state:{pattern:n}}},c.a.createElement(C.a,{type:"code",title:"Insert code while crawling"}))]},c.a.createElement("p",null,c.a.createElement(C.a,{type:"link"})," ",c.a.createElement("a",{href:n},n)),!o&&c.a.createElement("p",null,c.a.createElement(C.a,{type:"picture",theme:"outlined"})," No screenshot available"),r&&c.a.createElement("p",null,c.a.createElement(C.a,{type:"picture",theme:"outlined"})," ",pe(r)))},$t=m.a.Title,Kt=function(e){var t=e.match.params.projectId,a=zt((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getPins",t)}(t)})),n=a.result,r=a.error,l=a.setResult;return r?c.a.createElement(Ue,{description:r.toString()}):c.a.createElement(c.a.Fragment,null,c.a.createElement($t,{level:3},"Pins"),c.a.createElement(Wt,{projectId:t}),c.a.createElement(Ye,{response:n},(function(e){return e?c.a.createElement(Ce.a,{style:Ae,options:Le,ref:function(e){Rt(e&&e.masonry)}},e.map((function(e){var a=e.id,n=e.url,r=e.png,o=e.viewport;return c.a.createElement(Yt,{projectId:t,id:a,key:a,url:n,setPins:l,png:r,viewport:o,onImg:Ct})}))):c.a.createElement(Oe.a,null)})))},Xt=a(280),ea=a.n(Xt),ta=(a(709),a(711),m.a.Paragraph),aa=m.a.Text,na=function(e){var t=e.full,a=void 0===t||t;return c.a.createElement(oe,null,c.a.createElement(ta,null,"Inject some code in the crawler while parsing the page. This code will be executed just after the page finish loaded, before to make the screenshot and before extracting the links. ",a&&c.a.createElement(c.a.Fragment,null,"You need to export a function that will take as first parameter the ",c.a.createElement(aa,{code:!0},"page")," coming from Puppeteer.")),a&&c.a.createElement(ta,null,c.a.createElement(aa,{code:!0},"module.exports = async (page) => ...some code")))},ra={border:"1px solid #EEE",marginBottom:15,marginRight:15,float:"left"},ca=(Object(v.a)({},Te,{float:"left"}),{marginBottom:15}),la={marginRight:10},oa={maxWidth:500,margin:"0px 0px 10px 0px"},ia=a(281),sa=a.n(ia),ua=a(44),ma=a.n(ua),pa=m.a.Paragraph,da=function(){rt.a.warn("To be implemented.",2)},fa=function(){var e=Object(b.a)(h.a.mark((function e(t,a,n,r){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=rt.a.loading("Saving in progress..",0),e.next=4,G(t,Object(v.a)({id:a,source:n},r));case 4:c(),rt.a.success("Code saved.",2),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),M.a.error({message:"Something went wrong!",description:e.t0.toString()});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a,n,r){return e.apply(this,arguments)}}(),Ea=function(e,t,a,n){return function(r){r.preventDefault(),n((function(n,r){n||fa(e,t,a,r)}))}},ga=P.a.create({name:"code"})((function(e){var t,a=e.projectId,n=e.setSource,r=e.id,l=e.code,o=e.form,i=o.getFieldDecorator,s=o.validateFields,u=e.location.state;return c.a.createElement(P.a,{onSubmit:Ea(a,r,l.source,s)},c.a.createElement(P.a.Item,{style:oa},i("name",{initialValue:l.name||""})(c.a.createElement(j.a,{addonBefore:"Name"}))),c.a.createElement(P.a.Item,{style:oa},i("pattern",{rules:[{required:!0,message:"Please input a pattern!"}],initialValue:l.pattern||u&&u.pattern||""})(c.a.createElement(j.a,{addonBefore:"Pattern"}))),c.a.createElement(oe,null,c.a.createElement(pa,null,"Pattern is using ",c.a.createElement("a",{href:"https://www.npmjs.com/package/minimatch",target:"_blank"},"minimatch")," to match the urls to inject the code. It works by converting glob expressions into JavaScript RegExp objects.")),c.a.createElement("div",{style:ca},c.a.createElement(U.a,{icon:"save",htmlType:"submit",style:la},"Save"),c.a.createElement(U.a,{icon:"caret-right",onClick:da,style:la},"Preview"),c.a.createElement(sa.a,{overlay:(t=n,c.a.createElement(ma.a,null,c.a.createElement(ma.a.Item,{key:"1",onClick:function(){t('module.exports = async function run(page) {\n    await page.evaluate(() => {\n        const div = document.createElement("div");\n        div.innerHTML = "Test-crawler is awesome!";\n        document.body.insertBefore(div, document.body.firstChild);\n    });\n}')}},"Test-crawler is awesome"),c.a.createElement(ma.a.Item,{key:"2",onClick:function(){t("module.exports = async function run(page) {\n    return await page.evaluate(() => {\n        Array.from(document.body.getElementsByTagName(\"a\"))\n             .filter(a => !a.href)\n             .forEach(a => a.click());\n        return Array.from(document.links).map(\n            link => link.href.replace('/?', '/iframe.html?')\n        );\n    });\n}")}},"Storybook"),c.a.createElement(ma.a.Item,{key:"3",onClick:function(){t("// expect library from jest is installed by default\n// but you can use any assertion tool of your choice\n// just install it and use it here :D\nconst expect = require('expect');\n\nmodule.exports = async function run(page) {\n  await expect(page.title()).resolves.toMatch('React App');\n  expect('a').toBe('b'); // fail\n}")}},"Expect assetion example")))},c.a.createElement(U.a,{style:la},"Code snippet ",c.a.createElement(C.a,{type:"down"})))))})),ha=m.a.Title,va=function(e,t){return function(a){t(Object(v.a)({},e,{source:a}))}},wa=function(e){var t=e.match.params,a=t.id,n=t.projectId,r=e.location,l=zt((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getCode",t)}(n,a)})),o=l.error,i=l.result,s=l.setResult;return o?c.a.createElement(Ue,{description:o.toString()}):c.a.createElement(c.a.Fragment,null,c.a.createElement(ha,{level:3},"Add some code"),i?c.a.createElement(P.a,null,c.a.createElement(na,null),c.a.createElement(Wt,{projectId:n}),c.a.createElement(ga,{projectId:n,id:a,code:i,setSource:va(i,s),location:r}),c.a.createElement(ea.a,{mode:"javascript",theme:"tomorrow",onChange:va(i,s),fontSize:14,value:i.source.length?i.source:"module.exports = async function run(page) {\n// your code\n}",style:ra})):c.a.createElement(Oe.a,null))},ba=m.a.Title,ya=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,q();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ja=function(){var e=c.a.useState(),t=Object(be.a)(e,2),a=t[0],n=t[1];return c.a.useEffect((function(){ya(n)}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ba,{level:3},"Settings"),a?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,c.a.createElement("b",null,"Dir:")," ",a.dir)):c.a.createElement(Oe.a,null),c.a.createElement("p",null,c.a.createElement(U.a,{icon:"caret-right",size:"small",onClick:ae},"Start crawlers")))},Ia=m.a.Title,xa=m.a.Text,ka=function(e){var t=e.projectId,a=zt((function(){return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(V.isomorRemote)("ws","ws://127.0.0.1:3005","server-service","test-crawler","getCodes",t)}(t)})),n=a.error,r=a.result;return n?c.a.createElement(Ue,{description:n.toString()}):c.a.createElement(c.a.Fragment,null,c.a.createElement(Ia,{level:3},"Codes"),c.a.createElement(na,{full:!1}),r?c.a.createElement(je.a,{bordered:!0,dataSource:Object.values(r),renderItem:function(e){var a=e.id,n=e.name,r=e.pattern;return c.a.createElement(je.a.Item,{actions:[c.a.createElement(f.b,{to:N(t,a)},"Edit")]},c.a.createElement(je.a.Item.Meta,{title:c.a.createElement(f.b,{to:N(t,a)},n," ",c.a.createElement(xa,{code:!0},r))}))}}):c.a.createElement(Oe.a,null),c.a.createElement("br",null),c.a.createElement(f.b,{to:N(t,Math.floor(Date.now()/1e3).toString())},c.a.createElement(U.a,{icon:"plus",size:"small"},"New code")))},Oa=function(e,t){return Object(b.a)(h.a.mark((function a(){var n;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,te(t);case 3:n=a.sent,e.push(W(t,n)),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),M.a.error({message:"Something went wrong!",description:a.t0.toString()});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))},Sa=function(e,t){var a=e.name,n=e.id,r=e.crawlerInput;return(function(){var e=Object(b.a)(h.a.mark((function e(c){var l,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=c.target.checked,e.next=3,Z(Object(v.a)({},r,{autopin:l}),a,n);case 3:o=e.sent,t(o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Pa=function(e,t,a,n){return n>0?"loading":e||0!==t?"done"===a?"issues-close":"exclamation-circle":"check"},Ra=function(e){var t=e.match.params.projectId,a=e.history,n=Nt(t),r=n.project,l=n.setProject,o=function(e){var t=zt(Object(b.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(e);case 2:return a=t.sent,t.abrupt("return",a.sort((function(e,t){var a=e.timestamp,n=t.timestamp;return parseInt(n,10)-parseInt(a,10)})));case 4:case"end":return t.stop()}}),t)})))),a=t.result,n=t.setResult,r=t.error,c=t.loading;return r&&M.a.warning({message:"Something went wrong while loading crawlers from project.",description:r.toString()}),{crawlers:a,setCrawlers:n,loading:c}}(t),i=o.crawlers,s=o.loading;return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a.Title,{level:3},"Project"),r?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,c.a.createElement("b",null,"Name:")," ",r.name),c.a.createElement("p",null,c.a.createElement("b",null,"ID:")," ",t),c.a.createElement("p",null,c.a.createElement("b",null,"URL:")," ",r.crawlerInput.url),c.a.createElement("p",null,c.a.createElement("b",null,"Screen:")," ",pe(r.crawlerInput.viewport)),c.a.createElement("p",null,c.a.createElement("b",null,"Method:"),"urls"===r.crawlerInput.method?c.a.createElement(c.a.Fragment,null," ",c.a.createElement(C.a,{type:"ordered-list"})," URLs list"):c.a.createElement(c.a.Fragment,null," ",c.a.createElement(C.a,{type:"radar-chart"})," Spider bot",!!r.crawlerInput.limit&&c.a.createElement("span",{style:{color:"#999",fontSize:12}}," (Limit: ",r.crawlerInput.limit,")"))),c.a.createElement("p",null,c.a.createElement(O.a,{checked:r.crawlerInput.autopin,onChange:Sa(r,l)},"Automatically pin new page founds.")),c.a.createElement("p",null,c.a.createElement(U.a,{icon:"caret-right",size:"small",onClick:Oa(a,t)},"Run")," \xa0",c.a.createElement(f.b,{to:B(t)},c.a.createElement(U.a,{icon:"pushpin",size:"small"},"Pins"))),c.a.createElement(je.a,{itemLayout:"horizontal",bordered:!0,loading:s,dataSource:i,renderItem:function(e){var a=e.timestamp,n=e.diffZoneCount,r=e.errorCount,l=e.status,o=e.inQueue;return c.a.createElement(je.a.Item,{actions:[c.a.createElement(f.b,{to:W(t,a)},"Open")]},c.a.createElement(je.a.Item.Meta,{title:c.a.createElement(f.b,{to:W(t,a)},et(a)),description:c.a.createElement(c.a.Fragment,null,c.a.createElement(C.a,{type:Pa(n,r,l,o)}),c.a.createElement("span",null," Diff: ",n," - Error: ",r," - In queue: ",o))}))}})):c.a.createElement(Oe.a,null),c.a.createElement("br",null),c.a.createElement(ka,{projectId:t}))},Ca=function(e){var t=e.match.params.projectId,a=Nt(t).project;return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a.Item,null,c.a.createElement(f.b,{to:"/"},"Projects")),c.a.createElement(d.a.Item,null,c.a.createElement(f.b,{to:H(t)},null===a||void 0===a?void 0:a.name)))},Fa=function(e){var t=e.match.params,a=t.projectId,n=t.timestamp,r=Nt(a).project;return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a.Item,null,c.a.createElement(f.b,{to:"/"},"Projects")),c.a.createElement(d.a.Item,null,c.a.createElement(f.b,{to:H(a)},null===r||void 0===r?void 0:r.name)),c.a.createElement(d.a.Item,null,c.a.createElement(f.b,{to:W(a,n)},"Results: ",et(n))))},za=function(e){var t=e.match.params.projectId,a=Nt(t).project;return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a.Item,null,c.a.createElement(f.b,{to:"/"},"Projects")),c.a.createElement(d.a.Item,null,c.a.createElement(f.b,{to:H(t)},null===a||void 0===a?void 0:a.name)),c.a.createElement(d.a.Item,null,c.a.createElement(f.b,{to:B(t)},"Pins")))},Ta=function(e){var t=e.match.params,a=t.projectId,n=t.id,r=Nt(a).project;return c.a.createElement(c.a.Fragment,null,c.a.createElement(d.a.Item,null,c.a.createElement(f.b,{to:"/"},"Projects")),c.a.createElement(d.a.Item,null,c.a.createElement(f.b,{to:H(a)},null===r||void 0===r?void 0:r.name)),c.a.createElement(d.a.Item,null,c.a.createElement(f.b,{to:N(a,n)},"Code")))},Aa=s.a.Content,La=s.a.Header,Ma=m.a.Title,Da={minHeight:"100vh"},Ua={color:"#fff",marginTop:15,marginRight:15,float:"left"},Ba={background:"#fff",padding:24,margin:10,minHeight:280},Na=function(){return c.a.createElement(f.a,null,c.a.createElement(s.a,{style:Da},c.a.createElement(La,null,c.a.createElement(f.b,{to:"/"},c.a.createElement(Ma,{level:3,style:Ua},"Test-crawler")),c.a.createElement(ma.a,{theme:"dark",mode:"horizontal",style:{lineHeight:"64px"}},c.a.createElement(ma.a.Item,{key:"projects"},c.a.createElement(C.a,{type:"folder"}),c.a.createElement("span",{className:"nav-text"},"Projects"),c.a.createElement(f.b,{to:"/"})),c.a.createElement(ma.a.Item,{key:"settings",style:{float:"right"}},c.a.createElement(f.b,{to:"/settings"},c.a.createElement(C.a,{type:"setting"}))))),c.a.createElement(d.a,{style:{margin:"10px 0 0 10px"}},c.a.createElement(E.a,{path:H(":projectId"),exact:!0,component:Ca}),c.a.createElement(E.a,{path:W(":projectId",":timestamp"),exact:!0,component:Fa}),c.a.createElement(E.a,{path:B(":projectId"),exact:!0,component:za}),c.a.createElement(E.a,{path:N(":projectId",":id"),exact:!0,component:Ta})),c.a.createElement(Aa,{style:Ba},c.a.createElement(E.a,{path:"/",exact:!0,component:xe}),c.a.createElement(E.a,{path:"/new",exact:!0,component:we}),c.a.createElement(E.a,{path:B(":projectId"),exact:!0,component:Kt}),c.a.createElement(E.a,{path:"/settings",exact:!0,component:ja}),c.a.createElement(E.a,{path:N(":projectId",":id"),exact:!0,component:wa}),c.a.createElement(E.a,{path:W(":projectId",":timestamp"),component:Zt}),c.a.createElement(E.a,{path:H(":projectId"),exact:!0,component:Ra}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(n.a,null,c.a.createElement(Na,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[284,1,2]]]);
//# sourceMappingURL=main.538e4496.chunk.js.map