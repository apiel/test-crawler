{"version":3,"sources":["routes.tsx","server/service.ts","common/Info.tsx","search/search.ts","common/refreshMasonry.ts","crawler/CrawlerResults.tsx","viewport.ts","new-project/Viewport.tsx","new-project/NewProject.tsx","projects/Projects.tsx","pages/pageStyle.tsx","diff/DiffImageButtons.tsx","diff/DiffZone.tsx","diff/DiffImage.tsx","common/ErrorHandler.tsx","search/Search.tsx","utils/index.ts","pages/PageImageDiffZone.tsx","pages/PageImageDiff.tsx","pages/PageImage.tsx","pages/Page.tsx","pages/PagesActionZone.tsx","pages/PagesActionPin.tsx","pages/PagesActionFullscreen.tsx","pages/PagesActions.tsx","pages/Pages.tsx","crawler/SwitchStatus.tsx","crawler/CrawlerInfo.tsx","side-menu/SideMenuResults.tsx","side-menu/SideMenu.tsx","pin/PinPage.tsx","pin/Pins.tsx","code/CodeInfo.tsx","code/codeStyle.ts","code/CodeFrom.tsx","code/CodeSnippet.tsx","code/Code.tsx","code/Codes.tsx","Settings.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["getCodeRoute","id","getResultsRoute","timestamp","getSettings","args","isomorRemote","getCrawlers","loadProjects","saveProject","getCrawler","getPages","getPins","setCode","getCode","getCodes","getThumbnail","pin","setZoneStatus","setZonesStatus","setStatus","timerSearch","masonry","timer","infoStyle","lineHeight","borderLeft","paddingLeft","color","textAlign","Info","children","style","viewports","name","value","width","height","isMobile","hasTouch","viewportsStr","map","viewport","JSON","stringify","getViewportName","valueStr","index","findIndex","vp","Option","Select","Viewport","getFieldDecorator","initialValue","key","inlineStyle","marginRight","display","radioGroupdStyle","handleSubmit","history","validateFields","event","preventDefault","err","values","a","async","input","parse","push","notification","message","description","toString","start","NewForm","Form","create","form","getFieldValue","onSubmit","Item","rules","required","addonBefore","placeholder","addonAfter","Group","size","Button","type","min","content","trigger","overlayStyle","Paragraph","ellipsis","rows","expandable","valuePropName","icon","htmlType","Projects","React","useState","projects","setProjects","useEffect","list","load","Title","level","itemLayout","dataSource","renderItem","url","crawlerInput","actions","Meta","title","href","to","coverStyle","imgStyle","cardStyle","imgMargin","marginBottom","masonryStyle","paddingTop","paddingBottom","masonryOptions","gutter","fitWidth","buttonStyle","marginLeft","onSetStatus","update","status","pages","success","DiffImageButtons","props","useAsyncCache","onClick","getColorByStatus","zoneStyle","ratio","img","over","xMin","yMin","top","left","xMax","yMax","border","position","backgroundImage","backgroundPosition","DiffZone","folder","originalWidth","zone","thumb","setThumb","hover","setHover","onMouseOver","onMouseOut","DiffImage","zones","onImg","alt","src","ErrorHandler","showIcon","searchStyle","onSearch","setPages","filters","length","clearTimeout","setTimeout","filterPages","searchPages","Fuse","keys","search","onFilter","setFilters","searchValue","filter","Object","availableFilters","includes","join","page","res","pixelDiffRatio","get","png","diff","Search","response","withFilters","selectedFilters","setSelectedFilters","pagesFiltered","setPagesFiltered","mode","onChange","tokenSeparators","filterOption","timestampToString","unix","calendar","PageImageDiffZone","more","Fragment","perStatus","getCountZonesPerStatus","PageImageDiff","theme","n","precision","fix","Math","floor","log","toFixed","sigDig","PageImage","convert","require","fg","alertStyle","Page","pageError","dangerouslySetInnerHTML","__html","toHtml","PagesActionZone","onPin","PagesActionPin","setVisible","onCancel","PagesActionFullscreen","visible","footer","PagesActions","setMasonry","m","onMasonryImg","layout","Pages","lastUpdate","useAsyncCacheEffect","error","options","ref","c","cover","crawler","SwitchStatus","checkedChildren","unCheckedChildren","checked","Typography","warningStyle","marginRightStyle","limitStyle","fontSize","CrawlerInfo","diffZoneCount","errorCount","urlsCount","inQueue","startAt","method","limit","autopin","total","percent","screen","pathname","undefined","duration","format","CrawlerResults","match","params","cache","call","crawlers","isEqual","parseRespAndUpdateCache","refreshTimeout","dividerStyle","borderTop","getIcon","SideMenu","className","sort","SideMenuResults","bottom","PinPage","alert","state","pattern","Pins","pins","Text","CodeInfo","full","code","aceEditorStyle","float","buttonBarStyle","inputStyle","maxWidth","margin","onPlay","warn","source","info","save","CodeForm","setSource","location","target","overlay","Code","Codes","Date","now","Settings","settings","setSettings","dir","Sider","Layout","Content","layoutStyle","minHeight","titleStyle","contentStyle","background","padding","App","path","exact","component","NewProject","Boolean","window","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.10031846.chunk.js","sourcesContent":["export const getHomeRoute = () => '/';\nexport const getNewProjectRoute = () => '/new';\nexport const getSettingsRoute = () => '/settings';\nexport const getPinsRoute = () => '/pins';\nexport const getCodeRoute = (id: string) => `/code/${id}`;\nexport const getCodesRoute = () => `/code`;\nexport const getResultsRoute = (timestamp: string) => `/results/${timestamp}`;","import { isomorRemote } from \"isomor\";\nexport function getSettings(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"getSettings\", args);\n}\nexport function getCrawlers(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"getCrawlers\", args);\n}\nexport function loadProjects(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"loadProjects\", args);\n}\nexport function saveProject(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"saveProject\", args);\n}\nexport function getCrawler(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"getCrawler\", args);\n}\nexport function getPages(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"getPages\", args);\n}\nexport function getPins(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"getPins\", args);\n}\nexport function getPin(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"getPin\", args);\n}\nexport function setCode(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"setCode\", args);\n}\nexport function getCode(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"getCode\", args);\n}\nexport function getCodes(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"getCodes\", args);\n}\nexport function getThumbnail(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"getThumbnail\", args);\n}\nexport function pin(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"pin\", args);\n}\nexport function setZoneStatus(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"setZoneStatus\", args);\n}\nexport function setZonesStatus(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"setZonesStatus\", args);\n}\nexport function setStatus(...args: any) {\n  return isomorRemote(\"server-service\", \"test-crawler\", \"setStatus\", args);\n}","import React from 'react';\n\nconst infoStyle = {\n    lineHeight: 1.2,\n    borderLeft: '8px solid #EEE',\n    paddingLeft: 15,\n    color: '#666',\n    textAlign: 'justify' as 'justify',\n}\n\nexport const Info: React.FunctionComponent = ({ children }) => (\n    <div style={infoStyle}>\n        { children }\n    </div>\n);\n","import { PageData } from '../server/typing';\nimport Fuse from 'fuse.js';\nimport get from 'lodash/get';\nimport { cardStyle, masonryOptions } from '../pages/pageStyle';\n\nexport const searchStyle = {\n    width: cardStyle.width,\n    marginRight: masonryOptions.gutter,\n}\n\nlet timerSearch: NodeJS.Timer;\nexport const onSearch = (\n    setPages: React.Dispatch<React.SetStateAction<PageData[] | undefined>>,\n    pages: PageData[] | undefined,\n    filters: string[],\n) => (value: string) => {\n    if (pages) {\n        if (!value.length) {\n            filterPages(setPages, pages, filters);\n        } else {\n            clearTimeout(timerSearch);\n            timerSearch = setTimeout(() => {\n                filterPages(setPages, searchPages(pages, value), filters);\n            }, 500);\n        }\n    }\n};\n\nconst searchPages = (\n    pages: PageData[],\n    value: string,\n) => {\n    const fuse = new Fuse(pages, {\n        keys: [\n            'url',\n            'viewport.width',\n            'viewport.height',\n            'keywords',\n        ],\n    });\n    return fuse.search(value);\n}\n\n// instead to have 2 fields, we could use one combine with to instance of fuse.js\n// 1 with partial match and 1 with full word match for filters\n// for the input field see \"Search and Select Users\" from select component\nexport const onFilter = (\n    setPages: React.Dispatch<React.SetStateAction<PageData[] | undefined>>,\n    pages: PageData[] | undefined,\n    setFilters: React.Dispatch<React.SetStateAction<any>>,\n) => (filters: string[]) => {\n    if (pages) {\n        setFilters(filters);\n        filterPages(setPages, pages, filters);\n    }\n};\n\nconst filterPages = (\n    setPages: React.Dispatch<React.SetStateAction<PageData[] | undefined>>,\n    pages: PageData[] | undefined,\n    filters: string[]\n) => {\n    if (pages) {\n        if (!filters.length) {\n            setPages(pages);\n        } else {\n            const searchValue = filters.filter(filter => !Object.keys(availableFilters).includes(filter)).join(' ');\n            if (searchValue) {\n                pages = searchPages(pages, searchValue);\n            }\n            setPages(pages.filter(page => {\n                let res = true\n                if (filters.includes('with-diff')) {\n                    const pixelDiffRatio = get(page, 'png.diff.pixelDiffRatio');\n                    res = res && pixelDiffRatio > 0;\n                }\n                if (filters.includes('new')) {\n                    res = res && !!page.png && !page.png.diff\n                }\n                return res;\n            }));\n        }\n    }\n}\n\nexport const availableFilters = {\n    'with-diff': 'with diff',\n    'new': 'new',\n}\n","let masonry: any;\nlet timer: NodeJS.Timer;\n\nexport const setMasonry = (m: any) => masonry = m;\n\nexport const onMasonryImg = () => {\n    if (masonry) masonry.layout();\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n        if (masonry) masonry.layout();\n    }, 500);\n}\n","import React from 'react';\nimport Spin from 'antd/lib/spin';\nimport { RouteComponentProps } from 'react-router-dom';\nimport get from 'lodash/get';\nimport isEqual from 'lodash/isEqual';\n\nimport { Pages}  from '../pages/Pages';\nimport { CrawlerInfo } from './CrawlerInfo';\nimport { Crawler } from '../server/typing';\nimport { getCrawler, getCrawlers } from '../server/service';\nimport { useAsyncCacheEffect, useAsyncCache, Cache, Update } from 'react-async-cache';\nimport { ErrorHandler } from '../common/ErrorHandler';\n\nconst parseRespAndUpdateCache = (\n    response: Crawler,\n    cache: Cache<Crawler[]>,\n    update: Update<Crawler[]>\n) => {\n    if (response) {\n        const crawlers = cache(getCrawlers);\n        if (crawlers) {\n            const index = crawlers.findIndex(crawler => crawler.id === response.id);\n            if (index !== -1) {\n                if (!isEqual(crawlers[index], response)) {\n                    crawlers[index] = response;\n                    update(crawlers, getCrawlers);\n                }\n            }\n        }\n    }\n}\n\nlet timer: NodeJS.Timeout;\nconst refreshTimeout = (call: () => Promise<string>) => {\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n        call();\n    }, 1000);\n}\n\nexport const CrawlerResults = ({\n    match: { params: { timestamp } },\n    history,\n}: RouteComponentProps<{ timestamp: string }>) => {\n    const { cache, update } = useAsyncCache<Crawler[]>();\n    const { error, call, response } = useAsyncCacheEffect<Crawler>(getCrawler, timestamp);\n    React.useEffect(() => {\n        parseRespAndUpdateCache(response, cache, update);\n    }, [response]);\n    if (error) {\n        return <ErrorHandler description={ error.toString() } />;\n    }\n    const lastUpdate = get(response, 'lastUpdate');\n    refreshTimeout(call);\n    return response ? (\n        <>\n            <CrawlerInfo crawler={response} history={history} />\n            <Pages timestamp={timestamp} lastUpdate={lastUpdate} />\n        </>\n    ) : <Spin />;\n}\n","import { Viewport as ViewportObject } from './server/typing';\n\nexport interface ViewportString {\n    name: string;\n    value: string;\n}\n\nexport interface Viewport {\n    name: string;\n    value: ViewportObject;\n}\n\nexport const viewports: Viewport[] = [\n    { name: 'Desktop - 800x600', value: { width: 800, height: 600 } },\n    { name: 'Desktop - 1024x768', value: { width: 1024, height: 768 } },\n    { name: 'Desktop - 1920x1080', value: { width: 1920, height: 1080 } },\n    { name: 'iPhone 5 - 320x568', value: { width: 320, height: 568, isMobile: true, hasTouch: true } },\n    { name: 'iPhone 6 - 375x667', value: { width: 375, height: 667, isMobile: true, hasTouch: true } },\n    { name: 'Ipad - 768x1024', value: { width: 768, height: 1024, isMobile: true, hasTouch: true } },\n    { name: 'Galaxy S5 - 360x640', value: { width: 360, height: 640, isMobile: true, hasTouch: true } },\n];\n\nexport const viewportsStr: ViewportString[] = viewports.map(\n    ({ value, ...viewport }) => ({ ...viewport, value: JSON.stringify(value) })\n);\n\nexport const getDefaultViewportStr = () => viewportsStr[0];\nexport const getDefaultViewport = (): ViewportObject => viewports[0].value;\n\nexport const getViewportName = (value: ViewportObject) => {\n    const valueStr = JSON.stringify(value);\n    const index = viewportsStr.findIndex(vp => vp.value === valueStr);\n    if (index !== -1) {\n        return viewportsStr[index].name;\n    }\n    const { width, height, isMobile } = value;\n    return `${width}x${height}${ isMobile && ' mobile'}`;\n};\n","import React from 'react';\n\nimport Select from 'antd/lib/select';\nimport { viewportsStr, getDefaultViewportStr } from '../viewport';\n\nconst { Option } = Select;\n\nexport const Viewport = ({ getFieldDecorator, initialValue }: any) => getFieldDecorator(\n    'viewport',\n    {\n        initialValue: initialValue || getDefaultViewportStr().name,\n    }\n)(\n    <Select>\n        {viewportsStr.map(\n            ({ value, name }) => <Option key={value} value={value}>{name}</Option>\n        )}\n    </Select>\n);\n","import React from 'react';\nimport Input from 'antd/lib/input';\nimport InputNumber from 'antd/lib/input-number';\nimport Checkbox from 'antd/lib/checkbox';\nimport Form, { FormComponentProps } from 'antd/lib/form';\nimport Icon from 'antd/lib/icon';\nimport Popover from 'antd/lib/popover';\nimport Radio from 'antd/lib/radio';\nimport Typography from 'antd/lib/typography';\nimport notification from 'antd/lib/notification';\nimport Button from 'antd/lib/button';\nimport { RouteComponentProps } from 'react-router';\nimport { CrawlerInput } from '../server/typing';\n\nimport { getHomeRoute } from '../routes';\nimport { saveProject } from '../server/service';\nimport { Info } from '../common/Info';\nimport { Viewport } from './Viewport';\nimport { getDefaultViewport } from '../viewport';\nimport { History } from 'history';\n\nconst inlineStyle = {\n    marginRight: 10,\n    display: 'inline-block',\n}\n\nconst radioGroupdStyle = {\n    marginRight: 30,\n}\n\nconst start = async (\n    history: History<any>,\n    { name, viewport, ...input }: (CrawlerInput & { name: string, viewport: string }),\n) => {\n    try {\n        await saveProject({ ...input, viewport: JSON.parse(viewport) }, name);\n        history.push(getHomeRoute());\n    } catch (error) {\n        notification['error']({\n            message: 'Something went wrong!',\n            description: error.toString(),\n        });\n    }\n}\n\nconst handleSubmit = (history: History<any>, validateFields: any) => (event: React.FormEvent<any>) => {\n    event.preventDefault();\n    validateFields((err: any, values: any) => {\n        if (!err) {\n            start(history, values);\n        }\n    });\n}\n\ntype Props = FormComponentProps & RouteComponentProps;\nconst NewProject = ({ history, form: { getFieldDecorator, validateFields, getFieldValue } }: Props) => {\n    return (\n        <Form onSubmit={handleSubmit(history, validateFields)}>\n            <Form.Item>\n                {getFieldDecorator('name', {\n                    rules: [{ required: true, message: 'Please give a name to the project.' }],\n                })(\n                    <Input addonBefore=\"Name\" placeholder=\"Project name\" />\n                )}\n            </Form.Item>\n            <Form.Item>\n                {getFieldDecorator('url', {\n                    rules: [{ required: true, message: 'Please input an URL to crawl.' }],\n                })(\n                    <Input\n                        placeholder=\"https://domain.com/\"\n                        addonBefore=\"URL\"\n                        addonAfter={\n                            <Viewport\n                                getFieldDecorator={getFieldDecorator}\n                                initialValue={JSON.stringify(getDefaultViewport())}\n                            />\n                        }\n                    />\n                )}\n            </Form.Item>\n            <Form.Item>\n                <Form.Item style={inlineStyle}>\n                    {getFieldDecorator('method', {\n                        initialValue: 'spiderbot',\n                    })(\n                        <Radio.Group size=\"small\" style={radioGroupdStyle}>\n                            <Radio.Button value={'spiderbot'}><Icon type=\"radar-chart\" /> Spider bot</Radio.Button>\n                            <Radio.Button value={'urls'}><Icon type=\"ordered-list\" /> URLs list</Radio.Button>\n                        </Radio.Group>\n                    )}\n                </Form.Item>\n                {getFieldValue('method') === 'spiderbot' && <Form.Item style={inlineStyle}>\n                    Limit {getFieldDecorator('limit')(\n                        <InputNumber min={0} size=\"small\" />\n                    )}\n                    &nbsp;<Popover content={<div>\n                        <b>Limit the number of sibling pages. </b>\n                        For example, with the urls:\n                        <ul>\n                            <li>/item/1</li>\n                            <li>/item/2</li>\n                            <li>/item/3</li>\n                            <li>/item/4</li>\n                        </ul> using the limit <b>2</b> will only crawl <b>/item/1</b> and <b>/item/2</b>.<br /><br />\n                        Use <b>0</b> to skip the limit.</div>} trigger=\"click\" overlayStyle={{ width: 200 }}>\n                        <Icon type=\"question-circle\" />\n                    </Popover>\n                </Form.Item>}\n                <Info>\n                    <Typography.Paragraph ellipsis={{ rows: 1, expandable: true }}>\n                        <b>Spider bot</b> crawling method will get all the links inside the page of the given URL\n                        and crawl the children. It will then continue do the same with the children till no new\n                        link is found. Be careful if you have big website, this is most likely not the right\n                        solution for you.\n                    </Typography.Paragraph>\n                    <Typography.Paragraph ellipsis={{ rows: 1, expandable: true }}>\n                        <b>URLs list</b> crawling method will crawl a specific sets of URLs. In the URL input field\n                        you must provide an endpoint containing a list of URLs (a simple text format, with one URL\n                        per line). The crawler will crawl each of those URL only and will not try to find links in\n                        the page.\n                    </Typography.Paragraph>\n                </Info>\n            </Form.Item>\n            <Form.Item>\n                {getFieldDecorator('autopin', {\n                    valuePropName: 'checked',\n                })(\n                    <Checkbox>Automatically pin new page founds.</Checkbox>\n                )}\n            </Form.Item>\n            <Form.Item>\n                <Form.Item style={inlineStyle}>\n                    <Button\n                        type=\"primary\"\n                        icon=\"plus\"\n                        htmlType=\"submit\"\n                    >\n                        Create\n                    </Button>\n                </Form.Item>\n            </Form.Item>\n        </Form>\n    );\n}\n\nconst NewForm = Form.create({ name: 'start_crawler' })(NewProject);\nexport default NewForm;\n","import React from 'react';\nimport List from 'antd/lib/list';\nimport Button from 'antd/lib/button';\nimport { Link } from 'react-router-dom';\nimport notification from 'antd/lib/notification';\nimport Typography from 'antd/lib/typography';\nimport { loadProjects } from '../server/service';\nimport { Project } from '../server/typing';\nimport { getNewProjectRoute } from '../routes';\n\nconst load = async (\n    setProjects: React.Dispatch<React.SetStateAction<Project[]>>,\n) => {\n    try {\n        const list = await loadProjects();\n        setProjects(list);\n    } catch (error) {\n        notification['warning']({\n            message: 'Something went wrong while loading presets.',\n            description: error.toString(),\n        });\n    }\n}\n\nexport const Projects = () => {\n    const [projects, setProjects] = React.useState<Project[]>([]);\n\n    React.useEffect(() => { load(setProjects); }, []);\n    return (\n        <>\n            <Typography.Title level={3}>Projects</Typography.Title>\n            <List\n                itemLayout=\"horizontal\"\n                dataSource={projects}\n                renderItem={({ name, crawlerInput: { url } }) => (\n                    <List.Item\n                        actions={[<a key=\"list-loadmore-edit\">edit</a>, <a key=\"list-loadmore-more\">more</a>]}\n                    >\n                        <List.Item.Meta\n                            title={<a href=\"https://ant.design\">{name}</a>}\n                            description={url}\n                        />\n                    </List.Item>\n                )}\n            />\n            <Link to={getNewProjectRoute()}>\n                <Button icon=\"plus\" size=\"small\">New</Button>\n            </Link>\n        </>\n    );\n}\n","export const coverStyle = {\n    textAlign: 'center',\n    // borderBottom: '1px solid #888',\n}\n\nexport const imgStyle = {\n    width: 300,\n}\n\nexport const imgMargin = 10;\n\nexport const cardStyle = {\n    width: imgStyle.width + imgMargin*2,\n    marginBottom: 10,\n};\n\nexport const masonryStyle = {\n    paddingTop: 10,\n    paddingBottom: 10,\n}\n\nexport const masonryOptions = {\n    gutter: 10,\n    // percentPosition: true,\n    fitWidth: true,\n}\n\nexport const iconTheme = 'outlined'; // 'twoTone'\n","import React from 'react';\nimport message from 'antd/lib/message';\nimport notification from 'antd/lib/notification';\nimport { useAsyncCache, Update } from 'react-async-cache';\nimport Button from 'antd/lib/button';\n\nimport { setZoneStatus } from '../server/service';\nimport { getPages } from '../server/service';\nimport { PageData } from '../server/typing';\n\n\nconst buttonStyle = {\n    marginLeft: 5,\n    marginRight: 5,\n}\n\ninterface Props {\n    index: number;\n    timestamp: string;\n    id: string;\n}\n\nconst onSetStatus = (update: Update<PageData[]>, status: string, { timestamp, id, index }: Props) => async () => {\n    try {\n        const pages = await setZoneStatus(timestamp.toString(), id, index, status);\n        update(pages, getPages, timestamp);\n        message.success('Page pinned as reference for comparison.', 2);\n    } catch (error) {\n        notification['error']({\n            message: 'Something went wrong!',\n            description: error.toString(),\n        });\n    }\n}\n\nexport const DiffImageButtons = (props: Props) => {\n    const { update } = useAsyncCache();\n    return (\n        <>\n            <Button\n                style={buttonStyle}\n                icon=\"check\"\n                size=\"small\"\n                onClick={onSetStatus(update, 'valid', props)}>Valid</Button>\n            <Button\n                style={buttonStyle}\n                icon=\"pushpin\"\n                size=\"small\"\n                onClick={onSetStatus(update, 'pin', props)}>Always valid</Button>\n            <Button\n                style={buttonStyle}\n                icon=\"warning\"\n                size=\"small\"\n                type=\"danger\"\n                onClick={onSetStatus(update, 'report', props)}>Report</Button>\n        </>\n    );\n}\n","import React, { useState, useEffect } from 'react';\nimport Popover from 'antd/lib/popover';\n\nimport {\n    imgStyle,\n    imgMargin,\n} from '../pages/pageStyle';\n\nimport { DiffImageButtons } from './DiffImageButtons';\nimport { getThumbnail } from '../server/service';\nimport { Zone } from '../server/typing';\n\nexport const getColorByStatus = (status: string) => {\n    if (status === 'valid' || status === 'pin') {\n        return '#0F0'; //'green';\n    } else if (status === 'report') {\n        return 'red';\n    }\n    return 'yellow';\n}\n\nconst zoneStyle = ({ xMin, yMin, xMax, yMax }: any, ratio: number, img: string | undefined, over: boolean, status: string) => {\n    const top = yMin / ratio;\n    const left = xMin / ratio;\n    return ({\n        width: (xMax - xMin) / ratio + 1,\n        height: (yMax - yMin) / ratio + 1,\n        top,\n        left: left + imgMargin,\n        border: `1px solid ${getColorByStatus(status)}`,\n        position: 'absolute',\n        backgroundImage: over ? `url(\"${img}\")` : 'none',\n        backgroundPosition: `${-left}px ${-top}px`,\n    });\n}\n\ninterface Props {\n    folder: string;\n    id: string;\n    zone: Zone;\n    originalWidth: number;\n    index: number;\n    status: string;\n    width: number;\n};\n\nexport const DiffZone = ({ folder, id, index, originalWidth, zone, status, width }: Props) => {\n    const [thumb, setThumb] = useState<string>();\n    const load = async () => {\n        setThumb(await getThumbnail('base', id, width));\n    }\n    useEffect(() => { load(); }, []);\n    const [hover, setHover] = useState(false);\n    const ratio = originalWidth / width;\n    return (\n        <Popover key={`${id}-${index}`} content={(\n            <DiffImageButtons index={index} timestamp={folder} id={id} />\n        )} trigger=\"click\">\n            <div\n                style={zoneStyle(zone, ratio, thumb, hover, status) as any}\n                onMouseOver={() => setHover(true)}\n                onMouseOut={() => setHover(false)}\n            />\n        </Popover>\n    );\n}\n","import React, { useState, useEffect } from 'react';\n\nimport {\n    coverStyle,\n    imgStyle,\n} from '../pages/pageStyle';\n\nimport { getThumbnail } from '../server/service';\nimport { DiffZone } from './DiffZone';\nimport { PngDiffDataZone } from '../server/typing';\n\ninterface Props {\n    folder: string;\n    id: string;\n    zones?: PngDiffDataZone[];\n    originalWidth?: number;\n    width?: number;\n    onImg?: () => void;\n};\n\nexport const DiffImage = ({ folder, id, zones, originalWidth = 0, onImg = () => {}, width = imgStyle.width }: Props) => {\n    const [thumb, setThumb] = useState<string>();\n    const load = async () => {\n        setThumb(await getThumbnail(folder, id, width));\n        onImg();\n    }\n    useEffect(() => { load(); }, []);\n    return thumb ? (\n        <div style={coverStyle as any}>\n            {zones && zones.map(({ zone, status }: PngDiffDataZone, index: number) =>\n                <DiffZone {...{ folder, id, index, originalWidth, zone, status, width }} key={`zone-${id}-${index}`} />)}\n            <img style={{ width }} alt=\"\" src={thumb} />\n        </div>) : null;\n}\n","import React from 'react';\nimport Alert from 'antd/lib/alert';\n\ninterface Props {\n    message?: string;\n    description: string;\n}\nexport const ErrorHandler = ({ message = 'Something went wrong', description }: Props) => (\n    <Alert\n        message={message}\n        description={description}\n        type=\"warning\"\n        showIcon\n    />\n);","import React from 'react';\nimport { PageData } from '../server/typing';\n\nimport { onSearch, searchStyle, onFilter } from './search';\nimport Select from 'antd/lib/select';\n\nconst { Option } = Select;\n\nexport interface Filters {\n    [key: string]: string;\n}\n\ninterface Props {\n    withFilters?: Filters;\n    response: PageData[],\n    children: (pages: PageData[] | undefined) => React.ReactNode,\n}\nexport const Search = ({ children, response, withFilters }: Props) => {\n    const [pages, setPages] = React.useState<PageData[]>();\n    const [selectedFilters, setSelectedFilters] = React.useState<string[]>([]);\n    const [pagesFiltered, setPagesFiltered] = React.useState<PageData[]>();\n    React.useEffect(() => {\n        setPages(response);\n        onFilter(setPagesFiltered, response, setSelectedFilters)(selectedFilters);\n    }, [response]);\n\n    return (\n        <>\n            <Select\n                mode=\"tags\"\n                onChange={onFilter(setPagesFiltered, pages, setSelectedFilters)}\n                tokenSeparators={[',']}\n                style={searchStyle}\n                placeholder=\"Search\"\n                filterOption={false}\n                onSearch={onSearch(setPagesFiltered, pages, selectedFilters)}\n            >\n                { !!withFilters && Object.keys(withFilters).map(key => <Option key={key}>{withFilters[key]}</Option>) }\n            </Select>\n            {children(pagesFiltered)}\n        </>\n    );\n}\n","import { unix } from 'moment';\n\nexport const timestampToString = (timestamp: number) => unix(timestamp)//.format('YYYY.DD.MM HH:mm')\n    .calendar()\n\nexport const sigDig = (n: number, precision = 1) => {\n    if (!n) {\n        return n;\n    }\n    const fix = (precision - 1) - Math.floor(Math.log(n) / Math.log(10));\n    return n.toFixed(fix);\n}","import React from 'react';\nimport { PngDiffDataZone } from '../server/typing';\n\nimport { getColorByStatus } from '../diff/DiffZone';\n\nconst getCountZonesPerStatus = (zones: any, perStatus: string[]) =>\n    zones.filter(({ status }: any) => perStatus.includes(status)).length\n\nexport const PageImageDiffZone = ({ zones }: {\n    zones: PngDiffDataZone[]\n}) => (\n    <p>\n        <b>Zone:</b>&nbsp;\n            {[['diff'], ['valid', 'pin'], ['report']].map(([status, ...more]) => (\n            <React.Fragment key={status}>\n                <span style={{\n                    marginLeft: 10,\n                    color: getColorByStatus(status)\n                }}></span> <b>{getCountZonesPerStatus(zones, [status, ...more])}</b> {status}\n            </React.Fragment>\n        ))}\n    </p>\n);","import React from 'react';\nimport Icon from 'antd/lib/icon';\n\nimport { iconTheme } from './pageStyle';\nimport { PngDiffData } from '../server/typing';\nimport { sigDig } from '../utils';\nimport { PageImageDiffZone } from './PageImageDiffZone';\n\nexport const PageImageDiff = ({ diff }: {\n    diff: PngDiffData;\n}) => (\n    <>\n        <p>\n            <Icon type=\"picture\" theme={iconTheme} />&nbsp;\n                    Pixel diff ratio: {sigDig(diff.pixelDiffRatio)}\n        </p>\n        {diff.zones && diff.zones.length > 0 &&\n            <PageImageDiffZone zones={diff.zones} />\n        }\n    </>\n);","import React from 'react';\nimport Tag from 'antd/lib/tag';\nimport Icon from 'antd/lib/icon';\n\nimport { iconTheme } from './pageStyle';\nimport { PngDiffData } from '../server/typing';\nimport { PageImageDiff } from './PageImageDiff';\n\nexport const PageImage = ({ diff }: {\n    diff?: PngDiffData;\n}) => (!diff)\n        ? (\n            <div>\n                <Icon type=\"picture\" theme={iconTheme} />&nbsp;\n                New screenshot <Tag color=\"green\">New</Tag>\n            </div>\n        ) : (\n            <PageImageDiff diff={diff} />\n        );","import React from 'react';\nimport Alert from 'antd/lib/alert';\nimport Icon from 'antd/lib/icon';\nimport { PngDiffData } from '../server/typing';\n// import * as Convert from 'ansi-to-html';\n\nimport { iconTheme } from './pageStyle';\nimport { PageImage } from './PageImage';\n\nconst Convert = require('ansi-to-html');\nconst convert = new Convert({\n    fg: '#333',\n});\n\nconst alertStyle = {\n    marginBottom: 10,\n}\n\ninterface Props {\n    pageError: any;\n    url: string;\n    png?: {\n        width: number;\n        diff?: PngDiffData;\n    };\n}\n\nexport const Page = ({ pageError, url, png }: Props) => {\n    return (\n        <>\n            {pageError && <Alert message={\n                <div dangerouslySetInnerHTML={{ __html: convert.toHtml(pageError) }} />\n            } type=\"warning\" style={alertStyle} />}\n            <p><Icon type=\"link\" /> <a href={url}>{url}</a></p>\n            {png\n                ? <PageImage diff={png.diff} />\n                : <p><Icon type=\"picture\" theme={iconTheme} /> No screenshot available</p>\n            }\n        </>\n    );\n}\n","import React from 'react';\nimport Icon from 'antd/lib/icon';\nimport message from 'antd/lib/message';\nimport notification from 'antd/lib/notification';\nimport { useAsyncCache } from 'react-async-cache';\nimport { setZonesStatus, getPages } from '../server/service';\n\nconst onClick = (update: any, { timestamp, id, status }: any) => async () => {\n    try {\n        const pages = await setZonesStatus(timestamp.toString(), id, status);\n        update(pages, getPages, timestamp);\n        message.success(`All zone are set to \"${status}\".`, 2);\n    } catch (error) {\n        notification['error']({\n            message: 'Something went wrong!',\n            description: error.toString(),\n        });\n    }\n}\n\nexport const PagesActionZone = (props: any) => {\n    const { update } = useAsyncCache();\n    const { status, type } = props;\n    return (\n        <Icon type={type} title={`Set all zone to \"${status}\".`} onClick={onClick(update, props)} />\n    );\n}\n","import React from 'react';\nimport Icon from 'antd/lib/icon';\nimport message from 'antd/lib/message';\nimport notification from 'antd/lib/notification';\nimport { pin } from '../server/service';\n\n\nconst onPin = ({ timestamp, id }: any) => async () => {\n    try {\n        await pin(timestamp.toString(), id);\n        message.success('Page pinned as reference for comparison.', 2);\n    } catch (error) {\n        notification['error']({\n            message: 'Something went wrong!',\n            description: error.toString(),\n        });\n    }\n}\n\nconst PagesActionPin = (props: any) =>\n    <Icon\n        type=\"pushpin\"\n        title=\"pin as reference for comparison\"\n        onClick={onPin(props)}\n    />;\n\nexport default function(props: any) {\n    return PagesActionPin(props);\n}\n","import React from 'react';\nimport Icon from 'antd/lib/icon';\nimport Modal from 'antd/lib/modal';\nimport { DiffImage } from '../diff/DiffImage';\nimport { PngDiffData } from '../server/typing';\nimport { Page } from './Page';\n\nconst onClick = (setVisible: React.Dispatch<React.SetStateAction<boolean>>) => () => {\n    setVisible(true);\n}\n\nconst onCancel = (setVisible: React.Dispatch<React.SetStateAction<boolean>>) => () => {\n    setVisible(false);\n}\n\ninterface Props {\n    timestamp: string;\n    id: string;\n    url: string;\n    pageError: any;\n    png: {\n        width: number;\n        diff?: PngDiffData;\n    };\n}\n\nexport const PagesActionFullscreen = ({ timestamp, id, png, url, pageError }: Props) => {\n    const [visible, setVisible] = React.useState<boolean>(false);\n    return (\n        <>\n            <Modal\n                title=\"\"\n                visible={visible}\n                onCancel={onCancel(setVisible)}\n                footer={null}\n                width={png.width + 40}\n            >\n                <div style={{position: \"relative\"}}>\n                    <DiffImage\n                        folder={timestamp}\n                        id={id}\n                        zones={png.diff && png.diff.zones}\n                        originalWidth={png.width}\n                        width={png.width}\n                    />\n                    <Page url={url} pageError={pageError} png={png} />\n                </div>\n            </Modal>\n            <Icon type=\"fullscreen\" title=\"fullscreen\" onClick={onClick(setVisible)} />\n        </>\n    );\n}\n","import React from 'react';\nimport { PngDiffData } from '../server/typing';\n\nimport { PagesActionZone } from './PagesActionZone';\nimport PagesActionPin from './PagesActionPin';\nimport { PagesActionFullscreen } from './PagesActionFullscreen';\n\ninterface Props {\n    timestamp: string;\n    id: string;\n    url: string;\n    pageError: any;\n    png?: {\n        width: number;\n        diff?: PngDiffData;\n    };\n}\n\nexport const PagesActions = ({ timestamp, id, png, url, pageError }: Props) => [\n    ...[png && <PagesActionFullscreen png={png} id={id} timestamp={timestamp} url={url} pageError={pageError} />],\n    <PagesActionZone type=\"check\" timestamp={timestamp} id={id} status={'valid'} zones={png && png.diff ? png.diff.zones : []} />,\n    <PagesActionZone type=\"warning\" timestamp={timestamp} id={id} status={'report'} zones={png && png.diff ? png.diff.zones : []} />,\n    <PagesActionPin timestamp={timestamp} id={id} />,\n    // <Icon type=\"ellipsis\" title=\"more\" />,\n];\n","import React from 'react';\nimport Card from 'antd/lib/card';\nimport Spin from 'antd/lib/spin';\nimport Masonry from 'react-masonry-component';\nimport { useAsyncCacheEffect } from 'react-async-cache';\n\nimport {\n    masonryStyle,\n    masonryOptions,\n    cardStyle,\n} from './pageStyle';\nimport { DiffImage } from '../diff/DiffImage'\nimport { PageData } from '../server/typing';\nimport { getPages } from '../server/service';\nimport { ErrorHandler } from '../common/ErrorHandler';\nimport { Search } from '../search/Search';\nimport { Page } from './Page';\nimport { PagesActions } from './PagesActions';\nimport { availableFilters } from '../search/search';\nimport { setMasonry, onMasonryImg } from '../common/refreshMasonry';\n\ninterface Props {\n    timestamp: string;\n    lastUpdate: number;\n}\n\nexport const Pages = ({ timestamp, lastUpdate }: Props) => {\n    const { response, error } = useAsyncCacheEffect<PageData[]>([lastUpdate], getPages, timestamp);\n    if (error) {\n        return <ErrorHandler description={error.toString()} />;\n    }\n\n    return (\n        <Search response={response} withFilters={availableFilters}>\n            {(pagesFiltered) => pagesFiltered ? (\n                <Masonry\n                    style={masonryStyle}\n                    options={masonryOptions}\n                    ref={(c: any) => { setMasonry(c && c.masonry); }}\n                >\n                    {\n                        pagesFiltered.map(({ id, url, png, error: pageError }: PageData) => (\n                            <Card\n                                key={id}\n                                style={cardStyle}\n                                cover={png && <DiffImage\n                                    folder={timestamp}\n                                    id={id}\n                                    zones={png.diff && png.diff.zones}\n                                    originalWidth={png.width}\n                                    onImg={onMasonryImg}\n                                />}\n                                actions={PagesActions({ id, timestamp, png, url, pageError })}\n                            >\n                                <Page url={url} pageError={pageError} png={png} />\n                            </Card>\n                        ))\n                    }\n                </Masonry >\n            ) : <Spin />\n            }\n        </Search>);\n}\n","import React from 'react';\nimport Switch from 'antd/lib/switch';\nimport message from 'antd/lib/message';\nimport notification from 'antd/lib/notification';\nimport { setStatus, getCrawler } from '../server/service';\nimport { useAsyncCache } from 'react-async-cache';\n\nconst onChange = (update: any, timestamp: string) => async (value: boolean) => {\n    try {\n        const status = value ? 'done' : 'review';\n        const crawler = await setStatus(timestamp, status);\n        update(crawler);\n        message.success(`Status set to \"${status}\".`, 2);\n    } catch (error) {\n        notification['error']({\n            message: 'Something went wrong!',\n            description: error.toString(),\n        });\n    }\n}\n\nexport const SwitchStatus = ({ timestamp, status }: any) => {\n    const { update } = useAsyncCache(getCrawler, timestamp.toString());\n    return <Switch\n        checkedChildren=\"done\"\n        unCheckedChildren=\"review\"\n        checked={status === 'done'}\n        onChange={onChange(update, timestamp.toString())}\n    />;\n}","import React from 'react';\nimport Typography from 'antd/lib/typography';\nimport Progress from 'antd/lib/progress';\nimport Button from 'antd/lib/button';\nimport Icon from 'antd/lib/icon';\nimport { Crawler } from '../server/typing';\nimport { History } from 'history';\nimport { stringify } from 'query-string';\nimport { duration } from 'moment';\nimport 'moment-duration-format';\n\nimport { timestampToString } from '../utils';\nimport { SwitchStatus } from './SwitchStatus';\nimport { getHomeRoute } from '../routes';\nimport { getViewportName } from '../viewport';\n\nconst { Title } = Typography;\n\nconst warningStyle = {\n    color: '#faad29',\n};\n\nconst marginRightStyle = {\n    marginRight: 10,\n};\n\nconst limitStyle = {\n    color: '#999',\n    fontSize: 11,\n};\n\n// need to flatten props and use react memo\nexport const CrawlerInfo = ({\n    crawler: {\n        timestamp,\n        url,\n        diffZoneCount,\n        errorCount,\n        status,\n        urlsCount,\n        inQueue,\n        startAt,\n        lastUpdate,\n        method,\n        limit,\n        autopin,\n        viewport,\n    },\n    history,\n}: { crawler: Crawler, history: History }) => {\n    const total = urlsCount + inQueue;\n    const percent = Math.floor(urlsCount / total * 100);\n    const onReRun = () => {\n        history.push({\n            pathname: getHomeRoute(),\n            search: stringify({ url, method, limit, autopin, viewport: JSON.stringify(viewport) }),\n        });\n    };\n    const screen = getViewportName(viewport);\n    return (\n        <>\n            <Title level={3}>{timestampToString(timestamp)}</Title>\n            <p>\n                <Button icon=\"retweet\" size=\"small\" onClick={onReRun} style={marginRightStyle}>\n                    Re-run\n                </Button>\n                {(diffZoneCount > 0 || errorCount > 0)\n                    && <SwitchStatus status={status} timestamp={timestamp} />}\n            </p>\n            <p><b>URL:</b> {url}</p>\n            <p><b>Screen:</b> {screen}</p>\n            <p>\n                <b>URL crawled:</b> {urlsCount}\n                {limit !== undefined && limit > 0 &&\n                    <span style={limitStyle}> (with limit set to {limit})</span>\n                }\n            </p>\n            <p><b>Duration:</b> {duration(lastUpdate - startAt).format('h [hrs], m [min], s [sec]')}</p>\n            {inQueue > 0 && <>\n                <Progress percent={percent} />\n                <p><b>In queue:</b> {inQueue}</p>\n            </>}\n            {errorCount > 0 &&\n                <p style={warningStyle}>\n                    <Icon type=\"exclamation-circle\" /> {errorCount} error(s) founds\n                </p>\n            }\n        </>\n    );\n}\n","import React from 'react';\nimport Icon from 'antd/lib/icon';\nimport Menu from 'antd/lib/menu';\nimport { Link } from 'react-router-dom';\nimport { Crawler } from '../server/typing';\n\nimport { getResultsRoute } from '../routes';\nimport { timestampToString } from '../utils';\n\nconst dividerStyle = (index: number) => index === 0 ? ({\n    borderTop: '1px solid #7e8791',\n}) : ({});\n\nconst getIcon = (diffZoneCount: number, errorCount: number, status: string, inQueue: number) => {\n    if (inQueue > 0) {\n        return 'loading';\n    }\n    if (!diffZoneCount && errorCount === 0) {\n        return 'check';\n    }\n    if (status === 'done') {\n        return 'issues-close';\n    }\n    return 'exclamation-circle';\n}\n\nexport const SideMenuResults = (crawlers: Crawler[]) =>\n    crawlers.sort(({ timestamp: a }: any, { timestamp: b }: any) => b - a)\n        .map(({ timestamp, url, id, diffZoneCount, errorCount, status, inQueue }: any, index: number) => (\n            <Menu.Item key={`crawler-${id}`} title={url} style={dividerStyle(index)}>\n                <Icon type={getIcon(diffZoneCount, errorCount, status, inQueue)} />\n                <span className=\"nav-text\">\n                    {timestampToString(timestamp)}\n                </span>\n                <Link to={getResultsRoute(timestamp)} />\n            </Menu.Item>\n        ));\n\n","import React from 'react';\nimport Icon from 'antd/lib/icon';\nimport Menu from 'antd/lib/menu';\nimport Affix from 'antd/lib/affix';\nimport { Link } from 'react-router-dom';\nimport { Crawler } from '../server/typing';\nimport { useAsyncCacheEffect } from 'react-async-cache';\n\nimport { getHomeRoute, getPinsRoute, getSettingsRoute, getCodesRoute } from '../routes';\nimport { getCrawlers } from '../server/service';\nimport { ErrorHandler } from '../common/ErrorHandler';\nimport { SideMenuResults } from './SideMenuResults';\n\nexport const SideMenu = () => {\n    const { response: crawlers, error } = useAsyncCacheEffect<Crawler[]>(getCrawlers);\n    if (error) {\n        return <ErrorHandler description={error.toString()} />;\n    }\n    return (\n        <>\n            <Menu theme=\"dark\" mode=\"inline\">\n                <Menu.Item key=\"new\">\n                    <Icon type=\"plus\" />\n                    <span className=\"nav-text\">Projects</span>\n                    <Link to={getHomeRoute()} />\n                </Menu.Item>\n                <Menu.Item key=\"pins\">\n                    <Icon type=\"pushpin\" />\n                    <span className=\"nav-text\">Pins</span>\n                    <Link to={getPinsRoute()} />\n                </Menu.Item>\n                <Menu.Item key=\"codes\">\n                    <Icon type=\"code\" />\n                    <span className=\"nav-text\">Codes</span>\n                    <Link to={getCodesRoute()} />\n                </Menu.Item>\n                {crawlers && SideMenuResults(crawlers) }\n            </Menu>\n            <Affix style={{ position: 'absolute', bottom: 15, left: 15 }}>\n                <Link to={getSettingsRoute()}>\n                    <Icon type=\"setting\" />\n                </Link>\n            </Affix>\n        </>\n    );\n}\n","import React from 'react';\nimport Card from 'antd/lib/card';\nimport Icon from 'antd/lib/icon';\n\nimport {\n    cardStyle,\n    iconTheme,\n} from '../pages/pageStyle';\nimport { DiffImage } from '../diff/DiffImage';\nimport { PngDiffData, Viewport } from '../server/typing';\nimport { Link } from 'react-router-dom';\nimport { getCodeRoute } from '../routes';\nimport { getViewportName } from '../viewport';\n\ninterface Props {\n    id: string;\n    url: string;\n    viewport?: Viewport,\n    onImg: () => void;\n    png?: {\n        width: number;\n        diff?: PngDiffData;\n    };\n}\nexport const PinPage = ({ id, url, viewport, onImg, png }: Props) => (\n    <Card\n        style={cardStyle}\n        cover={png && <DiffImage folder='base' id={id} onImg={onImg} />}\n        actions={[\n            <Icon type=\"delete\" title={`Delete pin`} onClick={() => alert('Not yet implemented')} />,\n            (<Link to={{\n                pathname: getCodeRoute(id),\n                state: { pattern: url }\n            }}>\n                <Icon type=\"code\" title={`Insert code while crawling`} />\n            </Link>),\n        ]}\n    >\n        <p><Icon type=\"link\" /> <a href={url}>{url}</a></p>\n        {!png && <p><Icon type=\"picture\" theme={iconTheme} /> No screenshot available</p>}\n        {viewport && <p><Icon type=\"picture\" theme={iconTheme} /> {getViewportName(viewport)}</p>}\n    </Card>\n);\n","import React from 'react';\nimport Spin from 'antd/lib/spin';\nimport Typography from 'antd/lib/typography';\nimport Masonry from 'react-masonry-component';\n\nimport {\n    masonryStyle,\n    masonryOptions,\n} from '../pages/pageStyle';\nimport { getPins } from '../server/service';\nimport { PageData } from '../server/typing';\nimport { useAsyncCacheEffect } from 'react-async-cache';\nimport { ErrorHandler } from '../common/ErrorHandler';\nimport { PinPage } from './PinPage';\nimport { Search } from '../search/Search';\nimport { setMasonry, onMasonryImg } from '../common/refreshMasonry';\n\nconst { Title } = Typography;\n\nexport const Pins = () => {\n    const { response, error } = useAsyncCacheEffect<PageData[]>(getPins);\n    if (error) {\n        return <ErrorHandler description={error.toString()} />;\n    }\n\n    return (\n        <>\n            <Title level={3}>Pins</Title>\n            <Search response={response}>\n                {(pins) => pins ? (\n                    <Masonry\n                        style={masonryStyle}\n                        options={masonryOptions}\n                        ref={(c: any) => { setMasonry(c && c.masonry); }}\n                    >\n                        {pins.map(({ id, url, png, viewport }: PageData) => (\n                            <PinPage\n                                id={id}\n                                key={id}\n                                url={url}\n                                png={png}\n                                viewport={viewport}\n                                onImg={onMasonryImg}\n                            />\n                        ))}\n                    </Masonry>\n                ) : <Spin />\n                }\n            </Search>\n        </>\n    );\n}\n","import React from 'react';\nimport Typography from 'antd/lib/typography';\n\nimport { Info } from '../common/Info';\n\nconst { Paragraph, Text } = Typography;\n\nexport const CodeInfo = ({full = true}) => (\n    <Info>\n        <Paragraph>\n            Inject some code in the crawler while parsing the page. This code will\n            be executed just after the page finish loaded, before to make the screenshot and\n            before extracting the links. {full && <>You need to export a function that will take as\n            first parameter the <Text code>page</Text> coming from Puppeteer.</>}\n        </Paragraph>\n        {full && <Paragraph>\n            <Text code>module.exports = async (page) => ...some code</Text>\n        </Paragraph>}\n    </Info>\n);\n","import { cardStyle } from \"../pages/pageStyle\";\n\nexport const aceEditorStyle = {\n    border: '1px solid #EEE',\n    marginBottom: 15,\n    marginRight: 15,\n    float: 'left' as 'left',\n}\n\nexport const cardRightStyle = {\n    ...cardStyle,\n    float: 'left' as 'left',\n}\n\nexport const buttonBarStyle = {\n    marginBottom: 15,\n}\n\nexport const buttonStyle = {\n    marginRight: 10,\n}\n\nexport const inputStyle = {\n    maxWidth: 500,\n    margin: '0px 0px 10px 0px',\n}\n","import React from 'react';\nimport Input from 'antd/lib/input';\nimport notification from 'antd/lib/notification';\nimport Icon from 'antd/lib/icon';\nimport Button from 'antd/lib/button';\nimport message from 'antd/lib/message';\nimport Dropdown from 'antd/lib/dropdown';\nimport Typography from 'antd/lib/typography';\nimport Form, { FormComponentProps } from 'antd/lib/form';\nimport { Code } from '../server/typing';\n\nimport { setCode } from '../server/service';\nimport { codeSnippet } from './CodeSnippet';\nimport { buttonBarStyle, buttonStyle, inputStyle } from './codeStyle';\nimport { Info } from '../common/Info';\nimport { Location } from 'history';\n\nconst { Paragraph } = Typography;\n\ninterface FormInput extends HTMLFormElement {\n    name: string,\n    pattern: string,\n}\n\nconst onPlay = () => {\n    message.warn('To be implemented.', 2);\n}\n\nconst save = async (\n    id: string,\n    source: string,\n    info: FormInput,\n) => {\n    try {\n        await setCode({\n            id,\n            source,\n            ...info,\n        });\n        message.success('Code saved.', 2);\n    } catch (error) {\n        notification['error']({\n            message: 'Something went wrong!',\n            description: error.toString(),\n        });\n    }\n}\n\nconst handleSubmit = (\n    id: string,\n    source: string,\n    validateFields: any,\n) => (event: React.FormEvent<FormInput>) => {\n    event.preventDefault();\n    validateFields((err: any, info: FormInput) => {\n        if (!err) {\n            save(id, source, info);\n        }\n    });\n}\n\ntype Props = FormComponentProps & {\n    id: string;\n    code: Code;\n    location: Location<{ pattern: string }>;\n    setSource: (source: string) => void;\n};\n\nconst CodeFormComponent = ({\n    setSource,\n    id,\n    code,\n    form: { getFieldDecorator, validateFields },\n    location: { state },\n}: Props) => {\n    return (\n        <Form onSubmit={handleSubmit(id, code.source, validateFields)}>\n            <Form.Item style={inputStyle}>\n                {getFieldDecorator('name', {\n                    initialValue: code.name || '',\n                })(\n                    <Input addonBefore=\"Name\" />\n                )}\n            </Form.Item>\n            <Form.Item style={inputStyle}>\n                {getFieldDecorator('pattern', {\n                    rules: [{ required: true, message: 'Please input a pattern!' }],\n                    initialValue: code.pattern || (state && state.pattern) || '',\n                })(\n                    <Input addonBefore=\"Pattern\" />\n                )}\n            </Form.Item>\n            <Info>\n                <Paragraph>\n                    Pattern is using <a href=\"https://www.npmjs.com/package/minimatch\" target=\"_blank\">minimatch</a> to\n                    match the urls to inject the code.\n                    It works by converting glob expressions into JavaScript RegExp objects.\n                </Paragraph>\n            </Info>\n            <div style={buttonBarStyle}>\n                <Button icon=\"save\" htmlType=\"submit\" style={buttonStyle}>Save</Button>\n                <Button icon=\"caret-right\" onClick={onPlay} style={buttonStyle}>Preview</Button>\n                <Dropdown overlay={codeSnippet(setSource)}>\n                    <Button style={buttonStyle}>\n                        Code snippet <Icon type=\"down\" />\n                    </Button>\n                </Dropdown>\n            </div>\n        </Form>\n    );\n}\n\nexport const CodeForm = Form.create<Props>({ name: 'code' })(CodeFormComponent);\n","import React from 'react';\nimport Menu from 'antd/lib/menu';\n\nexport const codeSnippet = (setCode: (source: string) => void) => (\n    <Menu>\n        <Menu.Item\n            key=\"1\"\n            onClick={() => {\n                setCode(\n`module.exports = async function run(page) {\n    await page.evaluate(() => {\n        const div = document.createElement(\"div\");\n        div.innerHTML = \"Test-crawler is awesome!\";\n        document.body.insertBefore(div, document.body.firstChild);\n    });\n}`\n                );\n            }}\n        >\n            Test-crawler is awesome\n        </Menu.Item>\n        <Menu.Item\n            key=\"2\"\n            onClick={() => {\n                setCode(\n`module.exports = async function run(page) {\n    return await page.evaluate(() => {\n        Array.from(document.body.getElementsByTagName(\"a\"))\n             .filter(a => !a.href)\n             .forEach(a => a.click());\n        return Array.from(document.links).map(\n            link => link.href.replace('/?', '/iframe.html?')\n        );\n    });\n}`\n                );\n            }}\n        >\n            Storybook\n        </Menu.Item>\n        <Menu.Item\n            key=\"3\"\n            onClick={() => {\n                setCode(\n`// expect library from jest is installed by default\n// but you can use any assertion tool of your choice\n// just install it and use it here :D\nconst expect = require('expect');\n\nmodule.exports = async function run(page) {\n  await expect(page.title()).resolves.toMatch('React App');\n  expect('a').toBe('b'); // fail\n}`\n                );\n            }}\n        >\n            Expect assetion example\n        </Menu.Item>\n    </Menu>\n);","import React from 'react';\nimport Spin from 'antd/lib/spin';\nimport Typography from 'antd/lib/typography';\nimport Form from 'antd/lib/form';\nimport AceEditor from 'react-ace';\nimport { RouteComponentProps } from 'react-router';\nimport { Code as CodeType, PageData } from '../server/typing';\nimport { useAsyncCacheEffect } from 'react-async-cache';\n\nimport 'brace/mode/javascript';\nimport 'brace/theme/tomorrow';\n\nimport { getPin, getCode } from '../server/service';\nimport { CodeInfo } from './CodeInfo';\nimport { aceEditorStyle } from './codeStyle';\nimport { CodeCard } from './CodeCard';\nimport { CodeForm } from './CodeFrom';\nimport { ErrorHandler } from '../common/ErrorHandler';\n\nconst { Title } = Typography;\n\nconst setSource = (\n    code: CodeType,\n    setCode: React.Dispatch<React.SetStateAction<CodeType | undefined>>,\n) => (source: string) => {\n    setCode({\n        ...code,\n        source,\n    })\n}\n\ntype Props = RouteComponentProps<{ id: string }>;\n\nexport const Code = ({ match: { params: { id } }, location }: Props) => {\n    const { error, response: code, update: setCode } = useAsyncCacheEffect<CodeType>(getCode, id);\n    if (error) {\n        return <ErrorHandler description={error.toString()} />;\n    }\n    // instead to getPin, there should be a special endpoint retriving a\n    // list of pages matching the pattern\n    // (when it is coming from pin, pattern should be already be filled out)\n    // const { response: pin } = useAsyncCacheEffect<PageData>(getPin, id);\n    return (\n        <>\n            <Title level={3}>Add some code</Title>\n            {\n                code ? (\n                    <Form>\n                        <CodeInfo />\n                        <CodeForm\n                            id={id}\n                            code={code}\n                            setSource={setSource(code, setCode)}\n                            location={location}\n                        />\n                        <AceEditor\n                            mode=\"javascript\"\n                            theme=\"tomorrow\"\n                            onChange={setSource(code, setCode)}\n                            fontSize={14}\n                            value={code.source.length\n                                ? code.source\n                                : `module.exports = async function run(page) {\\n// your code\\n}`}\n                            style={aceEditorStyle}\n                        />\n                        {/* {pin && <CodeCard id={pin.id} png={pin.png} url={pin.url} />} */}\n                    </Form>\n                ) : <Spin />\n            }\n        </>\n    );\n}\n","import React from 'react';\nimport Spin from 'antd/lib/spin';\nimport List from 'antd/lib/list';\nimport Button from 'antd/lib/button';\nimport Typography from 'antd/lib/typography';\nimport { CodeInfoList } from '../server/typing';\nimport { useAsyncCacheEffect } from 'react-async-cache';\n\nimport { getCodes } from '../server/service';\nimport { CodeInfo } from './CodeInfo';\nimport { ErrorHandler } from '../common/ErrorHandler';\nimport { Link } from 'react-router-dom';\nimport { getCodeRoute } from '../routes';\n\nconst { Title, Text } = Typography;\n\nexport const Codes = () => {\n    const { error, response } = useAsyncCacheEffect<CodeInfoList>(getCodes);\n    if (error) {\n        return <ErrorHandler description={error.toString()} />;\n    }\n    return (\n        <>\n            <Title level={3}>Codes</Title>\n            <CodeInfo full={false} />\n            {\n                response\n                    ? <List\n                        dataSource={Object.values(response)}\n                        renderItem={({ id, name, pattern}) => (\n                            <List.Item>\n                                <Link to={getCodeRoute(id)}>{name} <Text code>{pattern}</Text></Link>\n                            </List.Item>\n                        )}\n                    />\n                    : <Spin />\n            }\n            <Link to={getCodeRoute(Math.floor(Date.now()/1000).toString())}>\n                <Button icon=\"plus\" size=\"small\">New</Button>\n            </Link>\n        </>\n    );\n}\n","import React from 'react';\nimport Typography from 'antd/lib/typography';\nimport Spin from 'antd/lib/spin';\n\nimport { getSettings } from './server/service';\n\nconst { Title } = Typography;\n\nconst load = async (\n    setSettings: React.Dispatch<any>,\n) => {\n    setSettings(await getSettings());\n}\n\nexport const Settings = () => {\n    const [settings, setSettings] = React.useState();\n\n    React.useEffect(() => { load(setSettings); }, []);\n\n    return (\n        <>\n            <Title level={3}>Settings</Title>\n            { settings ? (\n                <>\n                    <p><b>Dir:</b> {settings.dir}</p>\n                </>\n            ) : <Spin /> }\n        </>\n    );\n}\n","import React from 'react';\nimport Layout from 'antd/lib/layout';\nimport Typography from 'antd/lib/typography';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\n\nimport './App.css';\nimport NewProject from './new-project/NewProject';\nimport { Projects } from './projects/Projects';\nimport { CrawlerResults } from './crawler/CrawlerResults';\nimport { SideMenu } from './side-menu/SideMenu';\nimport {\n    getHomeRoute, getResultsRoute, getPinsRoute,\n    getCodeRoute, getSettingsRoute, getCodesRoute, getNewProjectRoute\n} from './routes';\nimport { Pins } from './pin/Pins';\nimport { Code } from './code/Code';\nimport { Codes } from './code/Codes';\nimport { Settings } from './Settings';\n\nconst { Sider, Content } = Layout;\nconst { Title } = Typography;\n\nconst layoutStyle = {\n    minHeight: '100vh',\n};\nconst titleStyle = {\n    color: '#fff',\n    margin: 10,\n}\nconst contentStyle = {\n    background: '#fff',\n    padding: 24,\n    margin: 10,\n    minHeight: 280,\n};\n\nconst App = () => (\n    <Router>\n        <Layout style={layoutStyle}>\n            <Sider>\n                <Title level={3} style={titleStyle}>\n                    Test-crawler\n                </Title>\n                <SideMenu />\n            </Sider>\n            <Content style={contentStyle}>\n                <Route path={getHomeRoute()} exact component={Projects} />\n                <Route path={getNewProjectRoute()} exact component={NewProject} />\n                <Route path={getPinsRoute()} exact component={Pins} />\n                <Route path={getSettingsRoute()} exact component={Settings} />\n                <Route path={getCodeRoute(':id')} exact component={Code} />\n                <Route path={getCodesRoute()} exact component={Codes} />\n                <Route path={getResultsRoute(':timestamp')} component={CrawlerResults} />\n            </Content>\n        </Layout>\n    </Router>\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { AsyncCacheProvider } from 'react-async-cache';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render((<AsyncCacheProvider><App /></AsyncCacheProvider>), document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}